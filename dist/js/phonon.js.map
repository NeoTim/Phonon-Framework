{"version":3,"file":"phonon.js","sources":["../../src/js/common/events/dispatch.js","../../src/js/hybrid-apps/pager/page.js","../../src/js/common/events/index.js","../../src/js/hybrid-apps/pager/index.js","../../src/js/hybrid-apps/i18n/binder.js","../../src/js/hybrid-apps/i18n/index.js","../../src/js/common/utils/index.js","../../src/js/components/componentManager.js","../../src/js/components/component.js","../../src/js/common/network/index.js","../../src/js/components/alert/index.js","../../src/js/components/dialog/index.js","../../src/js/components/dialog/prompt.js","../../src/js/components/dialog/confirm.js","../../src/js/components/loader/index.js","../../src/js/components/dialog/loader.js","../../src/js/components/notification/index.js","../../src/js/components/collapse/index.js","../../src/js/components/accordion/index.js","../../src/js/components/tab/index.js","../../src/js/components/progress/index.js","../../src/js/components/off-canvas/index.js","../../src/js/components/dropdown/index.js","../../src/js/components/dropdown/search.js","../../src/js/index.js"],"sourcesContent":["export function dispatchWinDocEvent(eventName, moduleName, detail = {}) {\n  const fullEventName = `${eventName}.ph.${moduleName}`\n  window.dispatchEvent(new CustomEvent(fullEventName, { detail }))\n  document.dispatchEvent(new CustomEvent(fullEventName, { detail }))\n}\n\nexport function dispatchElementEvent(domElement, eventName, moduleName, detail = {}) {\n  const fullEventName = `${eventName}.ph.${moduleName}`\n  domElement.dispatchEvent(new CustomEvent(fullEventName, { detail }))\n}\n\nexport function dispatchPageEvent(eventName, pageName, detail = {}) {\n  const fullEventName = `${pageName}.${eventName}`\n  window.dispatchEvent(new CustomEvent(fullEventName, { detail }))\n  document.dispatchEvent(new CustomEvent(fullEventName, { detail }))\n}\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { dispatchPageEvent } from '../../common/events/dispatch'\n\nconst Page = (() => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'page'\n  const VERSION = '2.0.0'\n\n  const TEMPLATE_SELECTOR = '[data-template]'\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Page {\n    /**\n     * Creates an instance of Page.\n     * @param {string} pageName\n     */\n    constructor(pageName) {\n      this.name = pageName\n      this.events = []\n      this.templatePath = null\n      this.renderFunction = null\n    }\n\n    // getters\n\n    static get version() {\n      return `${NAME}.${VERSION}`\n    }\n\n    /**\n     * Get events\n     * @returns {Function[]}\n     */\n    getEvents() {\n      return this.events\n    }\n\n    /**\n     * Get template\n     * @returns {string}\n     */\n    getTemplate() {\n      return this.template\n    }\n\n    /**\n     * Get render function\n     * @returns {Function}\n     */\n    getRenderFunction() {\n      return this.renderFunction\n    }\n\n    async renderTemplate() {\n      const pageElement = document.querySelector(`[data-page=\"${this.name}\"]`)\n\n      let render = async function (DOMPage, template, elements) {\n        if (elements) {\n          Array.from(elements).forEach((el) => {\n            el.innerHTML = template\n          })\n        } else {\n          DOMPage.innerHTML = template\n        }\n      }\n\n      if (this.getRenderFunction()) {\n        render = this.getRenderFunction()\n      }\n\n      await render(pageElement, this.getTemplate(), pageElement.querySelectorAll(TEMPLATE_SELECTOR))\n    }\n\n    // public\n\n    /**\n     *\n     * @param {*} callbackFn\n     */\n    addEventCallback(callbackFn) {\n      this.events.push(callbackFn)\n    }\n\n    /**\n     * Use the given template\n     *\n     * @param {string} template\n     * @param {Function} renderFunction\n     */\n    setTemplate(template = null, renderFunction = null) {\n      if (typeof template !== 'string') {\n        throw new Error('The template path must be a string. ' + typeof template + ' is given')\n      }\n\n      this.template = template\n\n      if (typeof renderFunction === 'function') {\n        this.renderFunction = renderFunction\n      }\n    }\n\n    /**\n     * Add a transition handler\n     *\n     * @param {Function} fn\n     */\n    setPreventTransition(fn) {\n      if (typeof fn !== 'function') {\n        throw new Error(`${NAME}: invalid function to handle page transitions`);\n      }\n      this.preventTransitionFn = fn;\n    }\n\n    getPreventTransition() {\n      return this.preventTransitionFn;\n    }\n\n    /**\n     * Trigger scopes\n     * @param {string} eventName\n     * @param {{}} [eventParams={}]\n     */\n    triggerScopes(eventName, eventParams = {}) {\n      const eventNameAlias = `on${eventName.charAt(0).toUpperCase()}${eventName.slice(1)}`\n\n      this.events.forEach((scope) => {\n        const scopeEvent = scope[eventName]\n        const scopeEventAlias = scope[eventNameAlias]\n        if (typeof scopeEvent === 'function') {\n          scopeEvent.apply(this, eventParams)\n        }\n\n        // trigger the event alias\n        if (typeof scopeEventAlias === 'function') {\n          scopeEventAlias.apply(this, eventParams)\n        }\n      })\n\n      dispatchPageEvent(eventName, this.name, eventParams)\n    }\n  }\n\n  return Page\n})()\n\nexport default Page\n","// @todo keep ?\nif (typeof window !== 'undefined') {\n  window.addEventListener('error', () => {\n    console.error('An error has occured! You can pen an issue here: https://github.com/quark-dev/Phonon-Framework/issues')\n  })\n}\n\n// Use available events\nlet availableEvents = ['mousedown', 'mousemove', 'mouseup']\nlet touchScreen = false\n\nif (typeof window !== 'undefined') {\n  if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n    touchScreen = true\n    availableEvents = ['touchstart', 'touchmove', 'touchend', 'touchcancel']\n  }\n\n  if (window.navigator.pointerEnabled) {\n    availableEvents = ['pointerdown', 'pointermove', 'pointerup', 'pointercancel']\n  } else if (window.navigator.msPointerEnabled) {\n    availableEvents = ['MSPointerDown', 'MSPointerMove', 'MSPointerUp', 'MSPointerCancel']\n  }\n}\n\nconst el = document.createElement('div')\nconst transitions = [\n  { name: 'transition', start: 'transitionstart', end: 'transitionend' },\n  { name: 'MozTransition', start: 'transitionstart', end: 'transitionend' },\n  { name: 'msTransition', start: 'msTransitionStart', end: 'msTransitionEnd' },\n  { name: 'WebkitTransition', start: 'webkitTransitionStart', end: 'webkitTransitionEnd' },\n]\nconst animations = [\n  { name: 'animation', start: 'animationstart', end: 'animationend' },\n  { name: 'MozAnimation', start: 'animationstart', end: 'animationend' },\n  { name: 'msAnimation', start: 'msAnimationStart', end: 'msAnimationEnd' },\n  { name: 'WebkitAnimation', start: 'webkitAnimationStart', end: 'webkitAnimationEnd' },\n]\n\nconst transitionStart = transitions.find(t => el.style[t.name] !== undefined).start\nconst transitionEnd = transitions.find(t => el.style[t.name] !== undefined).end\nconst animationStart = animations.find(t => el.style[t.name] !== undefined).start\nconst animationEnd = animations.find(t => el.style[t.name] !== undefined).end\n\nexport default {\n  // touch screen support\n  TOUCH_SCREEN: touchScreen,\n\n  // network\n  NETWORK_ONLINE: 'online',\n  NETWORK_OFFLINE: 'offline',\n  NETWORK_RECONNECTING: 'reconnecting',\n  NETWORK_RECONNECTING_SUCCESS: 'reconnect.success',\n  NETWORK_RECONNECTING_FAILURE: 'reconnect.failure',\n\n  // user interface states\n  SHOW: 'show',\n  SHOWN: 'shown',\n  HIDE: 'hide',\n  HIDDEN: 'hidden',\n\n  // hash\n  HASH: 'hash',\n\n  // touch, mouse and pointer events polyfill\n  START: availableEvents[0],\n  MOVE: availableEvents[1],\n  END: availableEvents[2],\n  CANCEL: typeof availableEvents[3] === 'undefined' ? null : availableEvents[3],\n\n  // click\n  CLICK: 'click',\n\n  // transitions\n  TRANSITION_START: transitionStart,\n  TRANSITION_END: transitionEnd,\n\n  // animations\n  ANIMATION_START: animationStart,\n  ANIMATION_END: animationEnd,\n\n  // dropdown\n  ITEM_SELECTED: 'itemSelected',\n}\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Page from './page'\nimport Event from '../../common/events'\n\nconst Pager = (() => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'pager'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n    hashPrefix: '#!',\n    useHash: true,\n    defaultPage: null,\n    animatePages: true,\n  }\n\n  let currentPage\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Pager {\n    /**\n     * @constructor\n     *\n     * @param options {Object}\n     */\n    constructor(options = {}) {\n      this.options = Object.assign(DEFAULT_PROPERTIES, options)\n\n      this.pages = []\n      this.started = false\n\n      // add global listeners such ash hash change, navigation, etc.\n      this.addPagerEvents()\n\n      // faster way to init pages before the DOM is ready\n      this.onDOMLoaded()\n    }\n\n    // private\n    _(selector) {\n      return document.querySelector(selector)\n    }\n\n    getHash() {\n      return window.location.hash.split(this.options.hashPrefix)[1]\n    }\n\n    getPageFromHash() {\n      const hash = this.getHash()\n      const re = new RegExp('[?\\/]([^\\/]*)')\n      const matches = re.exec(hash)\n\n      if (matches && matches[1]) {\n        return matches[1]\n      }\n\n      return null\n    }\n\n    setHash(pageName) {\n      window.location.hash = `${this.options.hashPrefix}/${pageName}`\n    }\n\n    isPageOf(pageName1, pageName2) {\n      const page1 = this.getPageModel(pageName1)\n      const page2 = this.getPageModel(pageName2)\n      return page1 && page2 && page1.name === page2.name\n    }\n\n    /**\n     * Attaches the main events for tracking hash changes,\n     * click on navigation buttons and links and back history\n     */\n    addPagerEvents() {\n      document.addEventListener('click', event => this.onClick(event))\n      window.addEventListener('popstate', event => this.onBackHistory(event))\n      window.addEventListener('hashchange', event => this.onHashChange(event))\n      document.addEventListener('DOMContentLoaded', event => this.onDOMLoaded(event))\n    }\n\n    // getters\n\n    static get version() {\n      return `${NAME}.${VERSION}`\n    }\n\n    // public\n\n    async showPage(pageName, back = false, params = {}, from = Event.CLICK) {\n      const oldPage = this._('.current');\n      let oldPageName = null;\n\n      if (oldPage) {\n        oldPageName = oldPage.getAttribute('data-page');\n        const oldPageModel = this.getPageModel(oldPageName);\n        const preventFn = oldPageModel.getPreventTransition();\n\n        if (typeof preventFn === 'function') {\n          if (await preventFn(oldPageName, pageName, params)) {\n            if (from === Event.HASH) {\n              window.history.back();\n            }\n            return;\n          }\n        }\n\n        if (this.isPageOf(pageName, oldPageName)) {\n          return\n        }\n\n        oldPage.classList.remove('current')\n\n        // history\n        window.history.replaceState({ page: pageName }, oldPageName)\n\n        this.triggerPageEvent(oldPageName, Event.HIDE)\n      }\n\n      this.triggerPageEvent(pageName, Event.SHOW)\n\n      currentPage = pageName\n\n      // new page\n      const newPage = this._(`[data-page=\"${pageName}\"]`)\n\n      newPage.classList.add('current')\n\n      // render template\n      const pageModel = this.getPageModel(pageName)\n\n      if (pageModel && pageModel.getTemplate()) {\n        await pageModel.renderTemplate()\n      }\n\n      if (oldPage) {\n        // use of prototype-oriented language\n        oldPage.back = back\n        oldPage.previousPageName = oldPageName\n\n        const onPageAnimationEnd = () => {\n          if (oldPage.classList.contains('animate')) {\n            oldPage.classList.remove('animate')\n          }\n\n          oldPage.classList.remove(oldPage.back ? 'pop-page' : 'push-page')\n\n          this.triggerPageEvent(currentPage, Event.SHOWN)\n          this.triggerPageEvent(oldPage.previousPageName, Event.HIDDEN)\n\n          oldPage.removeEventListener(Event.ANIMATION_END, onPageAnimationEnd)\n        }\n\n        if (this.options.animatePages) {\n          oldPage.addEventListener(Event.ANIMATION_END, onPageAnimationEnd)\n          oldPage.classList.add('animate')\n        } else {\n          onPageAnimationEnd()\n        }\n\n        oldPage.classList.add(back ? 'pop-page' : 'push-page')\n      }\n    }\n\n    addUniquePageModel(pageName) {\n      if (!this.getPageModel(pageName)) {\n        this.pages.push(new Page(pageName))\n      }\n    }\n\n    getPageModel(pageName) {\n      return this.pages.find(page => page.name === pageName)\n    }\n\n    getPagesModel(pageNames) {\n      return this.pages.filter(page => pageNames.indexOf(page.name) > -1)\n    }\n\n    selectorToArray(str) {\n      return str.split(',').map(item => item.trim())\n    }\n\n    addEvents(callback) {\n      if (this.cachePageSelector === '*') {\n        // add to all page models\n        this.pages.forEach((page) => {\n          page.addEventCallback(callback)\n        })\n        return\n      }\n\n      const pageModels = this.getPagesModel(this.selectorToArray(this.cachePageSelector), true)\n      pageModels.forEach((page) => {\n        page.addEventCallback(callback)\n      })\n      this.cachePageSelector = null\n    }\n\n    preventTransition(preventFn) {\n      if (this.cachePageSelector === '*') {\n        this.pages.forEach((page) => {\n          page.setPreventTransition(preventFn);\n        });\n        return;\n      }\n\n      const pageModels = this.getPagesModel(this.selectorToArray(this.cachePageSelector), true);\n      pageModels.forEach((page) => {\n        page.setPreventTransition(preventFn);\n      });\n\n      this.cachePageSelector = null;\n    }\n\n    setTemplate(templatePath, renderFunction = null) {\n      const pageModels = this.getPagesModel(this.selectorToArray(this.cachePageSelector), true)\n      pageModels.forEach((page) => {\n        page.setTemplate(templatePath, renderFunction)\n      })\n      this.cachePageSelector = null\n    }\n\n    triggerPageEvent(pageName, eventName, eventParams = null) {\n      const pageModel = this.getPageModel(pageName)\n      if (pageModel) {\n        pageModel.triggerScopes(eventName, eventParams)\n      }\n    }\n\n    onClick(event) {\n      const pageName = event.target.getAttribute('data-navigate')\n      const pushPage = !(event.target.getAttribute('data-pop-page') === 'true')\n\n      if (pageName) {\n        if (pageName === '$back') {\n          // the popstate event will be triggered\n          window.history.back()\n          return\n        }\n\n        /*\n         * If we he use the hash as trigger,\n         * we change it dynamically so that the hashchange event is called\n         * Otherwise, we show the page\n         */\n        if (this.options.useHash) {\n          this.setHash(pageName)\n        } else {\n          this.showPage(pageName, pushPage)\n        }\n      }\n    }\n\n    onBackHistory(event = {}) {\n      const pageName = event.state ? event.state.page : null\n      if (!pageName) {\n        return\n      }\n\n      this.showPage(pageName, true)\n    }\n\n    onHashChange() {\n      const params = (this.getHash() ? this.getHash().split('/') : []).filter(p => p.length > 0)\n      if (params.length > 0) {\n        // remove first value which is the page name\n        params.shift()\n      }\n\n      this.triggerPageEvent(currentPage, Event.HASH, params)\n\n      const navPage = this.getPageFromHash()\n      if (navPage) {\n        this.showPage(navPage, false, params, Event.HASH)\n      }\n    }\n\n    /**\n     * Queries the page nodes in the DOM\n     */\n    onDOMLoaded() {\n      const pages = document.querySelectorAll('[data-page]')\n\n      if (!pages) {\n        return\n      }\n\n      pages.forEach((page) => {\n        /*\n         * the page name can be given with the attribute data-page\n         * or with its node name\n         */\n        const pageName = page.getAttribute('data-page') || page.nodeName;\n\n        this.addUniquePageModel(pageName);\n      })\n    }\n\n    select(pageName, addPageModel = true) {\n      this.cachePageSelector = pageName\n\n      if (addPageModel && pageName !== '*') {\n        this.addUniquePageModel(pageName)\n      }\n\n      return this\n    }\n\n    start(forceDefaultPage = false) {\n      // check if the app has been already started\n      if (this.started) {\n        throw new Error(`${NAME}. The app has been already started.`)\n      }\n\n      this.started = true\n\n      // force default page on Cordova\n      if (window.cordova) {\n        forceDefaultPage = true\n      }\n\n      let pageName = this.getPageFromHash();\n\n      if (!this.getPageModel(pageName)) {\n        pageName = this.options.defaultPage\n      }\n\n      if (forceDefaultPage && !this.options.defaultPage) {\n        throw new Error(`${NAME}. The default page must exist for forcing its launch!`)\n      }\n\n      /*\n       * if the app is configurated to use hash tracking\n       * we add the page dynamically in the url\n       */\n      if (this.options.useHash) {\n        this.setHash(pageName)\n      }\n\n      this.showPage(forceDefaultPage ? this.options.defaultPage : pageName)\n    }\n\n    // static\n    static DOMInterface(options) {\n      return new Pager(options)\n    }\n  }\n\n  return Pager\n})()\n\nexport default Pager\n","/**\n* --------------------------------------------------------------------------\n* Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n* --------------------------------------------------------------------------\n*/\n\nconst Binder = (() => {\n  /**\n  * ------------------------------------------------------------------------\n  * Constants\n  * ------------------------------------------------------------------------\n  */\n\n  const NAME = 'i18n-binder'\n  const VERSION = '2.0.0'\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Binder {\n\n    /**\n     * @param {HTMLElement} element\n     * @param {Object} data\n     */\n    constructor(element, data) {\n      this.element = element\n      this.data = data\n\n      if (!this.isElement(this.element)) {\n        console.log('Warning, an element is invalid');\n        return\n      }\n\n      // array of HTMLElement\n      if (this.element.length && this.element.length > 0) {\n        this.setNodes(this.element)\n      } else {\n        // single HTMLElement\n        this.setNode(this.element)\n      }\n    }\n\n    // getters\n\n    static get version() {\n      return `${NAME}.${VERSION}`\n    }\n\n    /**\n     * Checks if the given argument is a DOM element\n     * @param {HTMLElement} the argument to test\n     * @return {boolean} true if the object is a DOM element, false otherwise\n     */\n    isElement(element) {\n      if (element === null) {\n        return false\n      }\n\n      return element instanceof Node || element instanceof NodeList\n    }\n\n    /**\n    * Binds some text to the given DOM element\n    * @param {HTMLElement} element\n    * @param {String} text\n    */\n    setText(element, text) {\n      if (!('textContent' in element)) {\n        element.innerText = text\n      } else {\n        element.textContent = text\n      }\n    }\n\n    /**\n     * Binds some html to the given DOM element\n     * @param {HTMLElement} element\n     * @param {String} text\n     */\n    setHtml(element, text) {\n      element.innerHTML = text\n    }\n\n    /**\n     * Binds custom attributes to the given DOM element\n     * @param {HTMLElement} element\n     * @param {String} attr\n     * @param {String} text\n     */\n    setAttribute(element, attr, text) {\n      element.setAttribute(attr, text)\n    }\n\n    /**\n     * Binds DOM elements\n     * @param {HTMLElement} element\n     */\n    setNode(element) {\n      let attr = element.getAttribute('data-t')\n      if (!attr) {\n        return\n      }\n\n      attr = attr.trim()\n\n      const r = /(?:\\s|^)([A-Za-z-_0-9]+):\\s*(.*?)(?=\\s+\\w+:|$)/g\n      let m\n\n      while (m = r.exec(attr)) {\n        const key = m[1].trim()\n        const value = m[2].trim().replace(',', '')\n        let i18nValue = this.data[value]\n\n        if (!this.data[value]) {\n          console.log(`${NAME}. Warning, ${value} does not exist.`)\n          i18nValue = value\n        }\n\n        const methodName = 'set' + key.charAt(0).toUpperCase() + key.slice(1)\n\n        if (this[methodName]) {\n          this[methodName](element, i18nValue)\n        } else {\n          this.setAttribute(element, key, i18nValue)\n        }\n      }\n    }\n\n    /**\n     * Binds DOM elements\n     * @param {HTMLElement} element\n     */\n    setNodes(element) {\n      Array.from(element).forEach(el => this.setNode(el))\n    }\n  }\n\n  return Binder\n})()\n\nexport default Binder\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Binder from './binder'\n\nconst I18n = (() => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'i18n'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n    fallbackLocale: 'en',\n    locale: 'en',\n    bind: false,\n    data: null,\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class I18n {\n    /**\n     * Creates an instance of I18n.\n     * @param {fallbackLocale: string, locale: string, bind: boolean, data: {[lang: string]: {[key: string]: string}}}\n     */\n    constructor(options = {}) {\n      this.options = Object.assign(DEFAULT_PROPERTIES, options)\n\n      if (typeof this.options.fallbackLocale !== 'string') {\n        throw new Error(`${NAME}. The fallback locale is mandatory and must be a string.`)\n      }\n\n      if (this.options.data === null) {\n        throw new Error(`${NAME}. There is no translation data.`)\n      }\n\n      if (typeof this.options.data[this.options.fallbackLocale] !== 'object') {\n        throw new Error(`${NAME}. The fallback locale must necessarily have translation data.`)\n      }\n\n      this.setLocale(this.options.locale, this.options.bind)\n    }\n\n    static get version() {\n      return `${NAME}.${VERSION}`\n    }\n\n    getLocale() {\n      return this.options.locale\n    }\n\n    getFallbackLocale() {\n      return this.options.fallbackLocale\n    }\n\n    /**\n     * Set default locale\n     * @param {string} locale\n     * @param {boolean} [bind=true]\n     */\n    setLocale(locale, bind = false) {\n      if (typeof this.options.data[locale] !== 'object') {\n        console.error(`${NAME}. ${locale} has no data, fallback in ${this.options.fallbackLocale}.`)\n      } else {\n        this.options.locale = locale\n      }\n\n      if (bind) {\n        this.updateHtml()\n      }\n    }\n\n    getLanguages() {\n      return Object.keys(this.options.data)\n    }\n\n    insertValues(value = null, injectableValues = {}) {\n      if (typeof value !== 'string') {\n        return undefined\n      }\n\n      const match = value.match(/:([a-zA-Z-_0-9]+)/)\n      if (match) {\n        value = value.replace(match[0], injectableValues[match[1]])\n      }\n\n      if (value.match(/:([a-zA-Z-_0-9]+)/)) {\n        return this.insertValues(value, injectableValues)\n      }\n\n      return value\n    }\n\n    translate(keyName = null, inject = {}) {\n      let data = this.options.data[this.options.locale]\n      if (!data) {\n        data = this.options.data[this.options.fallbackLocale]\n      }\n\n      if (keyName === null || keyName === '*' || Array.isArray(keyName)) {\n        if (Array.isArray(keyName)) {\n          const keys = Object.keys(data).filter(key => keyName.indexOf(key) > -1)\n          const filteredData = {}\n          keys.forEach(key => {\n            filteredData[key] = this.insertValues(data[key], inject)\n          })\n          data = filteredData\n        }\n\n        const dataMap = {}\n        for (const key in data) {\n          dataMap[key] = this.insertValues(data[key], inject)\n        }\n\n        return dataMap\n      }\n\n      return this.insertValues(data[keyName], inject)\n    }\n\n    // alias of t()\n    t(keyName = null, inject = {}) {\n      return this.translate(keyName, inject)\n    }\n\n    /**\n     * Updates the HTML views\n     * @param {HTMLElement} element\n     */\n    updateHtml(element = null) {\n      if (!element) {\n        element = document.querySelectorAll('[data-t]')\n      }\n\n      if (typeof element === 'string') {\n        element = document.querySelector(element)\n      }\n\n      new Binder(element, this.t())\n    }\n\n    // static\n    static DOMInterface(options) {\n      return new I18n(options)\n    }\n  }\n\n  return I18n\n})()\n\nexport default I18n\n","\nexport function generateId() {\n  return Math.random().toString(36).substr(2, 10)\n}\n\nexport function findTargetByClass(target, parentClass) {\n  for (; target && target !== document; target = target.parentNode) {\n    if (target.classList.contains(parentClass)) {\n      return target\n    }\n  }\n\n  return null\n}\n\nexport function findTargetById(target, parentId) {\n  for (; target && target !== document; target = target.parentNode) {\n    if (target.getAttribute('id') === parentId) {\n      return target\n    }\n  }\n\n  return null\n}\n\nexport function findTargetByAttr(target, attr) {\n  for (; target && target !== document; target = target.parentNode) {\n    if (target.getAttribute(attr) !== null) {\n      return target\n    }\n  }\n\n  return null\n}\n\nexport function createJqueryPlugin($ = null, name, obj) {\n  if (!$) {\n    return;\n  }\n\n  const mainFn = function (options = {}) {\n    const opts = options;\n    if (this[0]) {\n      opts.element = this[0];\n    }\n\n    return obj.DOMInterface(opts)\n  };\n\n  $.fn[name] = mainFn;\n  $.fn[name].Constructor = obj\n  $.fn[name].noConflict = mainFn;\n}\n","\nconst getAttribute = (first, second) => {\n  if (first === '') {\n    return `data-${second}`\n  }\n  return `data-${first}-${second}`\n}\n\nexport function setAttributesConfig(element, obj = {}, attrs, start = '') {\n  const keys = Object.keys(obj)\n\n  keys.forEach((key) => {\n    if (start === '' && attrs.indexOf(key) === -1) {\n      // continue with next iteration\n      return\n    }\n\n    if (typeof obj[key] === 'object' && obj[key] !== null) {\n      let keyStart = key\n      if (start !== '') {\n        keyStart = `${start}-${key}`\n      }\n\n      setAttributesConfig(element, obj[key], attrs, keyStart)\n      return\n    }\n\n    const attr = getAttribute(start, key)\n    element.setAttribute(attr, obj[key])\n  })\n}\n\nexport function getAttributesConfig(element, obj = {}, attrs, start = '') {\n  const newObj = Object.assign({}, obj)\n  const keys = Object.keys(obj)\n\n  keys.forEach((key) => {\n    if (start === '' && attrs.indexOf(key) === -1) {\n      // continue with next iteration\n      return\n    }\n\n    if (obj[key] !== null && obj[key].constructor === Object) {\n      let keyStart = key\n      if (start !== '') {\n        keyStart = `${start}-${key}`\n      }\n\n      newObj[key] = getAttributesConfig(element, obj[key], attrs, keyStart)\n      return\n    }\n\n    // update value\n    let value = obj[key] // default value\n    const type = typeof value\n    const attr = getAttribute(start, key)\n    const attrValue = element.getAttribute(attr)\n\n    if (attrValue !== null) {\n      if (type === 'boolean') {\n        // convert string to boolean\n        value = attrValue === 'true'\n      } else if (!isNaN(attrValue)) {\n        value = parseInt(attrValue, 10)\n      } else {\n        value = attrValue\n      }\n    }\n\n    newObj[key] = value\n  })\n\n  return newObj\n}\n\nconst stack = []\n\nexport default {\n  add(component) {\n    stack.push(component)\n  },\n  remove(component) {\n    const index = stack.findIndex(c => Object.is(component, c))\n    if (index > -1) {\n      stack.splice(index, 1)\n    }\n  },\n  closable(component) {\n    return stack.length === 0 || Object.is(stack[stack.length - 1], component)\n  },\n};\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport { dispatchElementEvent, dispatchWinDocEvent } from '../common/events/dispatch'\nimport { generateId } from '../common/utils/index'\nimport Event from '../common/events'\nimport ComponentManager, { setAttributesConfig, getAttributesConfig } from './componentManager'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nexport default class Component {\n\n  constructor(name, version, defaultOptions = {}, options = {}, optionAttrs = [], supportDynamicElement = false, addToStack = false) {\n    this.name = name\n    this.version = version\n    this.options = options\n\n    Object.keys(defaultOptions).forEach((prop) => {\n      if (typeof this.options[prop] === 'undefined') {\n        this.options[prop] = defaultOptions[prop]\n      }\n    })\n\n    this.optionAttrs = optionAttrs\n    this.supportDynamicElement = supportDynamicElement\n    this.addToStack = addToStack\n    this.id = generateId()\n\n    const checkElement = !this.supportDynamicElement || this.options.element !== null\n\n    if (typeof this.options.element === 'string') {\n      this.options.element = document.querySelector(this.options.element)\n    }\n\n    if (checkElement && !this.options.element) {\n      throw new Error(`${this.name}. The element is not a HTMLElement.`)\n    }\n\n    this.dynamicElement = this.options.element === null\n    this.registeredElements = []\n\n    if (!this.dynamicElement) {\n      /**\n       * if the element exists, we read the data attributes config\n       * then we overwrite existing config keys defined in JavaScript, so that\n       * we keep the following order\n       * [1] default JavaScript configuration of the component\n       * [2] Data attributes configuration\n       * [3] JavaScript configuration\n       */\n      this.options = Object.assign(this.options, this.assignJsConfig(this.getAttributes(), this.options))\n\n      // then, set the new data attributes to the element\n      this.setAttributes()\n    }\n\n    this.elementListener = event => this.onBeforeElementEvent(event)\n  }\n\n  assignJsConfig(attrConfig, jsConfig) {\n    const config = attrConfig;\n    this.optionAttrs.forEach((key) => {\n      if (typeof jsConfig[key] !== 'undefined') {\n        config[key] = jsConfig[key]\n      }\n    })\n\n    return config\n  }\n\n  getVersion() {\n    return this.version\n  }\n\n  getElement() {\n    return this.options.element\n  }\n\n  getId() {\n    return this.id\n  }\n\n  registerElements(elements) {\n    elements.forEach(element => this.registerElement(element))\n  }\n\n  registerElement(element) {\n    element.target.addEventListener(element.event, this.elementListener)\n    this.registeredElements.push(element)\n  }\n\n  unregisterElements() {\n    this.registeredElements.forEach((element) => {\n      this.unregisterElement(element)\n    })\n  }\n\n  unregisterElement(element) {\n    const registeredElementIndex = this.registeredElements\n      .findIndex(el => el.target === element.target && el.event === element.event)\n\n    if (registeredElementIndex > -1) {\n      element.target.removeEventListener(element.event, this.elementListener)\n      this.registeredElements.splice(registeredElementIndex, 1)\n    } else {\n      console.error(`Warning! Unknown registered element: ${element.target} with event: ${element.event}.`)\n    }\n  }\n\n  triggerEvent(eventName, detail = {}, objectEventOnly = false) {\n    if (typeof eventName !== 'string') {\n      throw new Error('The event name is not valid.')\n    }\n\n    if (this.addToStack) {\n      if (eventName === Event.SHOW) {\n        ComponentManager.add(this)\n      } else if (eventName === Event.HIDE) {\n        ComponentManager.remove(this)\n      }\n    }\n\n    // event names can be with dot notation like reconnecting.success\n    const eventNameObject = eventName.split('.').reduce((acc, current, index) => {\n      if (index === 0) {\n        return current\n      }\n\n      return acc + current.charAt(0).toUpperCase() + current.slice(1)\n    })\n\n    const eventNameAlias = `on${eventNameObject.charAt(0).toUpperCase()}${eventNameObject.slice(1)}`\n\n    // object event\n    if (typeof this.options[eventNameObject] === 'function') {\n      this.options[eventNameObject].apply(this, [detail])\n    }\n\n    if (typeof this.options[eventNameAlias] === 'function') {\n      this.options[eventNameAlias].apply(this, [detail])\n    }\n\n    if (objectEventOnly) {\n      return\n    }\n\n    // dom event\n    if (this.options.element) {\n      dispatchElementEvent(this.options.element, eventName, this.name, detail)\n    } else {\n      dispatchWinDocEvent(eventName, this.name, detail)\n    }\n  }\n\n  setAttributes() {\n    if (this.optionAttrs.length > 0) {\n      setAttributesConfig(this.options.element, this.options, this.optionAttrs)\n    }\n  }\n\n  getAttributes() {\n    const options = Object.assign({}, this.options)\n    return getAttributesConfig(this.options.element, options, this.optionAttrs)\n  }\n\n  /**\n   * the preventClosable method manages concurrency between active components.\n   * For example, if there is a shown off-canvas and dialog, the last\n   * shown component gains the processing priority\n   */\n  preventClosable() {\n    return this.addToStack && !ComponentManager.closable(this)\n  }\n\n  onBeforeElementEvent(event) {\n    if (this.preventClosable()) {\n      return\n    }\n\n    this.onElementEvent(event)\n  }\n\n  onElementEvent(event) {\n    //\n  }\n\n  static identifier() {\n    return this.name\n  }\n\n  static DOMInterface(ComponentClass, options) {\n    return new ComponentClass(options)\n  }\n}\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Event from '../../common/events'\nimport Component from '../../components/component'\n\nconst Network = (() => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'network'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    initialDelay: 3000,\n    delay: 5000,\n  }\n  const DATA_ATTRS_PROPERTIES = [\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Network extends Component {\n    /**\n     * Creates an instance of Network.\n     * @param {{}} [options={}]\n     */\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, true, false)\n\n      this.xhr = null\n      this.checkInterval = null\n\n      this.setStatus(Event.NETWORK_ONLINE)\n\n      setTimeout(() => {\n        this.startCheck()\n      }, this.options.initialDelay)\n    }\n\n    getStatus() {\n      return this.status\n    }\n\n    setStatus(status) {\n      this.status = status\n    }\n\n    startRequest() {\n      this.xhr = new XMLHttpRequest()\n      this.xhr.offline = false\n\n      const url = `/favicon.ico?_=${new Date().getTime()}`\n\n      this.triggerEvent(Event.NETWORK_RECONNECTING, { date: new Date() }, false)\n\n      this.xhr.open('HEAD', url, true)\n\n      this.xhr.timeout = this.options.delay - 1\n      this.xhr.ontimeout = () => {\n        this.xhr.abort()\n        this.xhr = null\n      }\n\n      this.xhr.onload = () => {\n        this.onUp()\n      }\n      this.xhr.onerror = () => {\n        this.onDown()\n      }\n\n      try {\n        this.xhr.send()\n      } catch (e) {\n        this.onDown()\n      }\n    }\n\n    onUp() {\n      this.triggerEvent(Event.NETWORK_RECONNECTING_SUCCESS, { date: new Date() }, false)\n\n      if (this.getStatus() !== Event.NETWORK_ONLINE) {\n        this.triggerEvent(Event.NETWORK_ONLINE, { date: new Date() }, false)\n      }\n\n      this.setStatus(Event.NETWORK_ONLINE)\n    }\n\n    onDown() {\n      this.triggerEvent(Event.NETWORK_RECONNECTING_FAILURE, { date: new Date() }, false)\n\n      if (this.getStatus() !== Event.NETWORK_OFFLINE) {\n        this.triggerEvent(Event.NETWORK_OFFLINE, { date: new Date() }, false)\n      }\n\n      this.setStatus(Event.NETWORK_OFFLINE)\n    }\n\n    startCheck() {\n      this.stopCheck()\n\n      this.startRequest()\n\n      this.checkInterval = setInterval(() => {\n        this.startRequest()\n      }, this.options.delay)\n    }\n\n    stopCheck() {\n      if (this.checkInterval !== null) {\n        clearInterval(this.checkInterval)\n        this.checkInterval = null\n      }\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Network, options)\n    }\n  }\n\n  return Network\n})()\n\nexport default Network\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Component from '../component'\nimport { getAttributesConfig } from '../componentManager'\nimport Event from '../../common/events'\nimport { findTargetByAttr, findTargetByClass, createJqueryPlugin } from '../../common/utils'\n\nconst Alert = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'alert'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    fade: true,\n  };\n  const DATA_ATTRS_PROPERTIES = [\n    'fade',\n  ];\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Alert extends Component {\n\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, false, false);\n      this.onTransition = false;\n    }\n\n    show() {\n      if (this.onTransition) {\n        return false;\n      }\n\n      if (this.options.element.classList.contains('show') && this.getOpacity() !== 0) {\n        return false\n      }\n\n      this.onTransition = true;\n\n      this.triggerEvent(Event.SHOW)\n\n      const onShow = () => {\n        this.triggerEvent(Event.SHOWN)\n\n        if (this.options.element.classList.contains('fade')) {\n          this.options.element.classList.remove('fade');\n        }\n\n        this.options.element.removeEventListener(Event.TRANSITION_END, onShow);\n        this.onTransition = false;\n      }\n\n      if (this.options.fade && !this.options.element.classList.contains('fade')) {\n        this.options.element.classList.add('fade');\n      }\n\n      this.options.element.classList.add('show');\n\n      this.options.element.addEventListener(Event.TRANSITION_END, onShow);\n\n      if (this.options.element.classList.contains('hide')) {\n        this.options.element.classList.remove('hide');\n      }\n\n      if (!this.options.fade) {\n        onShow()\n      }\n    }\n\n    getOpacity() {\n      const { opacity } = window.getComputedStyle(this.options.element);\n      return parseFloat(opacity);\n    }\n\n    hide() {\n      if (this.onTransition) {\n        return false\n      }\n\n      if (this.getOpacity() === 0) {\n        return false\n      }\n\n      this.onTransition = true\n      this.triggerEvent(Event.HIDE)\n\n      const onHide = () => {\n        this.triggerEvent(Event.HIDDEN)\n        this.options.element.removeEventListener(Event.TRANSITION_END, onHide);\n        this.onTransition = false;\n      }\n\n      if (this.options.fade && !this.options.element.classList.contains('fade')) {\n        this.options.element.classList.add('fade');\n      }\n\n      this.options.element.addEventListener(Event.TRANSITION_END, onHide);\n\n      if (!this.options.element.classList.contains('hide')) {\n        this.options.element.classList.add('hide');\n      }\n\n      if (this.options.element.classList.contains('show')) {\n        this.options.element.classList.remove('show');\n      }\n\n      if (!this.options.fade) {\n        onHide()\n      }\n    }\n\n    static identifier() {\n      return NAME;\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Alert, options);\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n  createJqueryPlugin($, NAME, Alert);\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = [];\n\n  const alerts = document.querySelectorAll(`.${NAME}`);\n\n  if (alerts) {\n    alerts.forEach((element) => {\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES);\n      config.element = element;\n\n      components.push(Alert.DOMInterface(config));\n    })\n  }\n\n  document.addEventListener('click', (event) => {\n    const target = findTargetByAttr(event.target, 'data-dismiss');\n    if (!target) {\n      return;\n    }\n\n    const dataToggleAttr = target.getAttribute('data-dismiss');\n\n    if (dataToggleAttr && dataToggleAttr === NAME) {\n      const alert = findTargetByClass(event.target, NAME);\n      const id = alert.getAttribute('id');\n      const component = components.find(c => c.getElement().getAttribute('id') === id);\n\n      if (!component) {\n        return;\n      }\n\n      component.hide();\n    }\n  });\n\n  return Alert;\n})(window.$ ? window.$ : null);\n\nexport default Alert;\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Event from '../../common/events'\nimport Component from '../component'\nimport { getAttributesConfig } from '../componentManager'\nimport { createJqueryPlugin } from '../../common/utils';\n\nconst Dialog = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'dialog'\n  const VERSION = '2.0.0'\n  const BACKDROP_SELECTOR = 'dialog-backdrop'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    title: null,\n    message: null,\n    cancelable: true,\n    type: null,\n    cancelableKeyCodes: [\n      27, // Escape\n      13, // Enter\n    ],\n    buttons: [\n      {\n        event: 'confirm',\n        text: 'Ok',\n        dismiss: true,\n        class: 'btn btn-primary',\n      },\n    ],\n  }\n  const DATA_ATTRS_PROPERTIES = [\n    'cancelable',\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Dialog extends Component {\n\n    constructor(options = {}, template = null) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, true, true)\n\n      this.template = template || '' +\n      '<div class=\"dialog\" tabindex=\"-1\" role=\"dialog\">' +\n        '<div class=\"dialog-inner\" role=\"document\">' +\n          '<div class=\"dialog-content\">' +\n            '<div class=\"dialog-header\">' +\n              '<h5 class=\"dialog-title\"></h5>' +\n            '</div>' +\n            '<div class=\"dialog-body\">' +\n              '<p></p>' +\n            '</div>' +\n            '<div class=\"dialog-footer\">' +\n            '</div>' +\n          '</div>' +\n        '</div>' +\n      '</div>'\n\n      if (this.dynamicElement) {\n        this.build()\n      }\n    }\n\n    build() {\n      const builder = document.createElement('div')\n\n      builder.innerHTML = this.template\n\n      this.options.element = builder.firstChild\n\n      // title\n      if (this.options.title !== null) {\n        this.options.element.querySelector('.dialog-title').innerHTML = this.options.title\n      }\n\n      // message\n      if (this.options.message !== null) {\n        this.options.element.querySelector('.dialog-body').firstChild.innerHTML = this.options.message\n      } else {\n        // remove paragraph node\n        this.removeTextBody()\n      }\n\n      // buttons\n      if (this.options.buttons !== null && Array.isArray(this.options.buttons)) {\n        if (this.options.buttons.length > 0) {\n          this.options.buttons.forEach((button) => {\n            this.options.element.querySelector('.dialog-footer').appendChild(this.buildButton(button))\n          })\n        } else {\n          this.removeFooter()\n        }\n      } else {\n        this.removeFooter()\n      }\n\n      document.body.appendChild(this.options.element)\n\n      this.setAttributes()\n    }\n\n    buildButton(buttonInfo = {}) {\n      const button = document.createElement('button')\n      button.setAttribute('type', 'button')\n      button.setAttribute('class', buttonInfo.class || 'btn')\n      button.setAttribute('data-event', buttonInfo.event)\n      button.innerHTML = buttonInfo.text\n\n      if (buttonInfo.dismiss) {\n        button.setAttribute('data-dismiss', NAME)\n      }\n\n      return button\n    }\n\n    buildBackdrop() {\n      const backdrop = document.createElement('div')\n      backdrop.setAttribute('data-id', this.id)\n      backdrop.classList.add(BACKDROP_SELECTOR)\n\n      document.body.appendChild(backdrop)\n    }\n\n    getBackdrop() {\n      return document.querySelector(`.${BACKDROP_SELECTOR}[data-id=\"${this.id}\"]`)\n    }\n\n    removeTextBody() {\n      this.options.element.querySelector('.dialog-body').removeChild(this.options.element.querySelector('.dialog-body').firstChild)\n    }\n\n    removeFooter() {\n      const footer = this.options.element.querySelector('.dialog-footer')\n      this.options.element.querySelector('.dialog-content').removeChild(footer)\n    }\n\n    center() {\n      const computedStyle = window.getComputedStyle(this.options.element)\n      const height = computedStyle.height.slice(0, computedStyle.height.length - 2)\n\n      const top = (window.innerHeight / 2) - (height / 2)\n      this.options.element.style.top = `${top}px`\n    }\n\n    show() {\n      if (this.options.element === null) {\n        // build and insert a new DOM element\n        this.build()\n      }\n\n      if (this.options.element.classList.contains('show')) {\n        return false\n      }\n\n      // add a timeout so that the CSS animation works\n      setTimeout(() => {\n        this.triggerEvent(Event.SHOW)\n        this.buildBackdrop()\n\n        // attach event\n        this.attachEvents()\n\n        const onShown = () => {\n          this.triggerEvent(Event.SHOWN)\n          this.options.element.removeEventListener(Event.TRANSITION_END, onShown)\n        }\n\n        this.options.element.addEventListener(Event.TRANSITION_END, onShown)\n\n        this.options.element.classList.add('show')\n\n        this.center()\n      }, 10)\n\n      return true\n    }\n\n    onElementEvent(event) {\n      // keyboard event (escape and enter)\n      if (event.type === 'keyup') {\n        if (this.options.cancelableKeyCodes.find(k => k === event.keyCode)) {\n          this.hide()\n        }\n        return\n      }\n\n      // backdrop event\n      if (event.type === Event.START) {\n        // hide the dialog\n        this.hide()\n        return\n      }\n\n      // button event\n      if (event.type === 'click') {\n        const eventName = event.target.getAttribute('data-event')\n\n        if (eventName) {\n          this.triggerEvent(eventName)\n        }\n\n        if (event.target.getAttribute('data-dismiss') === NAME) {\n          this.hide()\n        }\n      }\n    }\n\n    hide() {\n      if (!this.options.element.classList.contains('show')) {\n        return false\n      }\n\n      this.triggerEvent(Event.HIDE)\n\n      this.detachEvents()\n\n      this.options.element.classList.add('hide')\n      this.options.element.classList.remove('show')\n\n      const backdrop = this.getBackdrop()\n\n      const onHidden = () => {\n        document.body.removeChild(backdrop)\n\n        this.options.element.classList.remove('hide')\n\n        this.triggerEvent(Event.HIDDEN)\n\n        backdrop.removeEventListener(Event.TRANSITION_END, onHidden)\n\n        // remove generated dialogs from the DOM\n        if (this.dynamicElement) {\n          document.body.removeChild(this.options.element)\n          this.options.element = null\n        }\n      }\n\n      backdrop.addEventListener(Event.TRANSITION_END, onHidden)\n      backdrop.classList.add('fadeout')\n\n      return true\n    }\n\n    attachEvents() {\n      const buttons = this.options.element.querySelectorAll('[data-dismiss], .dialog-footer button')\n      if (buttons) {\n        Array.from(buttons).forEach(button => this.registerElement({ target: button, event: 'click' }))\n      }\n\n      // add events if the dialog is cancelable\n      // which means the user can hide the dialog\n      // by pressing the ESC key or click on the backdrop\n      if (this.options.cancelable) {\n        const backdrop = this.getBackdrop()\n        this.registerElement({ target: backdrop, event: Event.START })\n        this.registerElement({ target: document, event: 'keyup' })\n      }\n    }\n\n    detachEvents() {\n      const buttons = this.options.element.querySelectorAll('[data-dismiss], .dialog-footer button')\n      if (buttons) {\n        Array.from(buttons).forEach(button => this.unregisterElement({ target: button, event: 'click' }))\n      }\n\n      if (this.options.cancelable) {\n        const backdrop = this.getBackdrop()\n        this.unregisterElement({ target: backdrop, event: Event.START })\n        this.unregisterElement({ target: document, event: 'keyup' })\n      }\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Dialog, options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n  createJqueryPlugin($, NAME, Dialog);\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = []\n\n  const dialogs = document.querySelectorAll(`.${NAME}`)\n  if (dialogs) {\n    Array.from(dialogs).forEach((element) => {\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES)\n      config.element = element\n\n      components.push({ element, dialog: new Dialog(config) })\n    })\n  }\n\n  document.addEventListener('click', (event) => {\n    const dataToggleAttr = event.target.getAttribute('data-toggle')\n    if (dataToggleAttr && dataToggleAttr === NAME) {\n      const id = event.target.getAttribute('data-target')\n      const element = document.querySelector(id)\n\n      const component = components.find(c => c.element === element)\n\n      if (!component) {\n        return\n      }\n\n      // remove the focus state of the trigger\n      event.target.blur()\n\n      component.dialog.show()\n    }\n  })\n\n  return Dialog\n})(window.$ ? window.$ : null)\n\nexport default Dialog\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Dialog from './index'\nimport { getAttributesConfig } from '../componentManager'\n\nconst Prompt = (() => {\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'prompt'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    title: null,\n    message: null,\n    cancelable: true,\n    type: NAME,\n    buttons: [\n      {\n        event: 'cancel',\n        text: 'Cancel',\n        dismiss: true,\n        class: 'btn btn-secondary',\n      },\n      {\n        event: 'confirm',\n        text: 'Ok',\n        dismiss: true,\n        class: 'btn btn-primary',\n      },\n    ],\n  }\n  const DATA_ATTRS_PROPERTIES = [\n    'cancelable',\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Prompt extends Dialog {\n\n    constructor(options = {}) {\n      const template = '' +\n      '<div class=\"dialog\" tabindex=\"-1\" role=\"dialog\">' +\n        '<div class=\"dialog-inner\" role=\"document\">' +\n          '<div class=\"dialog-content\">' +\n            '<div class=\"dialog-header\">' +\n              '<h5 class=\"dialog-title\"></h5>' +\n            '</div>' +\n            '<div class=\"dialog-body\">' +\n              '<p></p>' +\n              '<input class=\"form-control\" type=\"text\" value=\"\">' +\n            '</div>' +\n            '<div class=\"dialog-footer\">' +\n            '</div>' +\n          '</div>' +\n        '</div>' +\n      '</div>'\n\n      if (!Array.isArray(options.buttons)) {\n        options.buttons = DEFAULT_PROPERTIES.buttons\n      }\n\n      super(options, template)\n    }\n\n    show() {\n      super.show()\n      this.attachInputEvent()\n    }\n\n    hide() {\n      super.hide()\n      this.detachInputEvent()\n    }\n\n    getInput() {\n      return this.options.element.querySelector('.form-control')\n    }\n\n    attachInputEvent() {\n      this.registerElement({ target: this.getInput(), event: 'keyup' })\n    }\n\n    detachInputEvent() {\n      this.unregisterElement({ target: this.getInput(), event: 'keyup' })\n    }\n\n    onElementEvent(event) {\n      if (event.target === this.getInput()) {\n        return\n      }\n\n      super.onElementEvent(event)\n    }\n\n    setInputValue(value = '') {\n      this.getInput().value = value\n    }\n\n    getInputValue() {\n      return this.getInput().value\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return new Prompt(options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = []\n  const dialogs = document.querySelectorAll(`.${Dialog.identifier()}`)\n\n  if (dialogs) {\n    Array.from(dialogs).forEach((element) => {\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES)\n      config.element = element\n\n      if (config.type === NAME) {\n        // prompt\n        components.push(new Prompt(config))\n      }\n    })\n  }\n\n  document.addEventListener('click', (event) => {\n    const dataToggleAttr = event.target.getAttribute('data-toggle')\n    if (dataToggleAttr && dataToggleAttr === NAME) {\n      const id = event.target.getAttribute('data-target')\n      const element = document.querySelector(id)\n\n      const component = components.find(c => c.element === element)\n\n      if (!component) {\n        return\n      }\n\n      // remove the focus state of the trigger\n      event.target.blur()\n\n      component.dialog.show()\n    }\n  })\n\n  return Prompt\n})()\n\nexport default Prompt\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Dialog from './index'\nimport { getAttributesConfig } from '../componentManager'\n\nconst Confirm = (() => {\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'confirm'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    title: null,\n    message: null,\n    cancelable: true,\n    type: NAME,\n    buttons: [\n      {\n        event: 'cancel',\n        text: 'Cancel',\n        dismiss: true,\n        class: 'btn btn-secondary',\n      },\n      {\n        event: 'confirm',\n        text: 'Ok',\n        dismiss: true,\n        class: 'btn btn-primary',\n      },\n    ],\n  }\n  const DATA_ATTRS_PROPERTIES = [\n    'cancelable',\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Confirm extends Dialog {\n\n    constructor(options = {}) {\n      const template = '' +\n      '<div class=\"dialog\" tabindex=\"-1\" role=\"dialog\">' +\n        '<div class=\"dialog-inner\" role=\"document\">' +\n          '<div class=\"dialog-content\">' +\n            '<div class=\"dialog-header\">' +\n              '<h5 class=\"dialog-title\"></h5>' +\n            '</div>' +\n            '<div class=\"dialog-body\">' +\n              '<p></p>' +\n            '</div>' +\n            '<div class=\"dialog-footer\">' +\n            '</div>' +\n          '</div>' +\n        '</div>' +\n      '</div>'\n\n      if (!Array.isArray(options.buttons)) {\n        options.buttons = DEFAULT_PROPERTIES.buttons\n      }\n\n      super(options, template)\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return new Confirm(options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = []\n  const dialogs = document.querySelectorAll(`.${Dialog.identifier()}`)\n\n  if (dialogs) {\n    Array.from(dialogs).forEach((element) => {\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES)\n      config.element = element\n\n      if (config.type === NAME) {\n        // confirm\n        components.push(new Confirm(config))\n      }\n    })\n  }\n\n  document.addEventListener('click', (event) => {\n    const dataToggleAttr = event.target.getAttribute('data-toggle')\n    if (dataToggleAttr && dataToggleAttr === NAME) {\n      const id = event.target.getAttribute('data-target')\n      const element = document.querySelector(id)\n\n      const component = components.find(c => c.element === element)\n\n      if (!component) {\n        return\n      }\n\n      // remove the focus state of the trigger\n      event.target.blur()\n\n      component.dialog.show()\n    }\n  })\n\n  return Confirm\n})()\n\nexport default Confirm\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Component from '../component'\nimport { createJqueryPlugin } from '../../common/utils'\n\nconst Loader = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'loader'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    color: null,\n    size: null,\n  }\n  const DATA_ATTRS_PROPERTIES = []\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Loader extends Component {\n\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, false, false)\n\n      // set color\n      const loaderSpinner = this.getSpinner()\n      if (typeof this.options.color === 'string'\n        && !loaderSpinner.classList.contains(`color-${this.options.color}`)) {\n        loaderSpinner.classList.add(`color-${this.options.color}`)\n      }\n\n      this.customSize = this.options.size !== null\n    }\n\n    getClientSize() {\n      if (!this.customSize) {\n        const size = this.options.element.getBoundingClientRect()\n        return size.height\n      }\n\n      return this.options.size\n    }\n\n    getSpinner() {\n      return this.options.element.querySelector('.loader-spinner')\n    }\n\n    show() {\n      if (this.options.element.classList.contains('hide')) {\n        this.options.element.classList.remove('hide')\n      }\n\n      const size = this.getClientSize()\n      this.options.size = size\n\n      if (this.customSize) {\n        this.options.element.style.width = `${this.options.size}px`\n        this.options.element.style.height = `${this.options.size}px`\n\n        const loaderSpinner = this.getSpinner()\n        loaderSpinner.style.width = `${this.options.size}px`\n        loaderSpinner.style.height = `${this.options.size}px`\n      }\n\n      return true\n    }\n\n    animate(startAnimation = true) {\n      if (startAnimation) {\n        this.show()\n      } else {\n        this.hide()\n      }\n\n      const loaderSpinner = this.getSpinner()\n\n      if (startAnimation &&\n        !loaderSpinner.classList.contains('loader-spinner-animated')) {\n        loaderSpinner.classList.add('loader-spinner-animated')\n        return true\n      }\n\n      if (!startAnimation &&\n        loaderSpinner.classList.contains('loader-spinner-animated')) {\n        loaderSpinner.classList.remove('loader-spinner-animated')\n      }\n\n      return true\n    }\n\n    hide() {\n      if (!this.options.element.classList.contains('hide')) {\n        this.options.element.classList.add('hide')\n      }\n\n      return true\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Loader, options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n  createJqueryPlugin($, NAME, Loader);\n\n  return Loader\n})(window.$ ? window.$ : null)\n\nexport default Loader\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Dialog from './index'\nimport Spinner from '../loader/index'\nimport { getAttributesConfig } from '../componentManager'\n\nconst Loader = (() => {\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'loader'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    title: null,\n    message: null,\n    cancelable: true,\n    type: NAME,\n    buttons: [],\n  }\n  const DATA_ATTRS_PROPERTIES = [\n    'cancelable',\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Loader extends Dialog {\n\n    constructor(options = {}) {\n      const template = '' +\n      '<div class=\"dialog\" tabindex=\"-1\" role=\"dialog\">' +\n        '<div class=\"dialog-inner\" role=\"document\">' +\n          '<div class=\"dialog-content\">' +\n            '<div class=\"dialog-header\">' +\n              '<h5 class=\"dialog-title\"></h5>' +\n            '</div>' +\n            '<div class=\"dialog-body\">' +\n              '<p></p>' +\n              '<div class=\"mx-auto text-center\">' +\n                '<div class=\"loader mx-auto d-block\">' +\n                  '<div class=\"loader-spinner\"></div>' +\n                '</div>' +\n              '</div>' +\n            '</div>' +\n            '<div class=\"dialog-footer\">' +\n            '</div>' +\n          '</div>' +\n        '</div>' +\n      '</div>'\n\n      if (!Array.isArray(options.buttons)) {\n        options.buttons = options.cancelable ? DEFAULT_PROPERTIES.buttons : []\n      }\n\n      super(options, template)\n\n      this.spinner = null\n    }\n\n    show() {\n      super.show()\n\n      this.spinner = new Spinner({element: this.getElement().querySelector('.loader')})\n      this.spinner.animate(true)\n    }\n\n    hide() {\n      super.hide()\n\n      this.spinner.animate(false)\n      this.spinner = null\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return new Loader(options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = []\n  const dialogs = document.querySelectorAll(`.${Dialog.identifier()}`)\n\n  if (dialogs) {\n    Array.from(dialogs).forEach((element) => {\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES)\n      config.element = element\n\n      if (config.type === NAME) {\n        // loader\n        components.push(new Loader(config))\n      }\n    })\n  }\n\n  document.addEventListener('click', (event) => {\n    const dataToggleAttr = event.target.getAttribute('data-toggle')\n    if (dataToggleAttr && dataToggleAttr === NAME) {\n      const id = event.target.getAttribute('data-target')\n      const element = document.querySelector(id)\n\n      const component = components.find(c => c.element === element)\n\n      if (!component) {\n        return\n      }\n\n      // remove the focus state of the trigger\n      event.target.blur()\n\n      component.dialog.show()\n    }\n  })\n\n  return Loader\n})()\n\nexport default Loader\n","/**\n* --------------------------------------------------------------------------\n* Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n* --------------------------------------------------------------------------\n*/\nimport Event from '../../common/events'\nimport Component from '../component'\nimport { createJqueryPlugin } from '../../common/utils';\n\nconst Notification = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n  * Constants\n  * ------------------------------------------------------------------------\n  */\n\n  const NAME = 'notification'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    message: '',\n    showButton: true,\n    timeout: null,\n    background: 'primary',\n  }\n  const DATA_ATTRS_PROPERTIES = [\n    'timeout',\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Notification extends Component {\n\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, true, false)\n\n      this.template = '' +\n      '<div class=\"notification\">' +\n        '<div class=\"notification-inner\">' +\n          '<div class=\"message\"></div>' +\n          '<button type=\"button\" class=\"close\" data-dismiss=\"notification\" aria-label=\"Close\">' +\n            '<span aria-hidden=\"true\">&times;</span>' +\n          '</button>' +\n        '</div>' +\n      '</div>'\n\n      if (this.dynamicElement) {\n        this.build()\n      }\n\n      this.timeoutCallback = null\n    }\n\n    build() {\n      const builder = document.createElement('div')\n\n      builder.innerHTML = this.template\n\n      this.options.element = builder.firstChild\n\n      // text message\n      this.options.element.querySelector('.message').innerHTML = this.options.message\n\n      if (!this.options.showButton) {\n        this.options.element.querySelector('button').style.display = 'none'\n      }\n\n      document.body.appendChild(this.options.element)\n\n      this.setAttributes()\n    }\n\n    show() {\n      if (this.options.element === null) {\n        // build and insert a new DOM element\n        this.build()\n      }\n\n      if (this.options.element.classList.contains('show')) {\n        return false\n      }\n\n      // reset color\n      if (this.options.background) {\n        this.options.element.removeAttribute('class')\n        this.options.element.setAttribute('class', 'notification')\n\n        this.options.element.classList.add(`bg-${this.options.background}`)\n        this.options.element.querySelector('button').classList.add(`btn-${this.options.background}`)\n      }\n\n      if (this.options.showButton) {\n        // attach the button handler\n        const buttonElement = this.options.element.querySelector('button')\n        this.registerElement({ target: buttonElement, event: 'click' })\n      }\n\n      setTimeout(() => {\n        this.options.element.classList.add('show')\n\n        // set position\n        const activeNotifications = document.querySelectorAll('.notification.show') || []\n        let pushDistance = 0\n        activeNotifications.forEach((notification) => {\n          if (this.options.element !== notification) {\n            const style = getComputedStyle(notification)\n            pushDistance += notification.offsetHeight + parseInt(style.marginBottom, 10)\n          }\n        })\n\n        this.options.element.style.transform = `translateY(${pushDistance}px)`\n\n        this.triggerEvent(Event.SHOW)\n\n        const onShown = () => {\n          this.triggerEvent(Event.SHOWN)\n          this.options.element.removeEventListener(Event.TRANSITION_END, onShown)\n        }\n\n        this.options.element.addEventListener(Event.TRANSITION_END, onShown)\n\n      }, 1)\n\n      if (Number.isInteger(this.options.timeout) && this.options.timeout > 0) {\n        // if there is a timeout, auto hide the notification\n        this.timeoutCallback = setTimeout(() => {\n          this.hide()\n        }, this.options.timeout + 1)\n      }\n\n      return true\n    }\n\n    hide() {\n      /*\n       * prevent to close a notification with a timeout\n       * if the user has already clicked on the button\n       */\n      if (this.timeoutCallback) {\n        clearTimeout(this.timeoutCallback)\n        this.timeoutCallback = null\n      }\n\n      if (!this.options.element.classList.contains('show')) {\n        return false\n      }\n\n      this.triggerEvent(Event.HIDE)\n\n      if (this.options.showButton) {\n        const buttonElement = this.options.element.querySelector('button')\n        this.unregisterElement({ target: buttonElement, event: 'click' })\n      }\n\n      this.options.element.classList.remove('show')\n      this.options.element.classList.add('hide')\n\n      const onHidden = () => {\n        this.options.element.removeEventListener(Event.TRANSITION_END, onHidden)\n        this.options.element.classList.remove('hide')\n\n        this.triggerEvent(Event.HIDDEN)\n\n        if (this.dynamicElement) {\n          document.body.removeChild(this.options.element)\n          this.options.element = null\n        }\n      }\n\n      this.options.element.addEventListener(Event.TRANSITION_END, onHidden)\n\n      return true\n    }\n\n    onElementEvent() {\n      this.hide()\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Notification, options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n  createJqueryPlugin($, NAME, Notification);\n\n\n  return Notification\n})(window.$ ? window.$ : null)\n\nexport default Notification\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Component from '../component'\nimport { getAttributesConfig } from '../componentManager'\nimport Event from '../../common/events'\nimport { findTargetByAttr } from '../../common/utils'\n\nconst Collapse = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'collapse'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    toggle: false,\n  }\n  const DATA_ATTRS_PROPERTIES = [\n    'toggle',\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Collapse extends Component {\n\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, false, false)\n\n      this.onTransition = false\n\n      // toggle directly\n      if (this.options.toggle) {\n        this.show()\n      }\n    }\n\n    getHeight() {\n      return this.options.element.getBoundingClientRect(this.options.element).height\n    }\n\n    toggle() {\n      if (this.options.element.classList.contains('show')) {\n        return this.hide()\n      }\n\n      return this.show()\n    }\n\n    show() {\n      if (this.onTransition) {\n        return false\n      }\n\n      if (this.options.element.classList.contains('show')) {\n        return false\n      }\n\n      this.onTransition = true\n\n      const onCollapsed = () => {\n        this.options.element.classList.add('show')\n        this.options.element.classList.remove('collapsing')\n        this.options.element.removeEventListener(Event.TRANSITION_END, onCollapsed)\n\n        this.options.element.setAttribute('aria-expanded', true)\n\n        this.onTransition = false\n      }\n\n      if (!this.options.element.classList.contains('collapsing')) {\n        this.options.element.classList.add('collapsing')\n      }\n\n      this.options.element.addEventListener(Event.TRANSITION_END, onCollapsed)\n\n      const height = this.getHeight()\n\n      this.options.element.style.height = '0px'\n\n      setTimeout(() => {\n        this.options.element.style.height = `${height}px`\n      }, 20)\n\n      return true\n    }\n\n    hide() {\n      if (this.onTransition) {\n        return false\n      }\n\n      if (!this.options.element.classList.contains('show')) {\n        return false\n      }\n\n      this.onTransition = true\n\n      const onCollapsed = () => {\n        this.options.element.classList.remove('collapsing')\n        this.options.element.style.height = 'auto'\n        this.options.element.removeEventListener(Event.TRANSITION_END, onCollapsed)\n\n        this.options.element.setAttribute('aria-expanded', false)\n\n        this.onTransition = false\n      }\n\n      this.options.element.style.height = '0px'\n\n      if (!this.options.element.classList.contains('collapsing')) {\n        this.options.element.classList.add('collapsing')\n      }\n\n      this.options.element.addEventListener(Event.TRANSITION_END, onCollapsed)\n\n      this.options.element.classList.remove('show')\n\n      return true\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Collapse, options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = []\n\n  const collapses = document.querySelectorAll(`.${NAME}`)\n  if (collapses) {\n    collapses.forEach((element) => {\n      // const config = {}\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES)\n      config.element = element\n\n      components.push(Collapse.DOMInterface(config))\n    })\n  }\n\n  document.addEventListener('click', (event) => {\n    const target = findTargetByAttr(event.target, 'data-toggle')\n    if (!target) {\n      return\n    }\n\n    const dataToggleAttr = target.getAttribute('data-toggle')\n\n    if (dataToggleAttr && dataToggleAttr === NAME) {\n      let id = target.getAttribute('data-target') || target.getAttribute('href')\n      id = id.replace('#', '')\n\n      const component = components.find(c => c.getElement().getAttribute('id') === id)\n\n      if (!component) {\n        return\n      }\n\n      component.toggle()\n    }\n  })\n\n  return Collapse\n})(window.$ ? window.$ : null)\n\nexport default Collapse\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Component from '../component'\nimport Collapse from '../collapse'\nimport { getAttributesConfig } from '../componentManager'\nimport { findTargetByClass, createJqueryPlugin } from '../../common/utils'\n\nconst Accordion = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'accordion'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n  }\n  const DATA_ATTRS_PROPERTIES = [\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Accordion extends Component {\n\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, false, false)\n\n      this.collapses = []\n\n      const toggles = this.options.element.querySelectorAll(`[data-toggle=\"${NAME}\"]`)\n      Array.from(toggles).forEach((toggle) => {\n        const collapseId = toggle.getAttribute('href')\n        const collapse = document.querySelector(collapseId)\n\n        if (collapse) {\n          this.addCollapse(collapse)\n        }\n      })\n    }\n\n    onElementEvent(event) {\n      const id = event.target.getAttribute('href')\n      const element = document.querySelector(id)\n\n      this.setCollapses(element)\n    }\n\n    addCollapse(element) {\n      const collapse = new Collapse({\n        element,\n      })\n      this.collapses.push(collapse)\n\n      return collapse\n    }\n\n    getCollapse(element) {\n      let collapse = this.collapses.find(c => c.options.element.getAttribute('id') === element.getAttribute('id'))\n\n      if (!collapse) {\n        // create a new collapse\n        collapse = this.addCollapse()\n      }\n\n      return collapse\n    }\n\n    getCollapses() {\n      return this.collapses\n    }\n\n    setCollapses(showCollapse) {\n      const collapse = this.getCollapse(showCollapse)\n      this.collapses.forEach((c) => {\n        if (c.options.element.getAttribute('id') !== showCollapse.getAttribute('id')) {\n          c.hide()\n        } else {\n          collapse.toggle()\n        }\n      })\n    }\n\n    show(collapseEl) {\n      let collapse = collapseEl\n      if (typeof collapseEl === 'string') {\n        collapse = document.querySelector(collapseEl)\n      }\n\n      if (!collapse) {\n        throw new Error(`${NAME}. The collapsible ${collapseEl} is an invalid HTMLElement.`)\n      }\n\n      this.setCollapses(collapse)\n\n      return true\n    }\n\n    hide(collapseEl) {\n      let collapse = collapseEl\n      if (typeof collapseEl === 'string') {\n        collapse = document.querySelector(collapseEl)\n      }\n\n      if (!collapse) {\n        throw new Error(`${NAME}. The collapsible ${collapseEl} is an invalid HTMLElement.`)\n      }\n\n      const collapseObj = this.getCollapse(collapse)\n      return collapseObj.hide()\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Accordion, options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n  createJqueryPlugin($, NAME, Accordion);\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = []\n\n  const accordions = document.querySelectorAll(`.${NAME}`)\n  if (accordions) {\n    Array.from(accordions).forEach((element) => {\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES)\n      config.element = element\n\n      components.push(Accordion.DOMInterface(config))\n    })\n  }\n\n  document.addEventListener('click', (event) => {\n    const dataToggleAttr = event.target.getAttribute('data-toggle')\n    if (dataToggleAttr && dataToggleAttr === NAME) {\n      const collapseId = event.target.getAttribute('data-target') || event.target.getAttribute('href')\n      const collapseEl = document.querySelector(collapseId)\n\n      const accordion = findTargetByClass(event.target, 'accordion')\n\n      if (accordion === null) {\n        return\n      }\n\n      const accordionId = accordion.getAttribute('id')\n      const component = components.find(c => c.getElement().getAttribute('id') === accordionId)\n\n      if (!component) {\n        return\n      }\n\n      // if the collapse has been added programmatically, we add it\n      const targetCollapse = component.getCollapses().find(c => c.getElement() === collapseEl)\n      if (!targetCollapse) {\n        component.addCollapse(collapseEl)\n      }\n\n      component.show(collapseId)\n    }\n  })\n\n  return Accordion\n})(window.$ ? window.$ : null)\n\nexport default Accordion\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Component from '../component'\nimport { getAttributesConfig } from '../componentManager'\nimport Event from '../../common/events'\nimport { findTargetByClass, createJqueryPlugin } from '../../common/utils'\n\nconst Tab = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'tab'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n\n  }\n  const DATA_ATTRS_PROPERTIES = [\n  ]\n  const TAB_CONTENT_SELECTOR = '.tab-pane'\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Tab extends Component {\n\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, false, false)\n    }\n\n    show() {\n      if (this.options.element.classList.contains('active')) {\n        return false\n      }\n\n      const id = this.options.element.getAttribute('href')\n      const nav = findTargetByClass(this.options.element, 'nav')\n      const navTabs = nav ? nav.querySelectorAll(`[data-toggle=\"${NAME}\"]`) : null\n\n      if (navTabs) {\n        Array.from(navTabs).forEach((tab) => {\n          if (tab.classList.contains('active')) {\n            tab.classList.remove('active')\n          }\n          tab.setAttribute('aria-selected', false)\n        })\n      }\n\n      this.options.element.classList.add('active')\n      this.options.element.setAttribute('aria-selected', true)\n\n      const tabContent = document.querySelector(id)\n      const tabContents = tabContent.parentNode.querySelectorAll(TAB_CONTENT_SELECTOR)\n\n      if (tabContents) {\n        Array.from(tabContents).forEach((tab) => {\n          if (tab.classList.contains('active')) {\n            tab.classList.remove('active')\n          }\n        })\n      }\n\n      tabContent.classList.add('showing')\n\n      setTimeout(() => {\n        const onShowed = () => {\n          tabContent.classList.remove('animate')\n          tabContent.classList.add('active')\n          tabContent.classList.remove('showing')\n          tabContent.removeEventListener(Event.TRANSITION_END, onShowed)\n        }\n\n        tabContent.addEventListener(Event.TRANSITION_END, onShowed)\n\n        tabContent.classList.add('animate')\n      }, 20)\n\n      return true\n    }\n\n    hide() {\n      if (!this.options.element.classList.contains('active')) {\n        return false\n      }\n\n      if (this.options.element.classList.contains('active')) {\n        this.options.element.classList.remove('active')\n      }\n\n      this.options.element.setAttribute('aria-selected', false)\n\n      const id = this.options.element.getAttribute('href')\n      const tabContent = document.querySelector(id)\n\n      if (tabContent.classList.contains('active')) {\n        tabContent.classList.remove('active')\n      }\n\n      return true\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Tab, options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n  createJqueryPlugin($, NAME, Tab);\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = []\n\n  const tabs = document.querySelectorAll(`[data-toggle=\"${NAME}\"]`)\n  if (tabs) {\n    Array.from(tabs).forEach((element) => {\n      // const config = {}\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES)\n      config.element = element\n\n      components.push(Tab.DOMInterface(config))\n    })\n  }\n\n  document.addEventListener('click', (event) => {\n    const dataToggleAttr = event.target.getAttribute('data-toggle')\n    if (dataToggleAttr && dataToggleAttr === NAME) {\n      const id = event.target.getAttribute('href')\n\n      const component = components.find(c => c.getElement().getAttribute('href') === id)\n\n      if (!component) {\n        return\n      }\n\n      component.show()\n    }\n  })\n\n  return Tab\n})(window.$ ? window.$ : null)\n\nexport default Tab\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Component from '../component'\nimport Event from '../../common/events'\nimport { createJqueryPlugin } from '../../common/utils'\n\nconst Progress = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'progress'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    height: 5,\n    min: 0,\n    max: 100,\n    label: false,\n    striped: false,\n    background: null,\n  }\n  const DATA_ATTRS_PROPERTIES = [\n    'height',\n    'min',\n    'max',\n    'label',\n    'striped',\n    'background',\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Progress extends Component {\n\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, false, false)\n\n      // set the wanted height\n      this.options.element.style.height = `${this.options.height}px`\n\n      // set min and max values\n      const progressBar = this.getProgressBar()\n      progressBar.setAttribute('aria-valuemin', `${this.options.min}`)\n      progressBar.setAttribute('aria-valuemax', `${this.options.max}`)\n\n      // set striped\n      if (this.options.striped\n        && !progressBar.classList.contains('progress-bar-striped')) {\n        progressBar.classList.add('progress-bar-striped')\n      }\n\n      // set background\n      if (typeof this.options.background === 'string'\n        && !progressBar.classList.contains(`bg-${this.options.background}`)) {\n        progressBar.classList.add(`bg-${this.options.background}`)\n      }\n    }\n\n    getProgressBar() {\n      return this.options.element.querySelector('.progress-bar')\n    }\n\n    set(value = 0) {\n      const progressBar = this.getProgressBar()\n      const progress = Math.round((value / (this.options.min + this.options.max)) * 100)\n\n      if (value < this.options.min) {\n        console.error(`${NAME}. Warning, ${value} is under min value.`)\n        return false\n      }\n\n      if (value > this.options.max) {\n        console.error(`${NAME}. Warning, ${value} is above max value.`)\n        return false\n      }\n\n      progressBar.setAttribute('aria-valuenow', `${value}`)\n\n      // set label\n      if (this.options.label) {\n        progressBar.innerHTML = `${progress}%`\n      }\n\n      // set percentage\n      progressBar.style.width = `${progress}%`\n\n      return true\n    }\n\n    animate(startAnimation = true) {\n      if (!this.options.striped) {\n        console.error(`${NAME}. Animation works only with striped progress.`)\n        return false\n      }\n\n      const progressBar = this.getProgressBar()\n\n      if (startAnimation\n        && !progressBar.classList.contains('progress-bar-animated')) {\n        progressBar.classList.add('progress-bar-animated')\n      }\n\n      if (!startAnimation\n        && progressBar.classList.contains('progress-bar-animated')) {\n        progressBar.classList.remove('progress-bar-animated')\n      }\n\n      return true\n    }\n\n    show() {\n      this.options.element.style.height = `${this.options.height}px`\n      this.triggerEvent(Event.SHOW)\n      this.triggerEvent(Event.SHOWN)\n\n      return true\n    }\n\n    hide() {\n      this.options.element.style.height = '0px'\n      this.triggerEvent(Event.HIDE)\n      this.triggerEvent(Event.HIDDEN)\n\n      return true\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Progress, options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n  createJqueryPlugin($, NAME, Progress);\n\n  return Progress\n})(window.$ ? window.$ : null)\n\nexport default Progress\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Event from '../../common/events'\nimport Component from '../component'\nimport { getAttributesConfig } from '../componentManager'\nimport { findTargetByAttr, createJqueryPlugin } from '../../common/utils'\n\nconst OffCanvas = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'offCanvas'\n  const VERSION = '2.0.0'\n  const BACKDROP_SELECTOR = 'off-canvas-backdrop'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    aside: {\n      md: false,\n      lg: false,\n      xl: false,\n    },\n  }\n  const DATA_ATTRS_PROPERTIES = [\n    'aside',\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class OffCanvas extends Component {\n\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, false, true)\n\n      this.useBackdrop = true\n      this.currentWidth = null\n      this.animate = true\n\n      this.directions = ['left', 'right']\n\n      const sm = { name: 'sm', media: window.matchMedia('(min-width: 1px)') }\n      const md = { name: 'md', media: window.matchMedia('(min-width: 768px)') }\n      const lg = { name: 'lg', media: window.matchMedia('(min-width: 992px)') }\n      const xl = { name: 'xl', media: window.matchMedia('(min-width: 1200px)') }\n\n      this.sizes = [sm, md, lg, xl].reverse()\n\n      this.checkDirection()\n      this.checkWidth()\n\n      window.addEventListener('resize', () => this.checkWidth(), false)\n    }\n\n    checkDirection() {\n      this.directions.every((direction) => {\n        if (this.options.element.classList.contains(`off-canvas-${direction}`)) {\n          this.direction = direction\n          return false\n        }\n        return true\n      })\n    }\n\n    checkWidth() {\n      if (!('matchMedia' in window)) {\n        return\n      }\n\n      this.sizes.every((size) => {\n        const match = size.media.media.match(/[a-z]?-width:\\s?([0-9]+)/)\n\n        if (match) {\n          if (size.media.matches) {\n            if (this.currentWidth !== size.name) {\n              this.setAside(size.name)\n            }\n            this.currentWidth = size.name\n            return false\n          }\n        }\n\n        return true\n      })\n    }\n\n    preventClosable() {\n      return super.preventClosable() || this.options.aside[this.currentWidth] === true\n    }\n\n    setAside(name) {\n      const content = document.body\n\n      if (this.options.aside[name] === true) {\n        if (!content.classList.contains(`off-canvas-aside-${this.direction}`)) {\n          content.classList.add(`off-canvas-aside-${this.direction}`)\n        }\n\n        this.useBackdrop = false\n\n        // avoid animation by setting animate to false\n        this.animate = false\n        this.show()\n        // remove previous backdrop\n        this.removeBackdrop()\n      } else {\n        if (content.classList.contains(`off-canvas-aside-${this.direction}`)) {\n          content.classList.remove(`off-canvas-aside-${this.direction}`)\n        }\n\n        this.hide()\n        this.useBackdrop = true\n        this.animate = true\n      }\n    }\n\n    onElementEvent(event) {\n      if (event.type === 'keyup' && event.keyCode !== 27 && event.keyCode !== 13) {\n        return\n      }\n\n      // hide the off-canvas\n      this.hide()\n    }\n\n    show() {\n      if (this.options.element.classList.contains('show')) {\n        return false\n      }\n\n      // add a timeout so that the CSS animation works\n      setTimeout(() => {\n        this.triggerEvent(Event.SHOW)\n\n        const onShown = () => {\n          this.triggerEvent(Event.SHOWN)\n\n          if (this.animate) {\n            this.options.element.removeEventListener(Event.TRANSITION_END, onShown)\n            this.options.element.classList.remove('animate')\n          }\n        }\n\n        if (this.useBackdrop) {\n          this.createBackdrop()\n        }\n\n\n        if (this.animate) {\n          this.options.element.addEventListener(Event.TRANSITION_END, onShown)\n          this.options.element.classList.add('animate')\n        } else {\n          // directly trigger the onShown\n          onShown()\n        }\n\n        this.options.element.classList.add('show')\n\n        // attach event\n        this.attachEvents()\n      }, 1)\n\n      return true\n    }\n\n    hide() {\n      if (!this.options.element.classList.contains('show')) {\n        return false\n      }\n\n      this.triggerEvent(Event.HIDE)\n\n      this.detachEvents()\n\n      if (this.animate) {\n        this.options.element.classList.add('animate')\n      }\n\n      this.options.element.classList.remove('show')\n\n      if (this.useBackdrop) {\n        const backdrop = this.getBackdrop()\n\n        const onHidden = () => {\n          if (this.animate) {\n            this.options.element.classList.remove('animate')\n          }\n\n          backdrop.removeEventListener(Event.TRANSITION_END, onHidden)\n          this.triggerEvent(Event.HIDDEN)\n          this.removeBackdrop()\n        }\n\n        backdrop.addEventListener(Event.TRANSITION_END, onHidden)\n        backdrop.classList.add('fadeout')\n      }\n\n      return true\n    }\n\n    createBackdrop() {\n      const backdrop = document.createElement('div')\n      backdrop.setAttribute('data-id', this.id)\n      backdrop.classList.add(BACKDROP_SELECTOR)\n\n      document.body.appendChild(backdrop)\n    }\n\n    getBackdrop() {\n      return document.querySelector(`.${BACKDROP_SELECTOR}[data-id=\"${this.id}\"]`)\n    }\n\n    removeBackdrop() {\n      const backdrop = this.getBackdrop()\n      if (backdrop) {\n        document.body.removeChild(backdrop)\n      }\n    }\n\n    attachEvents() {\n      const dismissButtons = this.options.element.querySelectorAll('[data-dismiss]')\n\n      if (dismissButtons) {\n        Array.from(dismissButtons).forEach(button => this.registerElement({ target: button, event: 'click' }))\n      }\n\n      if (this.useBackdrop) {\n        const backdrop = this.getBackdrop()\n        this.registerElement({ target: backdrop, event: Event.START })\n      }\n\n      this.registerElement({ target: document, event: 'keyup' })\n    }\n\n    detachEvents() {\n      const dismissButtons = this.options.element.querySelectorAll('[data-dismiss]')\n\n      if (dismissButtons) {\n        Array.from(dismissButtons).forEach(button => this.unregisterElement({ target: button, event: 'click' }))\n      }\n\n      if (this.useBackdrop) {\n        const backdrop = this.getBackdrop()\n        this.unregisterElement({ target: backdrop, event: Event.START })\n      }\n\n      this.unregisterElement({ target: document, event: 'keyup' })\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(OffCanvas, options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n  createJqueryPlugin($, NAME, OffCanvas);\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = []\n\n  const offCanvas = document.querySelectorAll(`.${NAME}`)\n  if (offCanvas) {\n    Array.from(offCanvas).forEach((element) => {\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES)\n      config.element = element\n\n      components.push({ element, offCanvas: new OffCanvas(config) })\n    })\n  }\n\n  document.addEventListener('click', (event) => {\n    const target = findTargetByAttr(event.target, 'data-toggle')\n    if (!target) {\n      return\n    }\n\n    const dataToggleAttr = target.getAttribute('data-toggle')\n    if (dataToggleAttr && dataToggleAttr === NAME) {\n      const id = target.getAttribute('data-target')\n      const element = document.querySelector(id)\n\n      const component = components.find(c => c.element === element)\n\n      if (!component) {\n        return\n      }\n\n      target.blur()\n\n      component.offCanvas.show()\n    }\n  })\n\n  return OffCanvas\n})(window.$ ? window.$ : null)\n\nexport default OffCanvas\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Component from '../component'\nimport Event from '../../common/events'\nimport { findTargetByClass } from '../../common/utils'\nimport { getAttributesConfig } from '../componentManager'\n\nconst Dropdown = (() => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'dropdown'\n  const VERSION = '2.0.0'\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    default: true,\n    search: false,\n  }\n  const DATA_ATTRS_PROPERTIES = [\n    'default',\n    'search',\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Dropdown extends Component {\n\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, false, false)\n\n      const selected = this.options.element.querySelector('[data-selected]')\n      const item = this.getItemData(selected)\n\n      this.setSelected(item.value, item.text, false)\n    }\n\n    setSelected(value = '', text = null, checkExists = true) {\n      if (!this.options.default) {\n        return false\n      }\n\n      let textDisplay = text\n      this.options.element.querySelector('.default-text').innerHTML = text\n      this.options.element.querySelector('input[type=\"hidden\"]').value = value\n\n      const items = this.options.element.querySelectorAll('.item') || []\n      let itemFound = false\n\n      Array.from(items).forEach((item) => {\n        if (item.classList.contains('selected')) {\n          item.classList.remove('selected')\n        }\n\n        const data = this.getItemData(item)\n\n        if (value === data.value) {\n          if (!item.classList.contains('selected')) {\n            item.classList.add('selected')\n          }\n\n          textDisplay = data.text\n          itemFound = true\n        }\n      })\n\n      if (checkExists && itemFound) {\n        this.options.element.querySelector('.default-text').innerHTML = textDisplay\n      } else if (checkExists && !itemFound) {\n        throw new Error(`${NAME}. The value \"${value}\" does not exist in the list of items.`)\n      }\n\n      return true\n    }\n\n    getSelected() {\n      return this.options.element.querySelector('input[type=\"hidden\"]').value\n    }\n\n    getItemData(item = null) {\n      let text = ''\n      let value = ''\n\n      if (item) {\n        text = item.getAttribute('data-text') || item.innerHTML\n\n        const selectedTextNode = item.querySelector('.text')\n        if (selectedTextNode) {\n          text = selectedTextNode.innerHTML\n        }\n\n        value = item.getAttribute('data-value') || ''\n      }\n\n      return { text, value }\n    }\n\n    onElementEvent(event) {\n      if (event.type === Event.START) {\n        const dropdown = findTargetByClass(event.target, 'dropdown')\n\n        /*\n         * hide the current dropdown only if the event concerns another dropdown\n         * hide also if the user clicks outside a dropdown\n         */\n        if (!dropdown || dropdown !== this.getElement()) {\n          this.hide()\n        }\n      } else if (event.type === 'click') {\n        const item = findTargetByClass(event.target, 'item')\n\n        if (item) {\n          if (item.classList.contains('disabled')) {\n            return\n          }\n\n          const itemInfo = this.getItemData(item)\n\n          if (this.getSelected() !== itemInfo.value) {\n            // the user selected another value, we dispatch the event\n            this.setSelected(itemInfo.value, itemInfo.text, false)\n            const detail = { item, text: itemInfo.text, value: itemInfo.value }\n            this.triggerEvent(Event.ITEM_SELECTED, detail)\n          }\n\n          this.hide()\n          return\n        }\n\n        // don't toggle the dropdown if the event concerns headers, dividers\n        const dropdownMenu = findTargetByClass(event.target, 'dropdown-menu')\n        if (dropdownMenu) {\n          return\n        }\n\n        this.toggle()\n      }\n    }\n\n    toggle() {\n      if (this.options.element.classList.contains('active')) {\n        return this.hide()\n      }\n\n      return this.show()\n    }\n\n    show() {\n      if (this.options.element.classList.contains('active')) {\n        return false\n      }\n\n      this.options.element.classList.add('active')\n\n      const dropdownMenu = this.options.element.querySelector('.dropdown-menu')\n\n      // scroll to top\n      dropdownMenu.scrollTop = 0\n\n      this.triggerEvent(Event.SHOW)\n      this.triggerEvent(Event.SHOWN)\n\n      this.registerElement({ target: dropdownMenu, event: 'click' })\n      this.registerElement({ target: document.body, event: Event.START })\n\n      return true\n    }\n\n    hide() {\n      if (!this.options.element.classList.contains('active')) {\n        return false\n      }\n\n      this.options.element.classList.remove('active')\n\n      this.triggerEvent(Event.HIDE)\n      this.triggerEvent(Event.HIDDEN)\n\n      this.unregisterElement({ target: this.options.element.querySelector('.dropdown-menu'), event: 'click' })\n      this.unregisterElement({ target: document.body, event: Event.START })\n\n      return true\n    }\n\n    static identifier() {\n      return NAME\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Dropdown, options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = []\n\n  const dropdowns = document.querySelectorAll(`.${NAME}`)\n  if (dropdowns) {\n    Array.from(dropdowns).forEach((element) => {\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES)\n      config.element = element\n\n      if (!config.search) {\n        components.push(new Dropdown(config))\n      }\n    })\n  }\n\n  document.addEventListener('click', (event) => {\n    const dropdownMenu = findTargetByClass(event.target, 'dropdown-menu')\n    if (dropdownMenu) {\n      return\n    }\n\n    const dropdown = findTargetByClass(event.target, 'dropdown')\n\n    if (dropdown) {\n      const dataToggleAttr = dropdown.getAttribute('data-toggle')\n      if (dataToggleAttr && dataToggleAttr === NAME && dropdown) {\n        const component = components.find(c => c.getElement() === dropdown)\n\n        if (!component) {\n          return\n        }\n\n        component.toggle()\n      }\n    }\n  })\n\n  return Dropdown\n})()\n\nexport default Dropdown\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Dropdown from './index'\nimport { findTargetByClass } from '../../common/utils'\nimport { getAttributesConfig } from '../componentManager'\n\nconst DropdownSearch = (() => {\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = Dropdown.identifier()\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    default: true,\n    search: true,\n  }\n  const DATA_ATTRS_PROPERTIES = [\n    'default',\n    'search',\n  ]\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class DropdownSearch extends Dropdown {\n\n    constructor(options = {}) {\n      super(options)\n\n      this.filterItemsHandler = (event) => {\n        const search = event.target.value\n\n        if (search === '') {\n          this.showItems()\n          return\n        }\n\n\n        this.getItems().forEach((item) => {\n          const fn = typeof this.options.filterItem === 'function' ? this.options.filterItem : this.filterItem\n\n          if (fn(search, item)) {\n            item.element.style.display = 'block'\n          } else {\n            item.element.style.display = 'none'\n          }\n        })\n      }\n\n      this.getSearchInput().addEventListener('keyup', this.filterItemsHandler)\n    }\n\n    filterItem(search = '', item = {}) {\n      if (item.value.indexOf(search) > -1\n        || item.text.indexOf(search) > -1) {\n        return true\n      }\n\n      return false\n    }\n\n    getItems() {\n      let items = Array.from(this.options.element.querySelectorAll('.item') || [])\n      items = items.map((item) => {\n        const info = this.getItemData(item)\n        return { text: info.text, value: info.value, element: item }\n      })\n\n      return items\n    }\n\n    showItems() {\n      this.getItems().forEach((item) => {\n        const i = item\n        i.element.style.display = 'block'\n      })\n    }\n\n    getSearchInput() {\n      return this.options.element.querySelector('.dropdown-menu input')\n    }\n\n    hide() {\n      if (super.hide()) {\n        // reset the value\n        this.getSearchInput().value = ''\n        // show all items\n        this.showItems()\n      }\n    }\n\n    static DOMInterface(options) {\n      return new DropdownSearch(options)\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = []\n  const dropdowns = document.querySelectorAll(`.${NAME}`)\n\n  if (dropdowns) {\n    Array.from(dropdowns).forEach((element) => {\n      const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES)\n      config.element = element\n\n      if (config.search) {\n        // search\n        components.push(new DropdownSearch(config))\n      }\n    })\n  }\n\n  if (dropdowns) {\n    document.addEventListener('click', (event) => {\n      const dropdownMenu = findTargetByClass(event.target, 'dropdown-menu')\n      if (dropdownMenu) {\n        return\n      }\n\n      const dropdown = findTargetByClass(event.target, 'dropdown')\n\n      if (dropdown) {\n        const dataToggleAttr = dropdown.getAttribute('data-toggle')\n        if (dataToggleAttr && dataToggleAttr === NAME && dropdown) {\n          const component = components.find(c => c.getElement() === dropdown)\n\n          if (!component) {\n            return\n          }\n\n          component.toggle()\n        }\n      }\n    })\n  }\n\n  return DropdownSearch\n})()\n\nexport default DropdownSearch\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Pager from './hybrid-apps/pager/index'\nimport I18n from './hybrid-apps/i18n'\nimport Network from './common/network'\n\n// components\nimport Alert from './components/alert'\nimport Dialog from './components/dialog'\nimport Prompt from './components/dialog/prompt'\nimport Confirm from './components/dialog/confirm'\nimport DialogLoader from './components/dialog/loader'\nimport Notification from './components/notification'\nimport Collapse from './components/collapse'\nimport Accordion from './components/accordion'\nimport Tab from './components/tab'\nimport Progress from './components/progress'\nimport Loader from './components/loader'\nimport OffCanvas from './components/off-canvas'\nimport Dropdown from './components/dropdown'\nimport DropdownSearch from './components/dropdown/search'\n\nconst api = {}\n\n/**\n * ------------------------------------------------------------------------\n * Pager\n * ------------------------------------------------------------------------\n */\napi.pager = (options) => {\n  if (typeof api._pager === 'undefined') {\n    api._pager = Pager.DOMInterface(options)\n  }\n  return api._pager\n}\n\n/**\n * ------------------------------------------------------------------------\n * i18n\n * ------------------------------------------------------------------------\n */\napi.i18n = I18n.DOMInterface\n\n/**\n * ------------------------------------------------------------------------\n * Network\n * ------------------------------------------------------------------------\n */\napi.network = Network.DOMInterface\n\n/**\n * ------------------------------------------------------------------------\n * Notification\n * ------------------------------------------------------------------------\n */\napi.notification = Notification.DOMInterface\n\n/**\n * ------------------------------------------------------------------------\n * Dialog\n * ------------------------------------------------------------------------\n */\n\n// generic\napi.dialog = Dialog.DOMInterface\n\n// prompt dialog\napi.prompt = Prompt.DOMInterface\n// confirm dialog\napi.confirm = Confirm.DOMInterface\n// loader dialog\napi.dialogLoader = DialogLoader.DOMInterface\n\n/**\n * ------------------------------------------------------------------------\n * Collapse\n * ------------------------------------------------------------------------\n */\napi.collapse = Collapse.DOMInterface\n\n/**\n * ------------------------------------------------------------------------\n * Collapse\n * ------------------------------------------------------------------------\n */\napi.alert = Alert.DOMInterface\n\n/**\n * ------------------------------------------------------------------------\n * Accordion\n * ------------------------------------------------------------------------\n */\napi.accordion = Accordion.DOMInterface\n\n\n/**\n * ------------------------------------------------------------------------\n * Tab\n * ------------------------------------------------------------------------\n */\napi.tab = Tab.DOMInterface\n\n/**\n * ------------------------------------------------------------------------\n * Progress\n * ------------------------------------------------------------------------\n */\napi.progress = Progress.DOMInterface\n\n/**\n * ------------------------------------------------------------------------\n * Loader\n * ------------------------------------------------------------------------\n */\napi.loader = Loader.DOMInterface\n\n/**\n * ------------------------------------------------------------------------\n * Off canvas\n * ------------------------------------------------------------------------\n */\napi.offCanvas = OffCanvas.DOMInterface\n\n/**\n * ------------------------------------------------------------------------\n * Dropdown\n * ------------------------------------------------------------------------\n */\napi.dropdown = (options) => {\n  if (options.search) {\n    // search dropdown\n    return DropdownSearch.DOMInterface(options)\n  }\n\n  // generic dropdown\n  return Dropdown.DOMInterface(options)\n}\n\n// Make the API live\nwindow.phonon = api\n\nexport default api\n"],"names":["dispatchWinDocEvent","eventName","moduleName","detail","fullEventName","window","dispatchEvent","CustomEvent","document","dispatchElementEvent","domElement","dispatchPageEvent","pageName","Page","NAME","VERSION","TEMPLATE_SELECTOR","constructor","name","events","templatePath","renderFunction","version","getEvents","getTemplate","template","getRenderFunction","renderTemplate","pageElement","querySelector","render","DOMPage","elements","Array","from","forEach","el","innerHTML","querySelectorAll","addEventCallback","callbackFn","push","setTemplate","Error","setPreventTransition","fn","preventTransitionFn","getPreventTransition","triggerScopes","eventParams","eventNameAlias","charAt","toUpperCase","slice","scope","scopeEvent","scopeEventAlias","apply","addEventListener","console","error","availableEvents","touchScreen","DocumentTouch","navigator","pointerEnabled","msPointerEnabled","createElement","transitions","start","end","animations","transitionStart","find","t","style","undefined","transitionEnd","animationStart","animationEnd","TOUCH_SCREEN","NETWORK_ONLINE","NETWORK_OFFLINE","NETWORK_RECONNECTING","NETWORK_RECONNECTING_SUCCESS","NETWORK_RECONNECTING_FAILURE","SHOW","SHOWN","HIDE","HIDDEN","HASH","START","MOVE","END","CANCEL","CLICK","TRANSITION_START","TRANSITION_END","ANIMATION_START","ANIMATION_END","ITEM_SELECTED","Pager","DEFAULT_PROPERTIES","hashPrefix","useHash","defaultPage","animatePages","currentPage","options","Object","assign","pages","started","addPagerEvents","onDOMLoaded","_","selector","getHash","location","hash","split","getPageFromHash","re","RegExp","matches","exec","setHash","isPageOf","pageName1","pageName2","page1","getPageModel","page2","event","onClick","onBackHistory","onHashChange","showPage","back","params","Event","oldPage","oldPageName","getAttribute","oldPageModel","preventFn","history","classList","remove","replaceState","page","triggerPageEvent","newPage","add","pageModel","previousPageName","onPageAnimationEnd","contains","removeEventListener","addUniquePageModel","getPagesModel","pageNames","filter","indexOf","selectorToArray","str","map","item","trim","addEvents","callback","cachePageSelector","pageModels","preventTransition","target","pushPage","state","p","length","shift","navPage","nodeName","select","addPageModel","forceDefaultPage","cordova","DOMInterface","Binder","element","data","isElement","log","setNodes","setNode","Node","NodeList","setText","text","innerText","textContent","setHtml","setAttribute","attr","r","m","key","value","replace","i18nValue","methodName","I18n","fallbackLocale","locale","bind","setLocale","getLocale","getFallbackLocale","updateHtml","getLanguages","keys","insertValues","injectableValues","match","translate","keyName","inject","isArray","filteredData","dataMap","generateId","Math","random","toString","substr","findTargetByClass","parentClass","parentNode","findTargetByAttr","createJqueryPlugin","$","obj","mainFn","opts","Constructor","noConflict","first","second","setAttributesConfig","attrs","keyStart","getAttributesConfig","newObj","type","attrValue","isNaN","parseInt","stack","component","index","findIndex","c","is","splice","closable","Component","defaultOptions","optionAttrs","supportDynamicElement","addToStack","prop","id","checkElement","dynamicElement","registeredElements","assignJsConfig","getAttributes","setAttributes","elementListener","onBeforeElementEvent","attrConfig","jsConfig","config","getVersion","getElement","getId","registerElements","registerElement","unregisterElements","unregisterElement","registeredElementIndex","triggerEvent","objectEventOnly","ComponentManager","eventNameObject","reduce","acc","current","preventClosable","onElementEvent","identifier","ComponentClass","Network","initialDelay","delay","DATA_ATTRS_PROPERTIES","xhr","checkInterval","setStatus","setTimeout","startCheck","getStatus","status","startRequest","XMLHttpRequest","offline","url","Date","getTime","date","open","timeout","ontimeout","abort","onload","onUp","onerror","onDown","send","e","stopCheck","setInterval","clearInterval","Alert","fade","onTransition","show","getOpacity","onShow","getComputedStyle","opacity","parseFloat","hide","onHide","components","alerts","dataToggleAttr","alert","Dialog","BACKDROP_SELECTOR","title","message","cancelable","cancelableKeyCodes","buttons","dismiss","class","build","builder","firstChild","removeTextBody","button","appendChild","buildButton","removeFooter","body","buttonInfo","buildBackdrop","backdrop","getBackdrop","removeChild","footer","center","computedStyle","height","top","innerHeight","attachEvents","onShown","k","keyCode","detachEvents","onHidden","dialogs","dialog","blur","Prompt","attachInputEvent","detachInputEvent","getInput","setInputValue","getInputValue","Confirm","Loader","color","size","loaderSpinner","getSpinner","customSize","getClientSize","getBoundingClientRect","width","animate","startAnimation","spinner","Spinner","Notification","showButton","background","timeoutCallback","display","removeAttribute","buttonElement","activeNotifications","pushDistance","notification","offsetHeight","marginBottom","transform","Number","isInteger","clearTimeout","Collapse","toggle","getHeight","onCollapsed","collapses","Accordion","toggles","collapseId","collapse","addCollapse","setCollapses","getCollapse","getCollapses","showCollapse","collapseEl","collapseObj","accordions","accordion","accordionId","targetCollapse","Tab","TAB_CONTENT_SELECTOR","nav","navTabs","tab","tabContent","tabContents","onShowed","tabs","Progress","min","max","label","striped","progressBar","getProgressBar","set","progress","round","OffCanvas","aside","md","lg","xl","useBackdrop","currentWidth","directions","sm","media","matchMedia","sizes","reverse","checkDirection","checkWidth","every","direction","setAside","content","removeBackdrop","createBackdrop","dismissButtons","offCanvas","Dropdown","default","search","selected","getItemData","setSelected","checkExists","textDisplay","items","itemFound","getSelected","selectedTextNode","dropdown","itemInfo","dropdownMenu","scrollTop","dropdowns","DropdownSearch","filterItemsHandler","showItems","getItems","filterItem","getSearchInput","info","i","api","pager","_pager","i18n","network","prompt","confirm","dialogLoader","DialogLoader","loader","phonon"],"mappings":";;;;;;;;;;;EAAO,SAASA,mBAAT,CAA6BC,SAA7B,EAAwCC,UAAxC,EAAoDC,MAAM,GAAG,EAA7D,EAAiE;EACtE,QAAMC,aAAa,GAAI,GAAEH,SAAU,OAAMC,UAAW,EAApD;EACAG,EAAAA,MAAM,CAACC,aAAP,CAAqB,IAAIC,WAAJ,CAAgBH,aAAhB,EAA+B;EAAED,IAAAA;EAAF,GAA/B,CAArB;EACAK,EAAAA,QAAQ,CAACF,aAAT,CAAuB,IAAIC,WAAJ,CAAgBH,aAAhB,EAA+B;EAAED,IAAAA;EAAF,GAA/B,CAAvB;EACD;AAED,EAAO,SAASM,oBAAT,CAA8BC,UAA9B,EAA0CT,SAA1C,EAAqDC,UAArD,EAAiEC,MAAM,GAAG,EAA1E,EAA8E;EACnF,QAAMC,aAAa,GAAI,GAAEH,SAAU,OAAMC,UAAW,EAApD;EACAQ,EAAAA,UAAU,CAACJ,aAAX,CAAyB,IAAIC,WAAJ,CAAgBH,aAAhB,EAA+B;EAAED,IAAAA;EAAF,GAA/B,CAAzB;EACD;AAED,EAAO,SAASQ,iBAAT,CAA2BV,SAA3B,EAAsCW,QAAtC,EAAgDT,MAAM,GAAG,EAAzD,EAA6D;EAClE,QAAMC,aAAa,GAAI,GAAEQ,QAAS,IAAGX,SAAU,EAA/C;EACAI,EAAAA,MAAM,CAACC,aAAP,CAAqB,IAAIC,WAAJ,CAAgBH,aAAhB,EAA+B;EAAED,IAAAA;EAAF,GAA/B,CAArB;EACAK,EAAAA,QAAQ,CAACF,aAAT,CAAuB,IAAIC,WAAJ,CAAgBH,aAAhB,EAA+B;EAAED,IAAAA;EAAF,GAA/B,CAAvB;EACD;;ECfD;;;;;AAMA;EAEA,MAAMU,IAAI,GAAG,CAAC,MAAM;EAClB;;;;;EAMA,QAAMC,IAAI,GAAG,MAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EAEA,QAAMC,iBAAiB,GAAG,iBAA1B;EAEA;;;;;;EAMA,QAAMH,IAAN,CAAW;EACT;;;;EAIAI,IAAAA,WAAW,CAACL,QAAD,EAAW;EACpB,WAAKM,IAAL,GAAYN,QAAZ;EACA,WAAKO,MAAL,GAAc,EAAd;EACA,WAAKC,YAAL,GAAoB,IAApB;EACA,WAAKC,cAAL,GAAsB,IAAtB;EACD,KAVQ;;;EAcT,eAAWC,OAAX,GAAqB;EACnB,aAAQ,GAAER,IAAK,IAAGC,OAAQ,EAA1B;EACD;EAED;;;;;;EAIAQ,IAAAA,SAAS,GAAG;EACV,aAAO,KAAKJ,MAAZ;EACD;EAED;;;;;;EAIAK,IAAAA,WAAW,GAAG;EACZ,aAAO,KAAKC,QAAZ;EACD;EAED;;;;;;EAIAC,IAAAA,iBAAiB,GAAG;EAClB,aAAO,KAAKL,cAAZ;EACD;;EAED,UAAMM,cAAN,GAAuB;EACrB,YAAMC,WAAW,GAAGpB,QAAQ,CAACqB,aAAT,CAAwB,eAAc,KAAKX,IAAK,IAAhD,CAApB;;EAEA,UAAIY,MAAM,GAAG,sBAAgBC,OAAhB,EAAyBN,QAAzB,EAAmCO,QAAnC,EAA6C;EACxD,YAAIA,QAAJ,EAAc;EACZC,UAAAA,KAAK,CAACC,IAAN,CAAWF,QAAX,EAAqBG,OAArB,CAA8BC,EAAD,IAAQ;EACnCA,YAAAA,EAAE,CAACC,SAAH,GAAeZ,QAAf;EACD,WAFD;EAGD,SAJD,MAIO;EACLM,UAAAA,OAAO,CAACM,SAAR,GAAoBZ,QAApB;EACD;EACF,OARD;;EAUA,UAAI,KAAKC,iBAAL,EAAJ,EAA8B;EAC5BI,QAAAA,MAAM,GAAG,KAAKJ,iBAAL,EAAT;EACD;;EAED,YAAMI,MAAM,CAACF,WAAD,EAAc,KAAKJ,WAAL,EAAd,EAAkCI,WAAW,CAACU,gBAAZ,CAA6BtB,iBAA7B,CAAlC,CAAZ;EACD,KA5DQ;;EAgET;;;;;;EAIAuB,IAAAA,gBAAgB,CAACC,UAAD,EAAa;EAC3B,WAAKrB,MAAL,CAAYsB,IAAZ,CAAiBD,UAAjB;EACD;EAED;;;;;;;;EAMAE,IAAAA,WAAW,CAACjB,QAAQ,GAAG,IAAZ,EAAkBJ,cAAc,GAAG,IAAnC,EAAyC;EAClD,UAAI,OAAOI,QAAP,KAAoB,QAAxB,EAAkC;EAChC,cAAM,IAAIkB,KAAJ,CAAU,yCAAyC,OAAOlB,QAAhD,GAA2D,WAArE,CAAN;EACD;;EAED,WAAKA,QAAL,GAAgBA,QAAhB;;EAEA,UAAI,OAAOJ,cAAP,KAA0B,UAA9B,EAA0C;EACxC,aAAKA,cAAL,GAAsBA,cAAtB;EACD;EACF;EAED;;;;;;;EAKAuB,IAAAA,oBAAoB,CAACC,EAAD,EAAK;EACvB,UAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B;EAC5B,cAAM,IAAIF,KAAJ,CAAW,GAAE7B,IAAK,+CAAlB,CAAN;EACD;;EACD,WAAKgC,mBAAL,GAA2BD,EAA3B;EACD;;EAEDE,IAAAA,oBAAoB,GAAG;EACrB,aAAO,KAAKD,mBAAZ;EACD;EAED;;;;;;;EAKAE,IAAAA,aAAa,CAAC/C,SAAD,EAAYgD,WAAW,GAAG,EAA1B,EAA8B;EACzC,YAAMC,cAAc,GAAI,KAAIjD,SAAS,CAACkD,MAAV,CAAiB,CAAjB,EAAoBC,WAApB,EAAkC,GAAEnD,SAAS,CAACoD,KAAV,CAAgB,CAAhB,CAAmB,EAAnF;EAEA,WAAKlC,MAAL,CAAYgB,OAAZ,CAAqBmB,KAAD,IAAW;EAC7B,cAAMC,UAAU,GAAGD,KAAK,CAACrD,SAAD,CAAxB;EACA,cAAMuD,eAAe,GAAGF,KAAK,CAACJ,cAAD,CAA7B;;EACA,YAAI,OAAOK,UAAP,KAAsB,UAA1B,EAAsC;EACpCA,UAAAA,UAAU,CAACE,KAAX,CAAiB,IAAjB,EAAuBR,WAAvB;EACD,SAL4B;;;EAQ7B,YAAI,OAAOO,eAAP,KAA2B,UAA/B,EAA2C;EACzCA,UAAAA,eAAe,CAACC,KAAhB,CAAsB,IAAtB,EAA4BR,WAA5B;EACD;EACF,OAXD;EAaAtC,MAAAA,iBAAiB,CAACV,SAAD,EAAY,KAAKiB,IAAjB,EAAuB+B,WAAvB,CAAjB;EACD;;EAhIQ;;EAmIX,SAAOpC,IAAP;EACD,CAtJY,GAAb;;ECRA;EACA,IAAI,OAAOR,MAAP,KAAkB,WAAtB,EAAmC;EACjCA,EAAAA,MAAM,CAACqD,gBAAP,CAAwB,OAAxB,EAAiC,MAAM;EACrCC,IAAAA,OAAO,CAACC,KAAR,CAAc,uGAAd;EACD,GAFD;EAGD;;;EAGD,IAAIC,eAAe,GAAG,CAAC,WAAD,EAAc,WAAd,EAA2B,SAA3B,CAAtB;EACA,IAAIC,WAAW,GAAG,KAAlB;;EAEA,IAAI,OAAOzD,MAAP,KAAkB,WAAtB,EAAmC;EACjC,MAAK,kBAAkBA,MAAnB,IAA8BA,MAAM,CAAC0D,aAAP,IAAwBvD,QAAQ,YAAYuD,aAA9E,EAA6F;EAC3FD,IAAAA,WAAW,GAAG,IAAd;EACAD,IAAAA,eAAe,GAAG,CAAC,YAAD,EAAe,WAAf,EAA4B,UAA5B,EAAwC,aAAxC,CAAlB;EACD;;EAED,MAAIxD,MAAM,CAAC2D,SAAP,CAAiBC,cAArB,EAAqC;EACnCJ,IAAAA,eAAe,GAAG,CAAC,aAAD,EAAgB,aAAhB,EAA+B,WAA/B,EAA4C,eAA5C,CAAlB;EACD,GAFD,MAEO,IAAIxD,MAAM,CAAC2D,SAAP,CAAiBE,gBAArB,EAAuC;EAC5CL,IAAAA,eAAe,GAAG,CAAC,eAAD,EAAkB,eAAlB,EAAmC,aAAnC,EAAkD,iBAAlD,CAAlB;EACD;EACF;;EAED,MAAMzB,EAAE,GAAG5B,QAAQ,CAAC2D,aAAT,CAAuB,KAAvB,CAAX;EACA,MAAMC,WAAW,GAAG,CAClB;EAAElD,EAAAA,IAAI,EAAE,YAAR;EAAsBmD,EAAAA,KAAK,EAAE,iBAA7B;EAAgDC,EAAAA,GAAG,EAAE;EAArD,CADkB,EAElB;EAAEpD,EAAAA,IAAI,EAAE,eAAR;EAAyBmD,EAAAA,KAAK,EAAE,iBAAhC;EAAmDC,EAAAA,GAAG,EAAE;EAAxD,CAFkB,EAGlB;EAAEpD,EAAAA,IAAI,EAAE,cAAR;EAAwBmD,EAAAA,KAAK,EAAE,mBAA/B;EAAoDC,EAAAA,GAAG,EAAE;EAAzD,CAHkB,EAIlB;EAAEpD,EAAAA,IAAI,EAAE,kBAAR;EAA4BmD,EAAAA,KAAK,EAAE,uBAAnC;EAA4DC,EAAAA,GAAG,EAAE;EAAjE,CAJkB,CAApB;EAMA,MAAMC,UAAU,GAAG,CACjB;EAAErD,EAAAA,IAAI,EAAE,WAAR;EAAqBmD,EAAAA,KAAK,EAAE,gBAA5B;EAA8CC,EAAAA,GAAG,EAAE;EAAnD,CADiB,EAEjB;EAAEpD,EAAAA,IAAI,EAAE,cAAR;EAAwBmD,EAAAA,KAAK,EAAE,gBAA/B;EAAiDC,EAAAA,GAAG,EAAE;EAAtD,CAFiB,EAGjB;EAAEpD,EAAAA,IAAI,EAAE,aAAR;EAAuBmD,EAAAA,KAAK,EAAE,kBAA9B;EAAkDC,EAAAA,GAAG,EAAE;EAAvD,CAHiB,EAIjB;EAAEpD,EAAAA,IAAI,EAAE,iBAAR;EAA2BmD,EAAAA,KAAK,EAAE,sBAAlC;EAA0DC,EAAAA,GAAG,EAAE;EAA/D,CAJiB,CAAnB;EAOA,MAAME,eAAe,GAAGJ,WAAW,CAACK,IAAZ,CAAiBC,CAAC,IAAItC,EAAE,CAACuC,KAAH,CAASD,CAAC,CAACxD,IAAX,MAAqB0D,SAA3C,EAAsDP,KAA9E;EACA,MAAMQ,aAAa,GAAGT,WAAW,CAACK,IAAZ,CAAiBC,CAAC,IAAItC,EAAE,CAACuC,KAAH,CAASD,CAAC,CAACxD,IAAX,MAAqB0D,SAA3C,EAAsDN,GAA5E;EACA,MAAMQ,cAAc,GAAGP,UAAU,CAACE,IAAX,CAAgBC,CAAC,IAAItC,EAAE,CAACuC,KAAH,CAASD,CAAC,CAACxD,IAAX,MAAqB0D,SAA1C,EAAqDP,KAA5E;EACA,MAAMU,YAAY,GAAGR,UAAU,CAACE,IAAX,CAAgBC,CAAC,IAAItC,EAAE,CAACuC,KAAH,CAASD,CAAC,CAACxD,IAAX,MAAqB0D,SAA1C,EAAqDN,GAA1E;AAEA,cAAe;EACb;EACAU,EAAAA,YAAY,EAAElB,WAFD;EAIb;EACAmB,EAAAA,cAAc,EAAE,QALH;EAMbC,EAAAA,eAAe,EAAE,SANJ;EAObC,EAAAA,oBAAoB,EAAE,cAPT;EAQbC,EAAAA,4BAA4B,EAAE,mBARjB;EASbC,EAAAA,4BAA4B,EAAE,mBATjB;EAWb;EACAC,EAAAA,IAAI,EAAE,MAZO;EAabC,EAAAA,KAAK,EAAE,OAbM;EAcbC,EAAAA,IAAI,EAAE,MAdO;EAebC,EAAAA,MAAM,EAAE,QAfK;EAiBb;EACAC,EAAAA,IAAI,EAAE,MAlBO;EAoBb;EACAC,EAAAA,KAAK,EAAE9B,eAAe,CAAC,CAAD,CArBT;EAsBb+B,EAAAA,IAAI,EAAE/B,eAAe,CAAC,CAAD,CAtBR;EAuBbgC,EAAAA,GAAG,EAAEhC,eAAe,CAAC,CAAD,CAvBP;EAwBbiC,EAAAA,MAAM,EAAE,OAAOjC,eAAe,CAAC,CAAD,CAAtB,KAA8B,WAA9B,GAA4C,IAA5C,GAAmDA,eAAe,CAAC,CAAD,CAxB7D;EA0Bb;EACAkC,EAAAA,KAAK,EAAE,OA3BM;EA6Bb;EACAC,EAAAA,gBAAgB,EAAExB,eA9BL;EA+BbyB,EAAAA,cAAc,EAAEpB,aA/BH;EAiCb;EACAqB,EAAAA,eAAe,EAAEpB,cAlCJ;EAmCbqB,EAAAA,aAAa,EAAEpB,YAnCF;EAqCb;EACAqB,EAAAA,aAAa,EAAE;EAtCF,CAAf;;EC3CA;;;;;AAMA;EAGA,MAAMC,KAAK,GAAG,CAAC,MAAM;EACnB;;;;;EAMA,QAAMvF,IAAI,GAAG,OAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG;EACzBC,IAAAA,UAAU,EAAE,IADa;EAEzBC,IAAAA,OAAO,EAAE,IAFgB;EAGzBC,IAAAA,WAAW,EAAE,IAHY;EAIzBC,IAAAA,YAAY,EAAE;EAJW,GAA3B;EAOA,MAAIC,WAAJ;EACA;;;;;;EAMA,QAAMN,KAAN,CAAY;EACV;;;;;EAKApF,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,WAAKA,OAAL,GAAeC,MAAM,CAACC,MAAP,CAAcR,kBAAd,EAAkCM,OAAlC,CAAf;EAEA,WAAKG,KAAL,GAAa,EAAb;EACA,WAAKC,OAAL,GAAe,KAAf,CAJwB;;EAOxB,WAAKC,cAAL,GAPwB;;EAUxB,WAAKC,WAAL;EACD,KAjBS;;;EAoBVC,IAAAA,CAAC,CAACC,QAAD,EAAW;EACV,aAAO5G,QAAQ,CAACqB,aAAT,CAAuBuF,QAAvB,CAAP;EACD;;EAEDC,IAAAA,OAAO,GAAG;EACR,aAAOhH,MAAM,CAACiH,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,KAAKZ,OAAL,CAAaL,UAAxC,EAAoD,CAApD,CAAP;EACD;;EAEDkB,IAAAA,eAAe,GAAG;EAChB,YAAMF,IAAI,GAAG,KAAKF,OAAL,EAAb;EACA,YAAMK,EAAE,GAAG,IAAIC,MAAJ,CAAW,eAAX,CAAX;EACA,YAAMC,OAAO,GAAGF,EAAE,CAACG,IAAH,CAAQN,IAAR,CAAhB;;EAEA,UAAIK,OAAO,IAAIA,OAAO,CAAC,CAAD,CAAtB,EAA2B;EACzB,eAAOA,OAAO,CAAC,CAAD,CAAd;EACD;;EAED,aAAO,IAAP;EACD;;EAEDE,IAAAA,OAAO,CAAClH,QAAD,EAAW;EAChBP,MAAAA,MAAM,CAACiH,QAAP,CAAgBC,IAAhB,GAAwB,GAAE,KAAKX,OAAL,CAAaL,UAAW,IAAG3F,QAAS,EAA9D;EACD;;EAEDmH,IAAAA,QAAQ,CAACC,SAAD,EAAYC,SAAZ,EAAuB;EAC7B,YAAMC,KAAK,GAAG,KAAKC,YAAL,CAAkBH,SAAlB,CAAd;EACA,YAAMI,KAAK,GAAG,KAAKD,YAAL,CAAkBF,SAAlB,CAAd;EACA,aAAOC,KAAK,IAAIE,KAAT,IAAkBF,KAAK,CAAChH,IAAN,KAAekH,KAAK,CAAClH,IAA9C;EACD;EAED;;;;;;EAIA+F,IAAAA,cAAc,GAAG;EACfzG,MAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAmC2E,KAAK,IAAI,KAAKC,OAAL,CAAaD,KAAb,CAA5C;EACAhI,MAAAA,MAAM,CAACqD,gBAAP,CAAwB,UAAxB,EAAoC2E,KAAK,IAAI,KAAKE,aAAL,CAAmBF,KAAnB,CAA7C;EACAhI,MAAAA,MAAM,CAACqD,gBAAP,CAAwB,YAAxB,EAAsC2E,KAAK,IAAI,KAAKG,YAAL,CAAkBH,KAAlB,CAA/C;EACA7H,MAAAA,QAAQ,CAACkD,gBAAT,CAA0B,kBAA1B,EAA8C2E,KAAK,IAAI,KAAKnB,WAAL,CAAiBmB,KAAjB,CAAvD;EACD,KA3DS;;;EA+DV,eAAW/G,OAAX,GAAqB;EACnB,aAAQ,GAAER,IAAK,IAAGC,OAAQ,EAA1B;EACD,KAjES;;;EAqEV,UAAM0H,QAAN,CAAe7H,QAAf,EAAyB8H,IAAI,GAAG,KAAhC,EAAuCC,MAAM,GAAG,EAAhD,EAAoDzG,IAAI,GAAG0G,KAAK,CAAC7C,KAAjE,EAAwE;EACtE,YAAM8C,OAAO,GAAG,KAAK1B,CAAL,CAAO,UAAP,CAAhB;;EACA,UAAI2B,WAAW,GAAG,IAAlB;;EAEA,UAAID,OAAJ,EAAa;EACXC,QAAAA,WAAW,GAAGD,OAAO,CAACE,YAAR,CAAqB,WAArB,CAAd;EACA,cAAMC,YAAY,GAAG,KAAKb,YAAL,CAAkBW,WAAlB,CAArB;EACA,cAAMG,SAAS,GAAGD,YAAY,CAACjG,oBAAb,EAAlB;;EAEA,YAAI,OAAOkG,SAAP,KAAqB,UAAzB,EAAqC;EACnC,cAAI,MAAMA,SAAS,CAACH,WAAD,EAAclI,QAAd,EAAwB+H,MAAxB,CAAnB,EAAoD;EAClD,gBAAIzG,IAAI,KAAK0G,KAAK,CAAClD,IAAnB,EAAyB;EACvBrF,cAAAA,MAAM,CAAC6I,OAAP,CAAeR,IAAf;EACD;;EACD;EACD;EACF;;EAED,YAAI,KAAKX,QAAL,CAAcnH,QAAd,EAAwBkI,WAAxB,CAAJ,EAA0C;EACxC;EACD;;EAEDD,QAAAA,OAAO,CAACM,SAAR,CAAkBC,MAAlB,CAAyB,SAAzB,EAlBW;;EAqBX/I,QAAAA,MAAM,CAAC6I,OAAP,CAAeG,YAAf,CAA4B;EAAEC,UAAAA,IAAI,EAAE1I;EAAR,SAA5B,EAAgDkI,WAAhD;EAEA,aAAKS,gBAAL,CAAsBT,WAAtB,EAAmCF,KAAK,CAACpD,IAAzC;EACD;;EAED,WAAK+D,gBAAL,CAAsB3I,QAAtB,EAAgCgI,KAAK,CAACtD,IAAtC;EAEAqB,MAAAA,WAAW,GAAG/F,QAAd,CAhCsE;;EAmCtE,YAAM4I,OAAO,GAAG,KAAKrC,CAAL,CAAQ,eAAcvG,QAAS,IAA/B,CAAhB;;EAEA4I,MAAAA,OAAO,CAACL,SAAR,CAAkBM,GAAlB,CAAsB,SAAtB,EArCsE;;EAwCtE,YAAMC,SAAS,GAAG,KAAKvB,YAAL,CAAkBvH,QAAlB,CAAlB;;EAEA,UAAI8I,SAAS,IAAIA,SAAS,CAAClI,WAAV,EAAjB,EAA0C;EACxC,cAAMkI,SAAS,CAAC/H,cAAV,EAAN;EACD;;EAED,UAAIkH,OAAJ,EAAa;EACX;EACAA,QAAAA,OAAO,CAACH,IAAR,GAAeA,IAAf;EACAG,QAAAA,OAAO,CAACc,gBAAR,GAA2Bb,WAA3B;;EAEA,cAAMc,kBAAkB,GAAG,MAAM;EAC/B,cAAIf,OAAO,CAACM,SAAR,CAAkBU,QAAlB,CAA2B,SAA3B,CAAJ,EAA2C;EACzChB,YAAAA,OAAO,CAACM,SAAR,CAAkBC,MAAlB,CAAyB,SAAzB;EACD;;EAEDP,UAAAA,OAAO,CAACM,SAAR,CAAkBC,MAAlB,CAAyBP,OAAO,CAACH,IAAR,GAAe,UAAf,GAA4B,WAArD;EAEA,eAAKa,gBAAL,CAAsB5C,WAAtB,EAAmCiC,KAAK,CAACrD,KAAzC;EACA,eAAKgE,gBAAL,CAAsBV,OAAO,CAACc,gBAA9B,EAAgDf,KAAK,CAACnD,MAAtD;EAEAoD,UAAAA,OAAO,CAACiB,mBAAR,CAA4BlB,KAAK,CAACzC,aAAlC,EAAiDyD,kBAAjD;EACD,SAXD;;EAaA,YAAI,KAAKhD,OAAL,CAAaF,YAAjB,EAA+B;EAC7BmC,UAAAA,OAAO,CAACnF,gBAAR,CAAyBkF,KAAK,CAACzC,aAA/B,EAA8CyD,kBAA9C;EACAf,UAAAA,OAAO,CAACM,SAAR,CAAkBM,GAAlB,CAAsB,SAAtB;EACD,SAHD,MAGO;EACLG,UAAAA,kBAAkB;EACnB;;EAEDf,QAAAA,OAAO,CAACM,SAAR,CAAkBM,GAAlB,CAAsBf,IAAI,GAAG,UAAH,GAAgB,WAA1C;EACD;EACF;;EAEDqB,IAAAA,kBAAkB,CAACnJ,QAAD,EAAW;EAC3B,UAAI,CAAC,KAAKuH,YAAL,CAAkBvH,QAAlB,CAAL,EAAkC;EAChC,aAAKmG,KAAL,CAAWtE,IAAX,CAAgB,IAAI5B,IAAJ,CAASD,QAAT,CAAhB;EACD;EACF;;EAEDuH,IAAAA,YAAY,CAACvH,QAAD,EAAW;EACrB,aAAO,KAAKmG,KAAL,CAAWtC,IAAX,CAAgB6E,IAAI,IAAIA,IAAI,CAACpI,IAAL,KAAcN,QAAtC,CAAP;EACD;;EAEDoJ,IAAAA,aAAa,CAACC,SAAD,EAAY;EACvB,aAAO,KAAKlD,KAAL,CAAWmD,MAAX,CAAkBZ,IAAI,IAAIW,SAAS,CAACE,OAAV,CAAkBb,IAAI,CAACpI,IAAvB,IAA+B,CAAC,CAA1D,CAAP;EACD;;EAEDkJ,IAAAA,eAAe,CAACC,GAAD,EAAM;EACnB,aAAOA,GAAG,CAAC7C,KAAJ,CAAU,GAAV,EAAe8C,GAAf,CAAmBC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAA3B,CAAP;EACD;;EAEDC,IAAAA,SAAS,CAACC,QAAD,EAAW;EAClB,UAAI,KAAKC,iBAAL,KAA2B,GAA/B,EAAoC;EAClC;EACA,aAAK5D,KAAL,CAAW5E,OAAX,CAAoBmH,IAAD,IAAU;EAC3BA,UAAAA,IAAI,CAAC/G,gBAAL,CAAsBmI,QAAtB;EACD,SAFD;EAGA;EACD;;EAED,YAAME,UAAU,GAAG,KAAKZ,aAAL,CAAmB,KAAKI,eAAL,CAAqB,KAAKO,iBAA1B,CAAnB,EAAiE,IAAjE,CAAnB;EACAC,MAAAA,UAAU,CAACzI,OAAX,CAAoBmH,IAAD,IAAU;EAC3BA,QAAAA,IAAI,CAAC/G,gBAAL,CAAsBmI,QAAtB;EACD,OAFD;EAGA,WAAKC,iBAAL,GAAyB,IAAzB;EACD;;EAEDE,IAAAA,iBAAiB,CAAC5B,SAAD,EAAY;EAC3B,UAAI,KAAK0B,iBAAL,KAA2B,GAA/B,EAAoC;EAClC,aAAK5D,KAAL,CAAW5E,OAAX,CAAoBmH,IAAD,IAAU;EAC3BA,UAAAA,IAAI,CAAC1G,oBAAL,CAA0BqG,SAA1B;EACD,SAFD;EAGA;EACD;;EAED,YAAM2B,UAAU,GAAG,KAAKZ,aAAL,CAAmB,KAAKI,eAAL,CAAqB,KAAKO,iBAA1B,CAAnB,EAAiE,IAAjE,CAAnB;EACAC,MAAAA,UAAU,CAACzI,OAAX,CAAoBmH,IAAD,IAAU;EAC3BA,QAAAA,IAAI,CAAC1G,oBAAL,CAA0BqG,SAA1B;EACD,OAFD;EAIA,WAAK0B,iBAAL,GAAyB,IAAzB;EACD;;EAEDjI,IAAAA,WAAW,CAACtB,YAAD,EAAeC,cAAc,GAAG,IAAhC,EAAsC;EAC/C,YAAMuJ,UAAU,GAAG,KAAKZ,aAAL,CAAmB,KAAKI,eAAL,CAAqB,KAAKO,iBAA1B,CAAnB,EAAiE,IAAjE,CAAnB;EACAC,MAAAA,UAAU,CAACzI,OAAX,CAAoBmH,IAAD,IAAU;EAC3BA,QAAAA,IAAI,CAAC5G,WAAL,CAAiBtB,YAAjB,EAA+BC,cAA/B;EACD,OAFD;EAGA,WAAKsJ,iBAAL,GAAyB,IAAzB;EACD;;EAEDpB,IAAAA,gBAAgB,CAAC3I,QAAD,EAAWX,SAAX,EAAsBgD,WAAW,GAAG,IAApC,EAA0C;EACxD,YAAMyG,SAAS,GAAG,KAAKvB,YAAL,CAAkBvH,QAAlB,CAAlB;;EACA,UAAI8I,SAAJ,EAAe;EACbA,QAAAA,SAAS,CAAC1G,aAAV,CAAwB/C,SAAxB,EAAmCgD,WAAnC;EACD;EACF;;EAEDqF,IAAAA,OAAO,CAACD,KAAD,EAAQ;EACb,YAAMzH,QAAQ,GAAGyH,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,eAA1B,CAAjB;EACA,YAAMgC,QAAQ,GAAG,EAAE1C,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,eAA1B,MAA+C,MAAjD,CAAjB;;EAEA,UAAInI,QAAJ,EAAc;EACZ,YAAIA,QAAQ,KAAK,OAAjB,EAA0B;EACxB;EACAP,UAAAA,MAAM,CAAC6I,OAAP,CAAeR,IAAf;EACA;EACD;EAED;;;;;;;EAKA,YAAI,KAAK9B,OAAL,CAAaJ,OAAjB,EAA0B;EACxB,eAAKsB,OAAL,CAAalH,QAAb;EACD,SAFD,MAEO;EACL,eAAK6H,QAAL,CAAc7H,QAAd,EAAwBmK,QAAxB;EACD;EACF;EACF;;EAEDxC,IAAAA,aAAa,CAACF,KAAK,GAAG,EAAT,EAAa;EACxB,YAAMzH,QAAQ,GAAGyH,KAAK,CAAC2C,KAAN,GAAc3C,KAAK,CAAC2C,KAAN,CAAY1B,IAA1B,GAAiC,IAAlD;;EACA,UAAI,CAAC1I,QAAL,EAAe;EACb;EACD;;EAED,WAAK6H,QAAL,CAAc7H,QAAd,EAAwB,IAAxB;EACD;;EAED4H,IAAAA,YAAY,GAAG;EACb,YAAMG,MAAM,GAAG,CAAC,KAAKtB,OAAL,KAAiB,KAAKA,OAAL,GAAeG,KAAf,CAAqB,GAArB,CAAjB,GAA6C,EAA9C,EAAkD0C,MAAlD,CAAyDe,CAAC,IAAIA,CAAC,CAACC,MAAF,GAAW,CAAzE,CAAf;;EACA,UAAIvC,MAAM,CAACuC,MAAP,GAAgB,CAApB,EAAuB;EACrB;EACAvC,QAAAA,MAAM,CAACwC,KAAP;EACD;;EAED,WAAK5B,gBAAL,CAAsB5C,WAAtB,EAAmCiC,KAAK,CAAClD,IAAzC,EAA+CiD,MAA/C;EAEA,YAAMyC,OAAO,GAAG,KAAK3D,eAAL,EAAhB;;EACA,UAAI2D,OAAJ,EAAa;EACX,aAAK3C,QAAL,CAAc2C,OAAd,EAAuB,KAAvB,EAA8BzC,MAA9B,EAAsCC,KAAK,CAAClD,IAA5C;EACD;EACF;EAED;;;;;EAGAwB,IAAAA,WAAW,GAAG;EACZ,YAAMH,KAAK,GAAGvG,QAAQ,CAAC8B,gBAAT,CAA0B,aAA1B,CAAd;;EAEA,UAAI,CAACyE,KAAL,EAAY;EACV;EACD;;EAEDA,MAAAA,KAAK,CAAC5E,OAAN,CAAemH,IAAD,IAAU;EACtB;;;;EAIA,cAAM1I,QAAQ,GAAG0I,IAAI,CAACP,YAAL,CAAkB,WAAlB,KAAkCO,IAAI,CAAC+B,QAAxD;EAEA,aAAKtB,kBAAL,CAAwBnJ,QAAxB;EACD,OARD;EASD;;EAED0K,IAAAA,MAAM,CAAC1K,QAAD,EAAW2K,YAAY,GAAG,IAA1B,EAAgC;EACpC,WAAKZ,iBAAL,GAAyB/J,QAAzB;;EAEA,UAAI2K,YAAY,IAAI3K,QAAQ,KAAK,GAAjC,EAAsC;EACpC,aAAKmJ,kBAAL,CAAwBnJ,QAAxB;EACD;;EAED,aAAO,IAAP;EACD;;EAEDyD,IAAAA,KAAK,CAACmH,gBAAgB,GAAG,KAApB,EAA2B;EAC9B;EACA,UAAI,KAAKxE,OAAT,EAAkB;EAChB,cAAM,IAAIrE,KAAJ,CAAW,GAAE7B,IAAK,qCAAlB,CAAN;EACD;;EAED,WAAKkG,OAAL,GAAe,IAAf,CAN8B;;EAS9B,UAAI3G,MAAM,CAACoL,OAAX,EAAoB;EAClBD,QAAAA,gBAAgB,GAAG,IAAnB;EACD;;EAED,UAAI5K,QAAQ,GAAG,KAAK6G,eAAL,EAAf;;EAEA,UAAI,CAAC,KAAKU,YAAL,CAAkBvH,QAAlB,CAAL,EAAkC;EAChCA,QAAAA,QAAQ,GAAG,KAAKgG,OAAL,CAAaH,WAAxB;EACD;;EAED,UAAI+E,gBAAgB,IAAI,CAAC,KAAK5E,OAAL,CAAaH,WAAtC,EAAmD;EACjD,cAAM,IAAI9D,KAAJ,CAAW,GAAE7B,IAAK,uDAAlB,CAAN;EACD;EAED;;;;;;EAIA,UAAI,KAAK8F,OAAL,CAAaJ,OAAjB,EAA0B;EACxB,aAAKsB,OAAL,CAAalH,QAAb;EACD;;EAED,WAAK6H,QAAL,CAAc+C,gBAAgB,GAAG,KAAK5E,OAAL,CAAaH,WAAhB,GAA8B7F,QAA5D;EACD,KAhUS;;;EAmUV,WAAO8K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,IAAIP,KAAJ,CAAUO,OAAV,CAAP;EACD;;EArUS;;EAwUZ,SAAOP,KAAP;EACD,CAhWa,GAAd;;ECTA;;;;;EAMA,MAAMsF,MAAM,GAAG,CAAC,MAAM;EACpB;;;;;EAMA,QAAM7K,IAAI,GAAG,aAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EAEA;;;;;;EAMA,QAAM4K,MAAN,CAAa;EAEX;;;;EAIA1K,IAAAA,WAAW,CAAC2K,OAAD,EAAUC,IAAV,EAAgB;EACzB,WAAKD,OAAL,GAAeA,OAAf;EACA,WAAKC,IAAL,GAAYA,IAAZ;;EAEA,UAAI,CAAC,KAAKC,SAAL,CAAe,KAAKF,OAApB,CAAL,EAAmC;EACjCjI,QAAAA,OAAO,CAACoI,GAAR,CAAY,gCAAZ;EACA;EACD,OAPwB;;;EAUzB,UAAI,KAAKH,OAAL,CAAaV,MAAb,IAAuB,KAAKU,OAAL,CAAaV,MAAb,GAAsB,CAAjD,EAAoD;EAClD,aAAKc,QAAL,CAAc,KAAKJ,OAAnB;EACD,OAFD,MAEO;EACL;EACA,aAAKK,OAAL,CAAa,KAAKL,OAAlB;EACD;EACF,KAtBU;;;EA0BX,eAAWtK,OAAX,GAAqB;EACnB,aAAQ,GAAER,IAAK,IAAGC,OAAQ,EAA1B;EACD;EAED;;;;;;;EAKA+K,IAAAA,SAAS,CAACF,OAAD,EAAU;EACjB,UAAIA,OAAO,KAAK,IAAhB,EAAsB;EACpB,eAAO,KAAP;EACD;;EAED,aAAOA,OAAO,YAAYM,IAAnB,IAA2BN,OAAO,YAAYO,QAArD;EACD;EAED;;;;;;;EAKAC,IAAAA,OAAO,CAACR,OAAD,EAAUS,IAAV,EAAgB;EACrB,UAAI,EAAE,iBAAiBT,OAAnB,CAAJ,EAAiC;EAC/BA,QAAAA,OAAO,CAACU,SAAR,GAAoBD,IAApB;EACD,OAFD,MAEO;EACLT,QAAAA,OAAO,CAACW,WAAR,GAAsBF,IAAtB;EACD;EACF;EAED;;;;;;;EAKAG,IAAAA,OAAO,CAACZ,OAAD,EAAUS,IAAV,EAAgB;EACrBT,MAAAA,OAAO,CAACvJ,SAAR,GAAoBgK,IAApB;EACD;EAED;;;;;;;;EAMAI,IAAAA,YAAY,CAACb,OAAD,EAAUc,IAAV,EAAgBL,IAAhB,EAAsB;EAChCT,MAAAA,OAAO,CAACa,YAAR,CAAqBC,IAArB,EAA2BL,IAA3B;EACD;EAED;;;;;;EAIAJ,IAAAA,OAAO,CAACL,OAAD,EAAU;EACf,UAAIc,IAAI,GAAGd,OAAO,CAAC7C,YAAR,CAAqB,QAArB,CAAX;;EACA,UAAI,CAAC2D,IAAL,EAAW;EACT;EACD;;EAEDA,MAAAA,IAAI,GAAGA,IAAI,CAAClC,IAAL,EAAP;EAEA,YAAMmC,CAAC,GAAG,iDAAV;EACA,UAAIC,CAAJ;;EAEA,aAAOA,CAAC,GAAGD,CAAC,CAAC9E,IAAF,CAAO6E,IAAP,CAAX,EAAyB;EACvB,cAAMG,GAAG,GAAGD,CAAC,CAAC,CAAD,CAAD,CAAKpC,IAAL,EAAZ;EACA,cAAMsC,KAAK,GAAGF,CAAC,CAAC,CAAD,CAAD,CAAKpC,IAAL,GAAYuC,OAAZ,CAAoB,GAApB,EAAyB,EAAzB,CAAd;EACA,YAAIC,SAAS,GAAG,KAAKnB,IAAL,CAAUiB,KAAV,CAAhB;;EAEA,YAAI,CAAC,KAAKjB,IAAL,CAAUiB,KAAV,CAAL,EAAuB;EACrBnJ,UAAAA,OAAO,CAACoI,GAAR,CAAa,GAAEjL,IAAK,cAAagM,KAAM,kBAAvC;EACAE,UAAAA,SAAS,GAAGF,KAAZ;EACD;;EAED,cAAMG,UAAU,GAAG,QAAQJ,GAAG,CAAC1J,MAAJ,CAAW,CAAX,EAAcC,WAAd,EAAR,GAAsCyJ,GAAG,CAACxJ,KAAJ,CAAU,CAAV,CAAzD;;EAEA,YAAI,KAAK4J,UAAL,CAAJ,EAAsB;EACpB,eAAKA,UAAL,EAAiBrB,OAAjB,EAA0BoB,SAA1B;EACD,SAFD,MAEO;EACL,eAAKP,YAAL,CAAkBb,OAAlB,EAA2BiB,GAA3B,EAAgCG,SAAhC;EACD;EACF;EACF;EAED;;;;;;EAIAhB,IAAAA,QAAQ,CAACJ,OAAD,EAAU;EAChB3J,MAAAA,KAAK,CAACC,IAAN,CAAW0J,OAAX,EAAoBzJ,OAApB,CAA4BC,EAAE,IAAI,KAAK6J,OAAL,CAAa7J,EAAb,CAAlC;EACD;;EApHU;;EAuHb,SAAOuJ,MAAP;EACD,CAxIc,GAAf;;ECNA;;;;;AAKA;EAEA,MAAMuB,IAAI,GAAG,CAAC,MAAM;EAClB;;;;;EAMA,QAAMpM,IAAI,GAAG,MAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG;EACzB6G,IAAAA,cAAc,EAAE,IADS;EAEzBC,IAAAA,MAAM,EAAE,IAFiB;EAGzBC,IAAAA,IAAI,EAAE,KAHmB;EAIzBxB,IAAAA,IAAI,EAAE;EAGR;;;;;;EAP2B,GAA3B;;EAaA,QAAMqB,IAAN,CAAW;EACT;;;;EAIAjM,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,WAAKA,OAAL,GAAeC,MAAM,CAACC,MAAP,CAAcR,kBAAd,EAAkCM,OAAlC,CAAf;;EAEA,UAAI,OAAO,KAAKA,OAAL,CAAauG,cAApB,KAAuC,QAA3C,EAAqD;EACnD,cAAM,IAAIxK,KAAJ,CAAW,GAAE7B,IAAK,0DAAlB,CAAN;EACD;;EAED,UAAI,KAAK8F,OAAL,CAAaiF,IAAb,KAAsB,IAA1B,EAAgC;EAC9B,cAAM,IAAIlJ,KAAJ,CAAW,GAAE7B,IAAK,iCAAlB,CAAN;EACD;;EAED,UAAI,OAAO,KAAK8F,OAAL,CAAaiF,IAAb,CAAkB,KAAKjF,OAAL,CAAauG,cAA/B,CAAP,KAA0D,QAA9D,EAAwE;EACtE,cAAM,IAAIxK,KAAJ,CAAW,GAAE7B,IAAK,+DAAlB,CAAN;EACD;;EAED,WAAKwM,SAAL,CAAe,KAAK1G,OAAL,CAAawG,MAA5B,EAAoC,KAAKxG,OAAL,CAAayG,IAAjD;EACD;;EAED,eAAW/L,OAAX,GAAqB;EACnB,aAAQ,GAAER,IAAK,IAAGC,OAAQ,EAA1B;EACD;;EAEDwM,IAAAA,SAAS,GAAG;EACV,aAAO,KAAK3G,OAAL,CAAawG,MAApB;EACD;;EAEDI,IAAAA,iBAAiB,GAAG;EAClB,aAAO,KAAK5G,OAAL,CAAauG,cAApB;EACD;EAED;;;;;;;EAKAG,IAAAA,SAAS,CAACF,MAAD,EAASC,IAAI,GAAG,KAAhB,EAAuB;EAC9B,UAAI,OAAO,KAAKzG,OAAL,CAAaiF,IAAb,CAAkBuB,MAAlB,CAAP,KAAqC,QAAzC,EAAmD;EACjDzJ,QAAAA,OAAO,CAACC,KAAR,CAAe,GAAE9C,IAAK,KAAIsM,MAAO,6BAA4B,KAAKxG,OAAL,CAAauG,cAAe,GAAzF;EACD,OAFD,MAEO;EACL,aAAKvG,OAAL,CAAawG,MAAb,GAAsBA,MAAtB;EACD;;EAED,UAAIC,IAAJ,EAAU;EACR,aAAKI,UAAL;EACD;EACF;;EAEDC,IAAAA,YAAY,GAAG;EACb,aAAO7G,MAAM,CAAC8G,IAAP,CAAY,KAAK/G,OAAL,CAAaiF,IAAzB,CAAP;EACD;;EAED+B,IAAAA,YAAY,CAACd,KAAK,GAAG,IAAT,EAAee,gBAAgB,GAAG,EAAlC,EAAsC;EAChD,UAAI,OAAOf,KAAP,KAAiB,QAArB,EAA+B;EAC7B,eAAOlI,SAAP;EACD;;EAED,YAAMkJ,KAAK,GAAGhB,KAAK,CAACgB,KAAN,CAAY,mBAAZ,CAAd;;EACA,UAAIA,KAAJ,EAAW;EACThB,QAAAA,KAAK,GAAGA,KAAK,CAACC,OAAN,CAAce,KAAK,CAAC,CAAD,CAAnB,EAAwBD,gBAAgB,CAACC,KAAK,CAAC,CAAD,CAAN,CAAxC,CAAR;EACD;;EAED,UAAIhB,KAAK,CAACgB,KAAN,CAAY,mBAAZ,CAAJ,EAAsC;EACpC,eAAO,KAAKF,YAAL,CAAkBd,KAAlB,EAAyBe,gBAAzB,CAAP;EACD;;EAED,aAAOf,KAAP;EACD;;EAEDiB,IAAAA,SAAS,CAACC,OAAO,GAAG,IAAX,EAAiBC,MAAM,GAAG,EAA1B,EAA8B;EACrC,UAAIpC,IAAI,GAAG,KAAKjF,OAAL,CAAaiF,IAAb,CAAkB,KAAKjF,OAAL,CAAawG,MAA/B,CAAX;;EACA,UAAI,CAACvB,IAAL,EAAW;EACTA,QAAAA,IAAI,GAAG,KAAKjF,OAAL,CAAaiF,IAAb,CAAkB,KAAKjF,OAAL,CAAauG,cAA/B,CAAP;EACD;;EAED,UAAIa,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,GAAhC,IAAuC/L,KAAK,CAACiM,OAAN,CAAcF,OAAd,CAA3C,EAAmE;EACjE,YAAI/L,KAAK,CAACiM,OAAN,CAAcF,OAAd,CAAJ,EAA4B;EAC1B,gBAAML,IAAI,GAAG9G,MAAM,CAAC8G,IAAP,CAAY9B,IAAZ,EAAkB3B,MAAlB,CAAyB2C,GAAG,IAAImB,OAAO,CAAC7D,OAAR,CAAgB0C,GAAhB,IAAuB,CAAC,CAAxD,CAAb;EACA,gBAAMsB,YAAY,GAAG,EAArB;EACAR,UAAAA,IAAI,CAACxL,OAAL,CAAa0K,GAAG,IAAI;EAClBsB,YAAAA,YAAY,CAACtB,GAAD,CAAZ,GAAoB,KAAKe,YAAL,CAAkB/B,IAAI,CAACgB,GAAD,CAAtB,EAA6BoB,MAA7B,CAApB;EACD,WAFD;EAGApC,UAAAA,IAAI,GAAGsC,YAAP;EACD;;EAED,cAAMC,OAAO,GAAG,EAAhB;;EACA,aAAK,MAAMvB,GAAX,IAAkBhB,IAAlB,EAAwB;EACtBuC,UAAAA,OAAO,CAACvB,GAAD,CAAP,GAAe,KAAKe,YAAL,CAAkB/B,IAAI,CAACgB,GAAD,CAAtB,EAA6BoB,MAA7B,CAAf;EACD;;EAED,eAAOG,OAAP;EACD;;EAED,aAAO,KAAKR,YAAL,CAAkB/B,IAAI,CAACmC,OAAD,CAAtB,EAAiCC,MAAjC,CAAP;EACD,KAlGQ;;;EAqGTvJ,IAAAA,CAAC,CAACsJ,OAAO,GAAG,IAAX,EAAiBC,MAAM,GAAG,EAA1B,EAA8B;EAC7B,aAAO,KAAKF,SAAL,CAAeC,OAAf,EAAwBC,MAAxB,CAAP;EACD;EAED;;;;;;EAIAR,IAAAA,UAAU,CAAC7B,OAAO,GAAG,IAAX,EAAiB;EACzB,UAAI,CAACA,OAAL,EAAc;EACZA,QAAAA,OAAO,GAAGpL,QAAQ,CAAC8B,gBAAT,CAA0B,UAA1B,CAAV;EACD;;EAED,UAAI,OAAOsJ,OAAP,KAAmB,QAAvB,EAAiC;EAC/BA,QAAAA,OAAO,GAAGpL,QAAQ,CAACqB,aAAT,CAAuB+J,OAAvB,CAAV;EACD;;EAED,UAAID,MAAJ,CAAWC,OAAX,EAAoB,KAAKlH,CAAL,EAApB;EACD,KAvHQ;;;EA0HT,WAAOgH,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,IAAIsG,IAAJ,CAAStG,OAAT,CAAP;EACD;;EA5HQ;;EA+HX,SAAOsG,IAAP;EACD,CAtJY,GAAb;;ECNO,SAASmB,UAAT,GAAsB;EAC3B,SAAOC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,EAArC,CAAP;EACD;AAED,EAAO,SAASC,iBAAT,CAA2B5D,MAA3B,EAAmC6D,WAAnC,EAAgD;EACrD,SAAO7D,MAAM,IAAIA,MAAM,KAAKtK,QAA5B,EAAsCsK,MAAM,GAAGA,MAAM,CAAC8D,UAAtD,EAAkE;EAChE,QAAI9D,MAAM,CAAC3B,SAAP,CAAiBU,QAAjB,CAA0B8E,WAA1B,CAAJ,EAA4C;EAC1C,aAAO7D,MAAP;EACD;EACF;;EAED,SAAO,IAAP;EACD;AAED,EAUO,SAAS+D,gBAAT,CAA0B/D,MAA1B,EAAkC4B,IAAlC,EAAwC;EAC7C,SAAO5B,MAAM,IAAIA,MAAM,KAAKtK,QAA5B,EAAsCsK,MAAM,GAAGA,MAAM,CAAC8D,UAAtD,EAAkE;EAChE,QAAI9D,MAAM,CAAC/B,YAAP,CAAoB2D,IAApB,MAA8B,IAAlC,EAAwC;EACtC,aAAO5B,MAAP;EACD;EACF;;EAED,SAAO,IAAP;EACD;AAED,EAAO,SAASgE,kBAAT,CAA4BC,CAAC,GAAG,IAAhC,EAAsC7N,IAAtC,EAA4C8N,GAA5C,EAAiD;EACtD,MAAI,CAACD,CAAL,EAAQ;EACN;EACD;;EAED,QAAME,MAAM,GAAG,SAATA,MAAS,CAAUrI,OAAO,GAAG,EAApB,EAAwB;EACrC,UAAMsI,IAAI,GAAGtI,OAAb;;EACA,QAAI,KAAK,CAAL,CAAJ,EAAa;EACXsI,MAAAA,IAAI,CAACtD,OAAL,GAAe,KAAK,CAAL,CAAf;EACD;;EAED,WAAOoD,GAAG,CAACtD,YAAJ,CAAiBwD,IAAjB,CAAP;EACD,GAPD;;EASAH,EAAAA,CAAC,CAAClM,EAAF,CAAK3B,IAAL,IAAa+N,MAAb;EACAF,EAAAA,CAAC,CAAClM,EAAF,CAAK3B,IAAL,EAAWiO,WAAX,GAAyBH,GAAzB;EACAD,EAAAA,CAAC,CAAClM,EAAF,CAAK3B,IAAL,EAAWkO,UAAX,GAAwBH,MAAxB;EACD;;ECnDD,MAAMlG,YAAY,GAAG,CAACsG,KAAD,EAAQC,MAAR,KAAmB;EACtC,MAAID,KAAK,KAAK,EAAd,EAAkB;EAChB,WAAQ,QAAOC,MAAO,EAAtB;EACD;;EACD,SAAQ,QAAOD,KAAM,IAAGC,MAAO,EAA/B;EACD,CALD;;AAOA,EAAO,SAASC,mBAAT,CAA6B3D,OAA7B,EAAsCoD,GAAG,GAAG,EAA5C,EAAgDQ,KAAhD,EAAuDnL,KAAK,GAAG,EAA/D,EAAmE;EACxE,QAAMsJ,IAAI,GAAG9G,MAAM,CAAC8G,IAAP,CAAYqB,GAAZ,CAAb;EAEArB,EAAAA,IAAI,CAACxL,OAAL,CAAc0K,GAAD,IAAS;EACpB,QAAIxI,KAAK,KAAK,EAAV,IAAgBmL,KAAK,CAACrF,OAAN,CAAc0C,GAAd,MAAuB,CAAC,CAA5C,EAA+C;EAC7C;EACA;EACD;;EAED,QAAI,OAAOmC,GAAG,CAACnC,GAAD,CAAV,KAAoB,QAApB,IAAgCmC,GAAG,CAACnC,GAAD,CAAH,KAAa,IAAjD,EAAuD;EACrD,UAAI4C,QAAQ,GAAG5C,GAAf;;EACA,UAAIxI,KAAK,KAAK,EAAd,EAAkB;EAChBoL,QAAAA,QAAQ,GAAI,GAAEpL,KAAM,IAAGwI,GAAI,EAA3B;EACD;;EAED0C,MAAAA,mBAAmB,CAAC3D,OAAD,EAAUoD,GAAG,CAACnC,GAAD,CAAb,EAAoB2C,KAApB,EAA2BC,QAA3B,CAAnB;EACA;EACD;;EAED,UAAM/C,IAAI,GAAG3D,YAAY,CAAC1E,KAAD,EAAQwI,GAAR,CAAzB;EACAjB,IAAAA,OAAO,CAACa,YAAR,CAAqBC,IAArB,EAA2BsC,GAAG,CAACnC,GAAD,CAA9B;EACD,GAlBD;EAmBD;AAED,EAAO,SAAS6C,mBAAT,CAA6B9D,OAA7B,EAAsCoD,GAAG,GAAG,EAA5C,EAAgDQ,KAAhD,EAAuDnL,KAAK,GAAG,EAA/D,EAAmE;EACxE,QAAMsL,MAAM,GAAG9I,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBkI,GAAlB,CAAf;EACA,QAAMrB,IAAI,GAAG9G,MAAM,CAAC8G,IAAP,CAAYqB,GAAZ,CAAb;EAEArB,EAAAA,IAAI,CAACxL,OAAL,CAAc0K,GAAD,IAAS;EACpB,QAAIxI,KAAK,KAAK,EAAV,IAAgBmL,KAAK,CAACrF,OAAN,CAAc0C,GAAd,MAAuB,CAAC,CAA5C,EAA+C;EAC7C;EACA;EACD;;EAED,QAAImC,GAAG,CAACnC,GAAD,CAAH,KAAa,IAAb,IAAqBmC,GAAG,CAACnC,GAAD,CAAH,CAAS5L,WAAT,KAAyB4F,MAAlD,EAA0D;EACxD,UAAI4I,QAAQ,GAAG5C,GAAf;;EACA,UAAIxI,KAAK,KAAK,EAAd,EAAkB;EAChBoL,QAAAA,QAAQ,GAAI,GAAEpL,KAAM,IAAGwI,GAAI,EAA3B;EACD;;EAED8C,MAAAA,MAAM,CAAC9C,GAAD,CAAN,GAAc6C,mBAAmB,CAAC9D,OAAD,EAAUoD,GAAG,CAACnC,GAAD,CAAb,EAAoB2C,KAApB,EAA2BC,QAA3B,CAAjC;EACA;EACD,KAdmB;;;EAiBpB,QAAI3C,KAAK,GAAGkC,GAAG,CAACnC,GAAD,CAAf,CAjBoB;;EAkBpB,UAAM+C,IAAI,GAAG,OAAO9C,KAApB;EACA,UAAMJ,IAAI,GAAG3D,YAAY,CAAC1E,KAAD,EAAQwI,GAAR,CAAzB;EACA,UAAMgD,SAAS,GAAGjE,OAAO,CAAC7C,YAAR,CAAqB2D,IAArB,CAAlB;;EAEA,QAAImD,SAAS,KAAK,IAAlB,EAAwB;EACtB,UAAID,IAAI,KAAK,SAAb,EAAwB;EACtB;EACA9C,QAAAA,KAAK,GAAG+C,SAAS,KAAK,MAAtB;EACD,OAHD,MAGO,IAAI,CAACC,KAAK,CAACD,SAAD,CAAV,EAAuB;EAC5B/C,QAAAA,KAAK,GAAGiD,QAAQ,CAACF,SAAD,EAAY,EAAZ,CAAhB;EACD,OAFM,MAEA;EACL/C,QAAAA,KAAK,GAAG+C,SAAR;EACD;EACF;;EAEDF,IAAAA,MAAM,CAAC9C,GAAD,CAAN,GAAcC,KAAd;EACD,GAlCD;EAoCA,SAAO6C,MAAP;EACD;EAED,MAAMK,KAAK,GAAG,EAAd;AAEA,yBAAe;EACbvG,EAAAA,GAAG,CAACwG,SAAD,EAAY;EACbD,IAAAA,KAAK,CAACvN,IAAN,CAAWwN,SAAX;EACD,GAHY;;EAIb7G,EAAAA,MAAM,CAAC6G,SAAD,EAAY;EAChB,UAAMC,KAAK,GAAGF,KAAK,CAACG,SAAN,CAAgBC,CAAC,IAAIvJ,MAAM,CAACwJ,EAAP,CAAUJ,SAAV,EAAqBG,CAArB,CAArB,CAAd;;EACA,QAAIF,KAAK,GAAG,CAAC,CAAb,EAAgB;EACdF,MAAAA,KAAK,CAACM,MAAN,CAAaJ,KAAb,EAAoB,CAApB;EACD;EACF,GATY;;EAUbK,EAAAA,QAAQ,CAACN,SAAD,EAAY;EAClB,WAAOD,KAAK,CAAC9E,MAAN,KAAiB,CAAjB,IAAsBrE,MAAM,CAACwJ,EAAP,CAAUL,KAAK,CAACA,KAAK,CAAC9E,MAAN,GAAe,CAAhB,CAAf,EAAmC+E,SAAnC,CAA7B;EACD;;EAZY,CAAf;;EC7EA;;;;;AAKA,EAKA;;;;;;AAMA,EAAe,MAAMO,SAAN,CAAgB;EAE7BvP,EAAAA,WAAW,CAACC,IAAD,EAAOI,OAAP,EAAgBmP,cAAc,GAAG,EAAjC,EAAqC7J,OAAO,GAAG,EAA/C,EAAmD8J,WAAW,GAAG,EAAjE,EAAqEC,qBAAqB,GAAG,KAA7F,EAAoGC,UAAU,GAAG,KAAjH,EAAwH;EACjI,SAAK1P,IAAL,GAAYA,IAAZ;EACA,SAAKI,OAAL,GAAeA,OAAf;EACA,SAAKsF,OAAL,GAAeA,OAAf;EAEAC,IAAAA,MAAM,CAAC8G,IAAP,CAAY8C,cAAZ,EAA4BtO,OAA5B,CAAqC0O,IAAD,IAAU;EAC5C,UAAI,OAAO,KAAKjK,OAAL,CAAaiK,IAAb,CAAP,KAA8B,WAAlC,EAA+C;EAC7C,aAAKjK,OAAL,CAAaiK,IAAb,IAAqBJ,cAAc,CAACI,IAAD,CAAnC;EACD;EACF,KAJD;EAMA,SAAKH,WAAL,GAAmBA,WAAnB;EACA,SAAKC,qBAAL,GAA6BA,qBAA7B;EACA,SAAKC,UAAL,GAAkBA,UAAlB;EACA,SAAKE,EAAL,GAAUzC,UAAU,EAApB;EAEA,UAAM0C,YAAY,GAAG,CAAC,KAAKJ,qBAAN,IAA+B,KAAK/J,OAAL,CAAagF,OAAb,KAAyB,IAA7E;;EAEA,QAAI,OAAO,KAAKhF,OAAL,CAAagF,OAApB,KAAgC,QAApC,EAA8C;EAC5C,WAAKhF,OAAL,CAAagF,OAAb,GAAuBpL,QAAQ,CAACqB,aAAT,CAAuB,KAAK+E,OAAL,CAAagF,OAApC,CAAvB;EACD;;EAED,QAAImF,YAAY,IAAI,CAAC,KAAKnK,OAAL,CAAagF,OAAlC,EAA2C;EACzC,YAAM,IAAIjJ,KAAJ,CAAW,GAAE,KAAKzB,IAAK,qCAAvB,CAAN;EACD;;EAED,SAAK8P,cAAL,GAAsB,KAAKpK,OAAL,CAAagF,OAAb,KAAyB,IAA/C;EACA,SAAKqF,kBAAL,GAA0B,EAA1B;;EAEA,QAAI,CAAC,KAAKD,cAAV,EAA0B;EACxB;;;;;;;;EAQA,WAAKpK,OAAL,GAAeC,MAAM,CAACC,MAAP,CAAc,KAAKF,OAAnB,EAA4B,KAAKsK,cAAL,CAAoB,KAAKC,aAAL,EAApB,EAA0C,KAAKvK,OAA/C,CAA5B,CAAf,CATwB;;EAYxB,WAAKwK,aAAL;EACD;;EAED,SAAKC,eAAL,GAAuBhJ,KAAK,IAAI,KAAKiJ,oBAAL,CAA0BjJ,KAA1B,CAAhC;EACD;;EAED6I,EAAAA,cAAc,CAACK,UAAD,EAAaC,QAAb,EAAuB;EACnC,UAAMC,MAAM,GAAGF,UAAf;EACA,SAAKb,WAAL,CAAiBvO,OAAjB,CAA0B0K,GAAD,IAAS;EAChC,UAAI,OAAO2E,QAAQ,CAAC3E,GAAD,CAAf,KAAyB,WAA7B,EAA0C;EACxC4E,QAAAA,MAAM,CAAC5E,GAAD,CAAN,GAAc2E,QAAQ,CAAC3E,GAAD,CAAtB;EACD;EACF,KAJD;EAMA,WAAO4E,MAAP;EACD;;EAEDC,EAAAA,UAAU,GAAG;EACX,WAAO,KAAKpQ,OAAZ;EACD;;EAEDqQ,EAAAA,UAAU,GAAG;EACX,WAAO,KAAK/K,OAAL,CAAagF,OAApB;EACD;;EAEDgG,EAAAA,KAAK,GAAG;EACN,WAAO,KAAKd,EAAZ;EACD;;EAEDe,EAAAA,gBAAgB,CAAC7P,QAAD,EAAW;EACzBA,IAAAA,QAAQ,CAACG,OAAT,CAAiByJ,OAAO,IAAI,KAAKkG,eAAL,CAAqBlG,OAArB,CAA5B;EACD;;EAEDkG,EAAAA,eAAe,CAAClG,OAAD,EAAU;EACvBA,IAAAA,OAAO,CAACd,MAAR,CAAepH,gBAAf,CAAgCkI,OAAO,CAACvD,KAAxC,EAA+C,KAAKgJ,eAApD;EACA,SAAKJ,kBAAL,CAAwBxO,IAAxB,CAA6BmJ,OAA7B;EACD;;EAEDmG,EAAAA,kBAAkB,GAAG;EACnB,SAAKd,kBAAL,CAAwB9O,OAAxB,CAAiCyJ,OAAD,IAAa;EAC3C,WAAKoG,iBAAL,CAAuBpG,OAAvB;EACD,KAFD;EAGD;;EAEDoG,EAAAA,iBAAiB,CAACpG,OAAD,EAAU;EACzB,UAAMqG,sBAAsB,GAAG,KAAKhB,kBAAL,CAC5Bd,SAD4B,CAClB/N,EAAE,IAAIA,EAAE,CAAC0I,MAAH,KAAcc,OAAO,CAACd,MAAtB,IAAgC1I,EAAE,CAACiG,KAAH,KAAauD,OAAO,CAACvD,KADzC,CAA/B;;EAGA,QAAI4J,sBAAsB,GAAG,CAAC,CAA9B,EAAiC;EAC/BrG,MAAAA,OAAO,CAACd,MAAR,CAAehB,mBAAf,CAAmC8B,OAAO,CAACvD,KAA3C,EAAkD,KAAKgJ,eAAvD;EACA,WAAKJ,kBAAL,CAAwBX,MAAxB,CAA+B2B,sBAA/B,EAAuD,CAAvD;EACD,KAHD,MAGO;EACLtO,MAAAA,OAAO,CAACC,KAAR,CAAe,wCAAuCgI,OAAO,CAACd,MAAO,gBAAec,OAAO,CAACvD,KAAM,GAAlG;EACD;EACF;;EAED6J,EAAAA,YAAY,CAACjS,SAAD,EAAYE,MAAM,GAAG,EAArB,EAAyBgS,eAAe,GAAG,KAA3C,EAAkD;EAC5D,QAAI,OAAOlS,SAAP,KAAqB,QAAzB,EAAmC;EACjC,YAAM,IAAI0C,KAAJ,CAAU,8BAAV,CAAN;EACD;;EAED,QAAI,KAAKiO,UAAT,EAAqB;EACnB,UAAI3Q,SAAS,KAAK2I,KAAK,CAACtD,IAAxB,EAA8B;EAC5B8M,QAAAA,gBAAgB,CAAC3I,GAAjB,CAAqB,IAArB;EACD,OAFD,MAEO,IAAIxJ,SAAS,KAAK2I,KAAK,CAACpD,IAAxB,EAA8B;EACnC4M,QAAAA,gBAAgB,CAAChJ,MAAjB,CAAwB,IAAxB;EACD;EACF,KAX2D;;;EAc5D,UAAMiJ,eAAe,GAAGpS,SAAS,CAACuH,KAAV,CAAgB,GAAhB,EAAqB8K,MAArB,CAA4B,CAACC,GAAD,EAAMC,OAAN,EAAetC,KAAf,KAAyB;EAC3E,UAAIA,KAAK,KAAK,CAAd,EAAiB;EACf,eAAOsC,OAAP;EACD;;EAED,aAAOD,GAAG,GAAGC,OAAO,CAACrP,MAAR,CAAe,CAAf,EAAkBC,WAAlB,EAAN,GAAwCoP,OAAO,CAACnP,KAAR,CAAc,CAAd,CAA/C;EACD,KANuB,CAAxB;EAQA,UAAMH,cAAc,GAAI,KAAImP,eAAe,CAAClP,MAAhB,CAAuB,CAAvB,EAA0BC,WAA1B,EAAwC,GAAEiP,eAAe,CAAChP,KAAhB,CAAsB,CAAtB,CAAyB,EAA/F,CAtB4D;;EAyB5D,QAAI,OAAO,KAAKuD,OAAL,CAAayL,eAAb,CAAP,KAAyC,UAA7C,EAAyD;EACvD,WAAKzL,OAAL,CAAayL,eAAb,EAA8B5O,KAA9B,CAAoC,IAApC,EAA0C,CAACtD,MAAD,CAA1C;EACD;;EAED,QAAI,OAAO,KAAKyG,OAAL,CAAa1D,cAAb,CAAP,KAAwC,UAA5C,EAAwD;EACtD,WAAK0D,OAAL,CAAa1D,cAAb,EAA6BO,KAA7B,CAAmC,IAAnC,EAAyC,CAACtD,MAAD,CAAzC;EACD;;EAED,QAAIgS,eAAJ,EAAqB;EACnB;EACD,KAnC2D;;;EAsC5D,QAAI,KAAKvL,OAAL,CAAagF,OAAjB,EAA0B;EACxBnL,MAAAA,oBAAoB,CAAC,KAAKmG,OAAL,CAAagF,OAAd,EAAuB3L,SAAvB,EAAkC,KAAKiB,IAAvC,EAA6Cf,MAA7C,CAApB;EACD,KAFD,MAEO;EACLH,MAAAA,mBAAmB,CAACC,SAAD,EAAY,KAAKiB,IAAjB,EAAuBf,MAAvB,CAAnB;EACD;EACF;;EAEDiR,EAAAA,aAAa,GAAG;EACd,QAAI,KAAKV,WAAL,CAAiBxF,MAAjB,GAA0B,CAA9B,EAAiC;EAC/BqE,MAAAA,mBAAmB,CAAC,KAAK3I,OAAL,CAAagF,OAAd,EAAuB,KAAKhF,OAA5B,EAAqC,KAAK8J,WAA1C,CAAnB;EACD;EACF;;EAEDS,EAAAA,aAAa,GAAG;EACd,UAAMvK,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKF,OAAvB,CAAhB;EACA,WAAO8I,mBAAmB,CAAC,KAAK9I,OAAL,CAAagF,OAAd,EAAuBhF,OAAvB,EAAgC,KAAK8J,WAArC,CAA1B;EACD;EAED;;;;;;;EAKA+B,EAAAA,eAAe,GAAG;EAChB,WAAO,KAAK7B,UAAL,IAAmB,CAACwB,gBAAgB,CAAC7B,QAAjB,CAA0B,IAA1B,CAA3B;EACD;;EAEDe,EAAAA,oBAAoB,CAACjJ,KAAD,EAAQ;EAC1B,QAAI,KAAKoK,eAAL,EAAJ,EAA4B;EAC1B;EACD;;EAED,SAAKC,cAAL,CAAoBrK,KAApB;EACD;;EAEDqK,EAAAA,cAAc,CAACrK,KAAD,EAAQ;EAErB;;EAED,SAAOsK,UAAP,GAAoB;EAClB,WAAO,KAAKzR,IAAZ;EACD;;EAED,SAAOwK,YAAP,CAAoBkH,cAApB,EAAoChM,OAApC,EAA6C;EAC3C,WAAO,IAAIgM,cAAJ,CAAmBhM,OAAnB,CAAP;EACD;;EAtL4B;;EChB/B;;;;;AAMA;EAGA,MAAMiM,OAAO,GAAG,CAAC,MAAM;EACrB;;;;;EAMA,QAAM/R,IAAI,GAAG,SAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzBkH,IAAAA,YAAY,EAAE,IAFW;EAGzBC,IAAAA,KAAK,EAAE;EAHkB,GAA3B;EAKA,QAAMC,qBAAqB,GAAG,EAA9B;EAGA;;;;;;EAMA,QAAMH,OAAN,SAAsBrC,SAAtB,CAAgC;EAC9B;;;;EAIAvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAM9F,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,IAAzE,EAA+E,KAA/E;EAEA,WAAKC,GAAL,GAAW,IAAX;EACA,WAAKC,aAAL,GAAqB,IAArB;EAEA,WAAKC,SAAL,CAAevK,KAAK,CAAC3D,cAArB;EAEAmO,MAAAA,UAAU,CAAC,MAAM;EACf,aAAKC,UAAL;EACD,OAFS,EAEP,KAAKzM,OAAL,CAAakM,YAFN,CAAV;EAGD;;EAEDQ,IAAAA,SAAS,GAAG;EACV,aAAO,KAAKC,MAAZ;EACD;;EAEDJ,IAAAA,SAAS,CAACI,MAAD,EAAS;EAChB,WAAKA,MAAL,GAAcA,MAAd;EACD;;EAEDC,IAAAA,YAAY,GAAG;EACb,WAAKP,GAAL,GAAW,IAAIQ,cAAJ,EAAX;EACA,WAAKR,GAAL,CAASS,OAAT,GAAmB,KAAnB;EAEA,YAAMC,GAAG,GAAI,kBAAiB,IAAIC,IAAJ,GAAWC,OAAX,EAAqB,EAAnD;EAEA,WAAK3B,YAAL,CAAkBtJ,KAAK,CAACzD,oBAAxB,EAA8C;EAAE2O,QAAAA,IAAI,EAAE,IAAIF,IAAJ;EAAR,OAA9C,EAAoE,KAApE;EAEA,WAAKX,GAAL,CAASc,IAAT,CAAc,MAAd,EAAsBJ,GAAtB,EAA2B,IAA3B;EAEA,WAAKV,GAAL,CAASe,OAAT,GAAmB,KAAKpN,OAAL,CAAamM,KAAb,GAAqB,CAAxC;;EACA,WAAKE,GAAL,CAASgB,SAAT,GAAqB,MAAM;EACzB,aAAKhB,GAAL,CAASiB,KAAT;EACA,aAAKjB,GAAL,GAAW,IAAX;EACD,OAHD;;EAKA,WAAKA,GAAL,CAASkB,MAAT,GAAkB,MAAM;EACtB,aAAKC,IAAL;EACD,OAFD;;EAGA,WAAKnB,GAAL,CAASoB,OAAT,GAAmB,MAAM;EACvB,aAAKC,MAAL;EACD,OAFD;;EAIA,UAAI;EACF,aAAKrB,GAAL,CAASsB,IAAT;EACD,OAFD,CAEE,OAAOC,CAAP,EAAU;EACV,aAAKF,MAAL;EACD;EACF;;EAEDF,IAAAA,IAAI,GAAG;EACL,WAAKlC,YAAL,CAAkBtJ,KAAK,CAACxD,4BAAxB,EAAsD;EAAE0O,QAAAA,IAAI,EAAE,IAAIF,IAAJ;EAAR,OAAtD,EAA4E,KAA5E;;EAEA,UAAI,KAAKN,SAAL,OAAqB1K,KAAK,CAAC3D,cAA/B,EAA+C;EAC7C,aAAKiN,YAAL,CAAkBtJ,KAAK,CAAC3D,cAAxB,EAAwC;EAAE6O,UAAAA,IAAI,EAAE,IAAIF,IAAJ;EAAR,SAAxC,EAA8D,KAA9D;EACD;;EAED,WAAKT,SAAL,CAAevK,KAAK,CAAC3D,cAArB;EACD;;EAEDqP,IAAAA,MAAM,GAAG;EACP,WAAKpC,YAAL,CAAkBtJ,KAAK,CAACvD,4BAAxB,EAAsD;EAAEyO,QAAAA,IAAI,EAAE,IAAIF,IAAJ;EAAR,OAAtD,EAA4E,KAA5E;;EAEA,UAAI,KAAKN,SAAL,OAAqB1K,KAAK,CAAC1D,eAA/B,EAAgD;EAC9C,aAAKgN,YAAL,CAAkBtJ,KAAK,CAAC1D,eAAxB,EAAyC;EAAE4O,UAAAA,IAAI,EAAE,IAAIF,IAAJ;EAAR,SAAzC,EAA+D,KAA/D;EACD;;EAED,WAAKT,SAAL,CAAevK,KAAK,CAAC1D,eAArB;EACD;;EAEDmO,IAAAA,UAAU,GAAG;EACX,WAAKoB,SAAL;EAEA,WAAKjB,YAAL;EAEA,WAAKN,aAAL,GAAqBwB,WAAW,CAAC,MAAM;EACrC,aAAKlB,YAAL;EACD,OAF+B,EAE7B,KAAK5M,OAAL,CAAamM,KAFgB,CAAhC;EAGD;;EAED0B,IAAAA,SAAS,GAAG;EACV,UAAI,KAAKvB,aAAL,KAAuB,IAA3B,EAAiC;EAC/ByB,QAAAA,aAAa,CAAC,KAAKzB,aAAN,CAAb;EACA,aAAKA,aAAL,GAAqB,IAArB;EACD;EACF;;EAED,WAAOxH,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmBmH,OAAnB,EAA4BjM,OAA5B,CAAP;EACD;;EA/F6B;;EAkGhC,SAAOiM,OAAP;EACD,CA1He,GAAhB;;ECTA;;;;;AAKA;EAKA,MAAM+B,KAAK,GAAG,CAAE7F,CAAD,IAAO;EACpB;;;;;EAMA,QAAMjO,IAAI,GAAG,OAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzBiJ,IAAAA,IAAI,EAAE;EAFmB,GAA3B;EAIA,QAAM7B,qBAAqB,GAAG,CAC5B,MAD4B,CAA9B;EAIA;;;;;;EAMA,QAAM4B,KAAN,SAAoBpE,SAApB,CAA8B;EAE5BvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAM9F,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,KAAzE,EAAgF,KAAhF;EACA,WAAK8B,YAAL,GAAoB,KAApB;EACD;;EAEDC,IAAAA,IAAI,GAAG;EACL,UAAI,KAAKD,YAAT,EAAuB;EACrB,eAAO,KAAP;EACD;;EAED,UAAI,KAAKlO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,KAAmD,KAAKmL,UAAL,OAAsB,CAA7E,EAAgF;EAC9E,eAAO,KAAP;EACD;;EAED,WAAKF,YAAL,GAAoB,IAApB;EAEA,WAAK5C,YAAL,CAAkBtJ,KAAK,CAACtD,IAAxB;;EAEA,YAAM2P,MAAM,GAAG,MAAM;EACnB,aAAK/C,YAAL,CAAkBtJ,KAAK,CAACrD,KAAxB;;EAEA,YAAI,KAAKqB,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAJ,EAAqD;EACnD,eAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,MAAtC;EACD;;EAED,aAAKxC,OAAL,CAAagF,OAAb,CAAqB9B,mBAArB,CAAyClB,KAAK,CAAC3C,cAA/C,EAA+DgP,MAA/D;EACA,aAAKH,YAAL,GAAoB,KAApB;EACD,OATD;;EAWA,UAAI,KAAKlO,OAAL,CAAaiO,IAAb,IAAqB,CAAC,KAAKjO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAA1B,EAA2E;EACzE,aAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC;EACD;;EAED,WAAK7C,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC;EAEA,WAAK7C,OAAL,CAAagF,OAAb,CAAqBlI,gBAArB,CAAsCkF,KAAK,CAAC3C,cAA5C,EAA4DgP,MAA5D;;EAEA,UAAI,KAAKrO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAJ,EAAqD;EACnD,aAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,MAAtC;EACD;;EAED,UAAI,CAAC,KAAKxC,OAAL,CAAaiO,IAAlB,EAAwB;EACtBI,QAAAA,MAAM;EACP;EACF;;EAEDD,IAAAA,UAAU,GAAG;EAAA,oCACS3U,MAAM,CAAC6U,gBAAP,CAAwB,KAAKtO,OAAL,CAAagF,OAArC,CADT;EAAA,YACHuJ,OADG,yBACHA,OADG;;EAEX,aAAOC,UAAU,CAACD,OAAD,CAAjB;EACD;;EAEDE,IAAAA,IAAI,GAAG;EACL,UAAI,KAAKP,YAAT,EAAuB;EACrB,eAAO,KAAP;EACD;;EAED,UAAI,KAAKE,UAAL,OAAsB,CAA1B,EAA6B;EAC3B,eAAO,KAAP;EACD;;EAED,WAAKF,YAAL,GAAoB,IAApB;EACA,WAAK5C,YAAL,CAAkBtJ,KAAK,CAACpD,IAAxB;;EAEA,YAAM8P,MAAM,GAAG,MAAM;EACnB,aAAKpD,YAAL,CAAkBtJ,KAAK,CAACnD,MAAxB;EACA,aAAKmB,OAAL,CAAagF,OAAb,CAAqB9B,mBAArB,CAAyClB,KAAK,CAAC3C,cAA/C,EAA+DqP,MAA/D;EACA,aAAKR,YAAL,GAAoB,KAApB;EACD,OAJD;;EAMA,UAAI,KAAKlO,OAAL,CAAaiO,IAAb,IAAqB,CAAC,KAAKjO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAA1B,EAA2E;EACzE,aAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC;EACD;;EAED,WAAK7C,OAAL,CAAagF,OAAb,CAAqBlI,gBAArB,CAAsCkF,KAAK,CAAC3C,cAA5C,EAA4DqP,MAA5D;;EAEA,UAAI,CAAC,KAAK1O,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAL,EAAsD;EACpD,aAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC;EACD;;EAED,UAAI,KAAK7C,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAJ,EAAqD;EACnD,aAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,MAAtC;EACD;;EAED,UAAI,CAAC,KAAKxC,OAAL,CAAaiO,IAAlB,EAAwB;EACtBS,QAAAA,MAAM;EACP;EACF;;EAED,WAAO3C,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmBkJ,KAAnB,EAA0BhO,OAA1B,CAAP;EACD;;EAhG2B;EAmG9B;;;;;;;EAKAkI,EAAAA,kBAAkB,CAACC,CAAD,EAAIjO,IAAJ,EAAU8T,KAAV,CAAlB;EAEA;;;;;;EAKA,QAAMW,UAAU,GAAG,EAAnB;EAEA,QAAMC,MAAM,GAAGhV,QAAQ,CAAC8B,gBAAT,CAA2B,IAAGxB,IAAK,EAAnC,CAAf;;EAEA,MAAI0U,MAAJ,EAAY;EACVA,IAAAA,MAAM,CAACrT,OAAP,CAAgByJ,OAAD,IAAa;EAC1B,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;EAEA2J,MAAAA,UAAU,CAAC9S,IAAX,CAAgBmS,KAAK,CAAClJ,YAAN,CAAmB+F,MAAnB,CAAhB;EACD,KALD;EAMD;;EAEDjR,EAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,UAAMyC,MAAM,GAAG+D,gBAAgB,CAACxG,KAAK,CAACyC,MAAP,EAAe,cAAf,CAA/B;;EACA,QAAI,CAACA,MAAL,EAAa;EACX;EACD;;EAED,UAAM2K,cAAc,GAAG3K,MAAM,CAAC/B,YAAP,CAAoB,cAApB,CAAvB;;EAEA,QAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAAzC,EAA+C;EAC7C,YAAM4U,KAAK,GAAGhH,iBAAiB,CAACrG,KAAK,CAACyC,MAAP,EAAehK,IAAf,CAA/B;EACA,YAAMgQ,EAAE,GAAG4E,KAAK,CAAC3M,YAAN,CAAmB,IAAnB,CAAX;EACA,YAAMkH,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACuB,UAAF,GAAe5I,YAAf,CAA4B,IAA5B,MAAsC+H,EAA3D,CAAlB;;EAEA,UAAI,CAACb,SAAL,EAAgB;EACd;EACD;;EAEDA,MAAAA,SAAS,CAACoF,IAAV;EACD;EACF,GAnBD;EAqBA,SAAOT,KAAP;EACD,CAzKa,EAyKXvU,MAAM,CAAC0O,CAAP,GAAW1O,MAAM,CAAC0O,CAAlB,GAAsB,IAzKX,CAAd;;ECVA;;;;;AAKA;EAKA,MAAM4G,MAAM,GAAG,CAAE5G,CAAD,IAAO;EACrB;;;;;EAMA,QAAMjO,IAAI,GAAG,QAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAM6U,iBAAiB,GAAG,iBAA1B;EACA,QAAMtP,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzBiK,IAAAA,KAAK,EAAE,IAFkB;EAGzBC,IAAAA,OAAO,EAAE,IAHgB;EAIzBC,IAAAA,UAAU,EAAE,IAJa;EAKzBnG,IAAAA,IAAI,EAAE,IALmB;EAMzBoG,IAAAA,kBAAkB,EAAE,CAClB,EADkB;EAElB,MAFkB,CANK;EAUzBC,IAAAA,OAAO,EAAE,CACP;EACE5N,MAAAA,KAAK,EAAE,SADT;EAEEgE,MAAAA,IAAI,EAAE,IAFR;EAGE6J,MAAAA,OAAO,EAAE,IAHX;EAIEC,MAAAA,KAAK,EAAE;EAJT,KADO;EAVgB,GAA3B;EAmBA,QAAMnD,qBAAqB,GAAG,CAC5B,YAD4B,CAA9B;EAIA;;;;;;EAMA,QAAM2C,MAAN,SAAqBnF,SAArB,CAA+B;EAE7BvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAenF,QAAQ,GAAG,IAA1B,EAAgC;EACzC,YAAMX,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,IAAzE,EAA+E,IAA/E;EAEA,WAAKvR,QAAL,GAAgBA,QAAQ,IAAI,KAC5B,kDAD4B,GAE1B,4CAF0B,GAGxB,8BAHwB,GAItB,6BAJsB,GAKpB,gCALoB,GAMtB,QANsB,GAOtB,2BAPsB,GAQpB,SARoB,GAStB,QATsB,GAUtB,6BAVsB,GAWtB,QAXsB,GAYxB,QAZwB,GAa1B,QAb0B,GAc5B,QAdA;;EAgBA,UAAI,KAAKuP,cAAT,EAAyB;EACvB,aAAKoF,KAAL;EACD;EACF;;EAEDA,IAAAA,KAAK,GAAG;EACN,YAAMC,OAAO,GAAG7V,QAAQ,CAAC2D,aAAT,CAAuB,KAAvB,CAAhB;EAEAkS,MAAAA,OAAO,CAAChU,SAAR,GAAoB,KAAKZ,QAAzB;EAEA,WAAKmF,OAAL,CAAagF,OAAb,GAAuByK,OAAO,CAACC,UAA/B,CALM;;EAQN,UAAI,KAAK1P,OAAL,CAAaiP,KAAb,KAAuB,IAA3B,EAAiC;EAC/B,aAAKjP,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,eAAnC,EAAoDQ,SAApD,GAAgE,KAAKuE,OAAL,CAAaiP,KAA7E;EACD,OAVK;;;EAaN,UAAI,KAAKjP,OAAL,CAAakP,OAAb,KAAyB,IAA7B,EAAmC;EACjC,aAAKlP,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,cAAnC,EAAmDyU,UAAnD,CAA8DjU,SAA9D,GAA0E,KAAKuE,OAAL,CAAakP,OAAvF;EACD,OAFD,MAEO;EACL;EACA,aAAKS,cAAL;EACD,OAlBK;;;EAqBN,UAAI,KAAK3P,OAAL,CAAaqP,OAAb,KAAyB,IAAzB,IAAiChU,KAAK,CAACiM,OAAN,CAAc,KAAKtH,OAAL,CAAaqP,OAA3B,CAArC,EAA0E;EACxE,YAAI,KAAKrP,OAAL,CAAaqP,OAAb,CAAqB/K,MAArB,GAA8B,CAAlC,EAAqC;EACnC,eAAKtE,OAAL,CAAaqP,OAAb,CAAqB9T,OAArB,CAA8BqU,MAAD,IAAY;EACvC,iBAAK5P,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,gBAAnC,EAAqD4U,WAArD,CAAiE,KAAKC,WAAL,CAAiBF,MAAjB,CAAjE;EACD,WAFD;EAGD,SAJD,MAIO;EACL,eAAKG,YAAL;EACD;EACF,OARD,MAQO;EACL,aAAKA,YAAL;EACD;;EAEDnW,MAAAA,QAAQ,CAACoW,IAAT,CAAcH,WAAd,CAA0B,KAAK7P,OAAL,CAAagF,OAAvC;EAEA,WAAKwF,aAAL;EACD;;EAEDsF,IAAAA,WAAW,CAACG,UAAU,GAAG,EAAd,EAAkB;EAC3B,YAAML,MAAM,GAAGhW,QAAQ,CAAC2D,aAAT,CAAuB,QAAvB,CAAf;EACAqS,MAAAA,MAAM,CAAC/J,YAAP,CAAoB,MAApB,EAA4B,QAA5B;EACA+J,MAAAA,MAAM,CAAC/J,YAAP,CAAoB,OAApB,EAA6BoK,UAAU,CAACV,KAAX,IAAoB,KAAjD;EACAK,MAAAA,MAAM,CAAC/J,YAAP,CAAoB,YAApB,EAAkCoK,UAAU,CAACxO,KAA7C;EACAmO,MAAAA,MAAM,CAACnU,SAAP,GAAmBwU,UAAU,CAACxK,IAA9B;;EAEA,UAAIwK,UAAU,CAACX,OAAf,EAAwB;EACtBM,QAAAA,MAAM,CAAC/J,YAAP,CAAoB,cAApB,EAAoC3L,IAApC;EACD;;EAED,aAAO0V,MAAP;EACD;;EAEDM,IAAAA,aAAa,GAAG;EACd,YAAMC,QAAQ,GAAGvW,QAAQ,CAAC2D,aAAT,CAAuB,KAAvB,CAAjB;EACA4S,MAAAA,QAAQ,CAACtK,YAAT,CAAsB,SAAtB,EAAiC,KAAKqE,EAAtC;EACAiG,MAAAA,QAAQ,CAAC5N,SAAT,CAAmBM,GAAnB,CAAuBmM,iBAAvB;EAEApV,MAAAA,QAAQ,CAACoW,IAAT,CAAcH,WAAd,CAA0BM,QAA1B;EACD;;EAEDC,IAAAA,WAAW,GAAG;EACZ,aAAOxW,QAAQ,CAACqB,aAAT,CAAwB,IAAG+T,iBAAkB,aAAY,KAAK9E,EAAG,IAAjE,CAAP;EACD;;EAEDyF,IAAAA,cAAc,GAAG;EACf,WAAK3P,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,cAAnC,EAAmDoV,WAAnD,CAA+D,KAAKrQ,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,cAAnC,EAAmDyU,UAAlH;EACD;;EAEDK,IAAAA,YAAY,GAAG;EACb,YAAMO,MAAM,GAAG,KAAKtQ,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,gBAAnC,CAAf;EACA,WAAK+E,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,iBAAnC,EAAsDoV,WAAtD,CAAkEC,MAAlE;EACD;;EAEDC,IAAAA,MAAM,GAAG;EACP,YAAMC,aAAa,GAAG/W,MAAM,CAAC6U,gBAAP,CAAwB,KAAKtO,OAAL,CAAagF,OAArC,CAAtB;EACA,YAAMyL,MAAM,GAAGD,aAAa,CAACC,MAAd,CAAqBhU,KAArB,CAA2B,CAA3B,EAA8B+T,aAAa,CAACC,MAAd,CAAqBnM,MAArB,GAA8B,CAA5D,CAAf;EAEA,YAAMoM,GAAG,GAAIjX,MAAM,CAACkX,WAAP,GAAqB,CAAtB,GAA4BF,MAAM,GAAG,CAAjD;EACA,WAAKzQ,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2B2S,GAA3B,GAAkC,GAAEA,GAAI,IAAxC;EACD;;EAEDvC,IAAAA,IAAI,GAAG;EACL,UAAI,KAAKnO,OAAL,CAAagF,OAAb,KAAyB,IAA7B,EAAmC;EACjC;EACA,aAAKwK,KAAL;EACD;;EAED,UAAI,KAAKxP,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAJ,EAAqD;EACnD,eAAO,KAAP;EACD,OARI;;;EAWLuJ,MAAAA,UAAU,CAAC,MAAM;EACf,aAAKlB,YAAL,CAAkBtJ,KAAK,CAACtD,IAAxB;EACA,aAAKwR,aAAL,GAFe;;EAKf,aAAKU,YAAL;;EAEA,cAAMC,OAAO,GAAG,MAAM;EACpB,eAAKvF,YAAL,CAAkBtJ,KAAK,CAACrD,KAAxB;EACA,eAAKqB,OAAL,CAAagF,OAAb,CAAqB9B,mBAArB,CAAyClB,KAAK,CAAC3C,cAA/C,EAA+DwR,OAA/D;EACD,SAHD;;EAKA,aAAK7Q,OAAL,CAAagF,OAAb,CAAqBlI,gBAArB,CAAsCkF,KAAK,CAAC3C,cAA5C,EAA4DwR,OAA5D;EAEA,aAAK7Q,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC;EAEA,aAAK0N,MAAL;EACD,OAjBS,EAiBP,EAjBO,CAAV;EAmBA,aAAO,IAAP;EACD;;EAEDzE,IAAAA,cAAc,CAACrK,KAAD,EAAQ;EACpB;EACA,UAAIA,KAAK,CAACuH,IAAN,KAAe,OAAnB,EAA4B;EAC1B,YAAI,KAAKhJ,OAAL,CAAaoP,kBAAb,CAAgCvR,IAAhC,CAAqCiT,CAAC,IAAIA,CAAC,KAAKrP,KAAK,CAACsP,OAAtD,CAAJ,EAAoE;EAClE,eAAKtC,IAAL;EACD;;EACD;EACD,OAPmB;;;EAUpB,UAAIhN,KAAK,CAACuH,IAAN,KAAehH,KAAK,CAACjD,KAAzB,EAAgC;EAC9B;EACA,aAAK0P,IAAL;EACA;EACD,OAdmB;;;EAiBpB,UAAIhN,KAAK,CAACuH,IAAN,KAAe,OAAnB,EAA4B;EAC1B,cAAM3P,SAAS,GAAGoI,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,YAA1B,CAAlB;;EAEA,YAAI9I,SAAJ,EAAe;EACb,eAAKiS,YAAL,CAAkBjS,SAAlB;EACD;;EAED,YAAIoI,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,cAA1B,MAA8CjI,IAAlD,EAAwD;EACtD,eAAKuU,IAAL;EACD;EACF;EACF;;EAEDA,IAAAA,IAAI,GAAG;EACL,UAAI,CAAC,KAAKzO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAL,EAAsD;EACpD,eAAO,KAAP;EACD;;EAED,WAAKqI,YAAL,CAAkBtJ,KAAK,CAACpD,IAAxB;EAEA,WAAKoS,YAAL;EAEA,WAAKhR,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC;EACA,WAAK7C,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,MAAtC;EAEA,YAAM2N,QAAQ,GAAG,KAAKC,WAAL,EAAjB;;EAEA,YAAMa,QAAQ,GAAG,MAAM;EACrBrX,QAAAA,QAAQ,CAACoW,IAAT,CAAcK,WAAd,CAA0BF,QAA1B;EAEA,aAAKnQ,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,MAAtC;EAEA,aAAK8I,YAAL,CAAkBtJ,KAAK,CAACnD,MAAxB;EAEAsR,QAAAA,QAAQ,CAACjN,mBAAT,CAA6BlB,KAAK,CAAC3C,cAAnC,EAAmD4R,QAAnD,EAPqB;;EAUrB,YAAI,KAAK7G,cAAT,EAAyB;EACvBxQ,UAAAA,QAAQ,CAACoW,IAAT,CAAcK,WAAd,CAA0B,KAAKrQ,OAAL,CAAagF,OAAvC;EACA,eAAKhF,OAAL,CAAagF,OAAb,GAAuB,IAAvB;EACD;EACF,OAdD;;EAgBAmL,MAAAA,QAAQ,CAACrT,gBAAT,CAA0BkF,KAAK,CAAC3C,cAAhC,EAAgD4R,QAAhD;EACAd,MAAAA,QAAQ,CAAC5N,SAAT,CAAmBM,GAAnB,CAAuB,SAAvB;EAEA,aAAO,IAAP;EACD;;EAED+N,IAAAA,YAAY,GAAG;EACb,YAAMvB,OAAO,GAAG,KAAKrP,OAAL,CAAagF,OAAb,CAAqBtJ,gBAArB,CAAsC,uCAAtC,CAAhB;;EACA,UAAI2T,OAAJ,EAAa;EACXhU,QAAAA,KAAK,CAACC,IAAN,CAAW+T,OAAX,EAAoB9T,OAApB,CAA4BqU,MAAM,IAAI,KAAK1E,eAAL,CAAqB;EAAEhH,UAAAA,MAAM,EAAE0L,MAAV;EAAkBnO,UAAAA,KAAK,EAAE;EAAzB,SAArB,CAAtC;EACD,OAJY;EAOb;EACA;;;EACA,UAAI,KAAKzB,OAAL,CAAamP,UAAjB,EAA6B;EAC3B,cAAMgB,QAAQ,GAAG,KAAKC,WAAL,EAAjB;EACA,aAAKlF,eAAL,CAAqB;EAAEhH,UAAAA,MAAM,EAAEiM,QAAV;EAAoB1O,UAAAA,KAAK,EAAEO,KAAK,CAACjD;EAAjC,SAArB;EACA,aAAKmM,eAAL,CAAqB;EAAEhH,UAAAA,MAAM,EAAEtK,QAAV;EAAoB6H,UAAAA,KAAK,EAAE;EAA3B,SAArB;EACD;EACF;;EAEDuP,IAAAA,YAAY,GAAG;EACb,YAAM3B,OAAO,GAAG,KAAKrP,OAAL,CAAagF,OAAb,CAAqBtJ,gBAArB,CAAsC,uCAAtC,CAAhB;;EACA,UAAI2T,OAAJ,EAAa;EACXhU,QAAAA,KAAK,CAACC,IAAN,CAAW+T,OAAX,EAAoB9T,OAApB,CAA4BqU,MAAM,IAAI,KAAKxE,iBAAL,CAAuB;EAAElH,UAAAA,MAAM,EAAE0L,MAAV;EAAkBnO,UAAAA,KAAK,EAAE;EAAzB,SAAvB,CAAtC;EACD;;EAED,UAAI,KAAKzB,OAAL,CAAamP,UAAjB,EAA6B;EAC3B,cAAMgB,QAAQ,GAAG,KAAKC,WAAL,EAAjB;EACA,aAAKhF,iBAAL,CAAuB;EAAElH,UAAAA,MAAM,EAAEiM,QAAV;EAAoB1O,UAAAA,KAAK,EAAEO,KAAK,CAACjD;EAAjC,SAAvB;EACA,aAAKqM,iBAAL,CAAuB;EAAElH,UAAAA,MAAM,EAAEtK,QAAV;EAAoB6H,UAAAA,KAAK,EAAE;EAA3B,SAAvB;EACD;EACF;;EAED,WAAOsK,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmBiK,MAAnB,EAA2B/O,OAA3B,CAAP;EACD;;EAjP4B;EAoP/B;;;;;;;EAKAkI,EAAAA,kBAAkB,CAACC,CAAD,EAAIjO,IAAJ,EAAU6U,MAAV,CAAlB;EAEA;;;;;;EAKA,QAAMJ,UAAU,GAAG,EAAnB;EAEA,QAAMuC,OAAO,GAAGtX,QAAQ,CAAC8B,gBAAT,CAA2B,IAAGxB,IAAK,EAAnC,CAAhB;;EACA,MAAIgX,OAAJ,EAAa;EACX7V,IAAAA,KAAK,CAACC,IAAN,CAAW4V,OAAX,EAAoB3V,OAApB,CAA6ByJ,OAAD,IAAa;EACvC,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;EAEA2J,MAAAA,UAAU,CAAC9S,IAAX,CAAgB;EAAEmJ,QAAAA,OAAF;EAAWmM,QAAAA,MAAM,EAAE,IAAIpC,MAAJ,CAAWlE,MAAX;EAAnB,OAAhB;EACD,KALD;EAMD;;EAEDjR,EAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,UAAMoN,cAAc,GAAGpN,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,CAAvB;;EACA,QAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAAzC,EAA+C;EAC7C,YAAMgQ,EAAE,GAAGzI,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,CAAX;EACA,YAAM6C,OAAO,GAAGpL,QAAQ,CAACqB,aAAT,CAAuBiP,EAAvB,CAAhB;EAEA,YAAMb,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACxE,OAAF,KAAcA,OAAnC,CAAlB;;EAEA,UAAI,CAACqE,SAAL,EAAgB;EACd;EACD,OAR4C;;;EAW7C5H,MAAAA,KAAK,CAACyC,MAAN,CAAakN,IAAb;EAEA/H,MAAAA,SAAS,CAAC8H,MAAV,CAAiBhD,IAAjB;EACD;EACF,GAjBD;EAmBA,SAAOY,MAAP;EACD,CAvUc,EAuUZtV,MAAM,CAAC0O,CAAP,GAAW1O,MAAM,CAAC0O,CAAlB,GAAsB,IAvUV,CAAf;;ECVA;;;;;AAKA;EAGA,MAAMkJ,MAAM,GAAG,CAAC,MAAM;EAEpB;;;;;EAMA,QAAMnX,IAAI,GAAG,QAAb;EACA,QAAMwF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzBiK,IAAAA,KAAK,EAAE,IAFkB;EAGzBC,IAAAA,OAAO,EAAE,IAHgB;EAIzBC,IAAAA,UAAU,EAAE,IAJa;EAKzBnG,IAAAA,IAAI,EAAE9O,IALmB;EAMzBmV,IAAAA,OAAO,EAAE,CACP;EACE5N,MAAAA,KAAK,EAAE,QADT;EAEEgE,MAAAA,IAAI,EAAE,QAFR;EAGE6J,MAAAA,OAAO,EAAE,IAHX;EAIEC,MAAAA,KAAK,EAAE;EAJT,KADO,EAOP;EACE9N,MAAAA,KAAK,EAAE,SADT;EAEEgE,MAAAA,IAAI,EAAE,IAFR;EAGE6J,MAAAA,OAAO,EAAE,IAHX;EAIEC,MAAAA,KAAK,EAAE;EAJT,KAPO;EANgB,GAA3B;EAqBA,QAAMnD,qBAAqB,GAAG,CAC5B,YAD4B,CAA9B;EAIA;;;;;;EAMA,QAAMiF,MAAN,SAAqBtC,MAArB,CAA4B;EAE1B1U,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAMnF,QAAQ,GAAG,KACjB,kDADiB,GAEf,4CAFe,GAGb,8BAHa,GAIX,6BAJW,GAKT,gCALS,GAMX,QANW,GAOX,2BAPW,GAQT,SARS,GAST,mDATS,GAUX,QAVW,GAWX,6BAXW,GAYX,QAZW,GAab,QAba,GAcf,QAde,GAejB,QAfA;;EAiBA,UAAI,CAACQ,KAAK,CAACiM,OAAN,CAActH,OAAO,CAACqP,OAAtB,CAAL,EAAqC;EACnCrP,QAAAA,OAAO,CAACqP,OAAR,GAAkB3P,kBAAkB,CAAC2P,OAArC;EACD;;EAED,YAAMrP,OAAN,EAAenF,QAAf;EACD;;EAEDsT,IAAAA,IAAI,GAAG;EACL,YAAMA,IAAN;EACA,WAAKmD,gBAAL;EACD;;EAED7C,IAAAA,IAAI,GAAG;EACL,YAAMA,IAAN;EACA,WAAK8C,gBAAL;EACD;;EAEDC,IAAAA,QAAQ,GAAG;EACT,aAAO,KAAKxR,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,eAAnC,CAAP;EACD;;EAEDqW,IAAAA,gBAAgB,GAAG;EACjB,WAAKpG,eAAL,CAAqB;EAAEhH,QAAAA,MAAM,EAAE,KAAKsN,QAAL,EAAV;EAA2B/P,QAAAA,KAAK,EAAE;EAAlC,OAArB;EACD;;EAED8P,IAAAA,gBAAgB,GAAG;EACjB,WAAKnG,iBAAL,CAAuB;EAAElH,QAAAA,MAAM,EAAE,KAAKsN,QAAL,EAAV;EAA2B/P,QAAAA,KAAK,EAAE;EAAlC,OAAvB;EACD;;EAEDqK,IAAAA,cAAc,CAACrK,KAAD,EAAQ;EACpB,UAAIA,KAAK,CAACyC,MAAN,KAAiB,KAAKsN,QAAL,EAArB,EAAsC;EACpC;EACD;;EAED,YAAM1F,cAAN,CAAqBrK,KAArB;EACD;;EAEDgQ,IAAAA,aAAa,CAACvL,KAAK,GAAG,EAAT,EAAa;EACxB,WAAKsL,QAAL,GAAgBtL,KAAhB,GAAwBA,KAAxB;EACD;;EAEDwL,IAAAA,aAAa,GAAG;EACd,aAAO,KAAKF,QAAL,GAAgBtL,KAAvB;EACD;;EAED,WAAO6F,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,IAAIqR,MAAJ,CAAWrR,OAAX,CAAP;EACD;;EAvEyB;EA0E5B;;;;;;;EAKA,QAAM2O,UAAU,GAAG,EAAnB;EACA,QAAMuC,OAAO,GAAGtX,QAAQ,CAAC8B,gBAAT,CAA2B,IAAGqT,MAAM,CAAChD,UAAP,EAAoB,EAAlD,CAAhB;;EAEA,MAAImF,OAAJ,EAAa;EACX7V,IAAAA,KAAK,CAACC,IAAN,CAAW4V,OAAX,EAAoB3V,OAApB,CAA6ByJ,OAAD,IAAa;EACvC,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;;EAEA,UAAI6F,MAAM,CAAC7B,IAAP,KAAgB9O,IAApB,EAA0B;EACxB;EACAyU,QAAAA,UAAU,CAAC9S,IAAX,CAAgB,IAAIwV,MAAJ,CAAWxG,MAAX,CAAhB;EACD;EACF,KARD;EASD;;EAEDjR,EAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,UAAMoN,cAAc,GAAGpN,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,CAAvB;;EACA,QAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAAzC,EAA+C;EAC7C,YAAMgQ,EAAE,GAAGzI,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,CAAX;EACA,YAAM6C,OAAO,GAAGpL,QAAQ,CAACqB,aAAT,CAAuBiP,EAAvB,CAAhB;EAEA,YAAMb,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACxE,OAAF,KAAcA,OAAnC,CAAlB;;EAEA,UAAI,CAACqE,SAAL,EAAgB;EACd;EACD,OAR4C;;;EAW7C5H,MAAAA,KAAK,CAACyC,MAAN,CAAakN,IAAb;EAEA/H,MAAAA,SAAS,CAAC8H,MAAV,CAAiBhD,IAAjB;EACD;EACF,GAjBD;EAmBA,SAAOkD,MAAP;EACD,CA1Jc,GAAf;;ECRA;;;;;AAKA;EAGA,MAAMM,OAAO,GAAG,CAAC,MAAM;EAErB;;;;;EAMA,QAAMzX,IAAI,GAAG,SAAb;EACA,QAAMwF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzBiK,IAAAA,KAAK,EAAE,IAFkB;EAGzBC,IAAAA,OAAO,EAAE,IAHgB;EAIzBC,IAAAA,UAAU,EAAE,IAJa;EAKzBnG,IAAAA,IAAI,EAAE9O,IALmB;EAMzBmV,IAAAA,OAAO,EAAE,CACP;EACE5N,MAAAA,KAAK,EAAE,QADT;EAEEgE,MAAAA,IAAI,EAAE,QAFR;EAGE6J,MAAAA,OAAO,EAAE,IAHX;EAIEC,MAAAA,KAAK,EAAE;EAJT,KADO,EAOP;EACE9N,MAAAA,KAAK,EAAE,SADT;EAEEgE,MAAAA,IAAI,EAAE,IAFR;EAGE6J,MAAAA,OAAO,EAAE,IAHX;EAIEC,MAAAA,KAAK,EAAE;EAJT,KAPO;EANgB,GAA3B;EAqBA,QAAMnD,qBAAqB,GAAG,CAC5B,YAD4B,CAA9B;EAIA;;;;;;EAMA,QAAMuF,OAAN,SAAsB5C,MAAtB,CAA6B;EAE3B1U,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAMnF,QAAQ,GAAG,KACjB,kDADiB,GAEf,4CAFe,GAGb,8BAHa,GAIX,6BAJW,GAKT,gCALS,GAMX,QANW,GAOX,2BAPW,GAQT,SARS,GASX,QATW,GAUX,6BAVW,GAWX,QAXW,GAYb,QAZa,GAaf,QAbe,GAcjB,QAdA;;EAgBA,UAAI,CAACQ,KAAK,CAACiM,OAAN,CAActH,OAAO,CAACqP,OAAtB,CAAL,EAAqC;EACnCrP,QAAAA,OAAO,CAACqP,OAAR,GAAkB3P,kBAAkB,CAAC2P,OAArC;EACD;;EAED,YAAMrP,OAAN,EAAenF,QAAf;EACD;;EAED,WAAOkR,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,IAAI2R,OAAJ,CAAY3R,OAAZ,CAAP;EACD;;EAhC0B;EAmC7B;;;;;;;EAKA,QAAM2O,UAAU,GAAG,EAAnB;EACA,QAAMuC,OAAO,GAAGtX,QAAQ,CAAC8B,gBAAT,CAA2B,IAAGqT,MAAM,CAAChD,UAAP,EAAoB,EAAlD,CAAhB;;EAEA,MAAImF,OAAJ,EAAa;EACX7V,IAAAA,KAAK,CAACC,IAAN,CAAW4V,OAAX,EAAoB3V,OAApB,CAA6ByJ,OAAD,IAAa;EACvC,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;;EAEA,UAAI6F,MAAM,CAAC7B,IAAP,KAAgB9O,IAApB,EAA0B;EACxB;EACAyU,QAAAA,UAAU,CAAC9S,IAAX,CAAgB,IAAI8V,OAAJ,CAAY9G,MAAZ,CAAhB;EACD;EACF,KARD;EASD;;EAEDjR,EAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,UAAMoN,cAAc,GAAGpN,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,CAAvB;;EACA,QAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAAzC,EAA+C;EAC7C,YAAMgQ,EAAE,GAAGzI,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,CAAX;EACA,YAAM6C,OAAO,GAAGpL,QAAQ,CAACqB,aAAT,CAAuBiP,EAAvB,CAAhB;EAEA,YAAMb,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACxE,OAAF,KAAcA,OAAnC,CAAlB;;EAEA,UAAI,CAACqE,SAAL,EAAgB;EACd;EACD,OAR4C;;;EAW7C5H,MAAAA,KAAK,CAACyC,MAAN,CAAakN,IAAb;EAEA/H,MAAAA,SAAS,CAAC8H,MAAV,CAAiBhD,IAAjB;EACD;EACF,GAjBD;EAmBA,SAAOwD,OAAP;EACD,CAnHe,GAAhB;;ECRA;;;;;AAKA;EAGA,MAAMC,MAAM,GAAG,CAAEzJ,CAAD,IAAO;EACrB;;;;;EAMA,QAAMjO,IAAI,GAAG,QAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzB6M,IAAAA,KAAK,EAAE,IAFkB;EAGzBC,IAAAA,IAAI,EAAE;EAHmB,GAA3B;EAKA,QAAM1F,qBAAqB,GAAG,EAA9B;EAEA;;;;;;EAMA,QAAMwF,MAAN,SAAqBhI,SAArB,CAA+B;EAE7BvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAM9F,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,KAAzE,EAAgF,KAAhF,EADwB;;EAIxB,YAAM2F,aAAa,GAAG,KAAKC,UAAL,EAAtB;;EACA,UAAI,OAAO,KAAKhS,OAAL,CAAa6R,KAApB,KAA8B,QAA9B,IACC,CAACE,aAAa,CAACxP,SAAd,CAAwBU,QAAxB,CAAkC,SAAQ,KAAKjD,OAAL,CAAa6R,KAAM,EAA7D,CADN,EACuE;EACrEE,QAAAA,aAAa,CAACxP,SAAd,CAAwBM,GAAxB,CAA6B,SAAQ,KAAK7C,OAAL,CAAa6R,KAAM,EAAxD;EACD;;EAED,WAAKI,UAAL,GAAkB,KAAKjS,OAAL,CAAa8R,IAAb,KAAsB,IAAxC;EACD;;EAEDI,IAAAA,aAAa,GAAG;EACd,UAAI,CAAC,KAAKD,UAAV,EAAsB;EACpB,cAAMH,IAAI,GAAG,KAAK9R,OAAL,CAAagF,OAAb,CAAqBmN,qBAArB,EAAb;EACA,eAAOL,IAAI,CAACrB,MAAZ;EACD;;EAED,aAAO,KAAKzQ,OAAL,CAAa8R,IAApB;EACD;;EAEDE,IAAAA,UAAU,GAAG;EACX,aAAO,KAAKhS,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,iBAAnC,CAAP;EACD;;EAEDkT,IAAAA,IAAI,GAAG;EACL,UAAI,KAAKnO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAJ,EAAqD;EACnD,aAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,MAAtC;EACD;;EAED,YAAMsP,IAAI,GAAG,KAAKI,aAAL,EAAb;EACA,WAAKlS,OAAL,CAAa8R,IAAb,GAAoBA,IAApB;;EAEA,UAAI,KAAKG,UAAT,EAAqB;EACnB,aAAKjS,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2BqU,KAA3B,GAAoC,GAAE,KAAKpS,OAAL,CAAa8R,IAAK,IAAxD;EACA,aAAK9R,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2B0S,MAA3B,GAAqC,GAAE,KAAKzQ,OAAL,CAAa8R,IAAK,IAAzD;EAEA,cAAMC,aAAa,GAAG,KAAKC,UAAL,EAAtB;EACAD,QAAAA,aAAa,CAAChU,KAAd,CAAoBqU,KAApB,GAA6B,GAAE,KAAKpS,OAAL,CAAa8R,IAAK,IAAjD;EACAC,QAAAA,aAAa,CAAChU,KAAd,CAAoB0S,MAApB,GAA8B,GAAE,KAAKzQ,OAAL,CAAa8R,IAAK,IAAlD;EACD;;EAED,aAAO,IAAP;EACD;;EAEDO,IAAAA,OAAO,CAACC,cAAc,GAAG,IAAlB,EAAwB;EAC7B,UAAIA,cAAJ,EAAoB;EAClB,aAAKnE,IAAL;EACD,OAFD,MAEO;EACL,aAAKM,IAAL;EACD;;EAED,YAAMsD,aAAa,GAAG,KAAKC,UAAL,EAAtB;;EAEA,UAAIM,cAAc,IAChB,CAACP,aAAa,CAACxP,SAAd,CAAwBU,QAAxB,CAAiC,yBAAjC,CADH,EACgE;EAC9D8O,QAAAA,aAAa,CAACxP,SAAd,CAAwBM,GAAxB,CAA4B,yBAA5B;EACA,eAAO,IAAP;EACD;;EAED,UAAI,CAACyP,cAAD,IACFP,aAAa,CAACxP,SAAd,CAAwBU,QAAxB,CAAiC,yBAAjC,CADF,EAC+D;EAC7D8O,QAAAA,aAAa,CAACxP,SAAd,CAAwBC,MAAxB,CAA+B,yBAA/B;EACD;;EAED,aAAO,IAAP;EACD;;EAEDiM,IAAAA,IAAI,GAAG;EACL,UAAI,CAAC,KAAKzO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAL,EAAsD;EACpD,aAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC;EACD;;EAED,aAAO,IAAP;EACD;;EAED,WAAOkJ,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmB8M,MAAnB,EAA2B5R,OAA3B,CAAP;EACD;;EArF4B;EAwF/B;;;;;;;EAKAkI,EAAAA,kBAAkB,CAACC,CAAD,EAAIjO,IAAJ,EAAU0X,MAAV,CAAlB;EAEA,SAAOA,MAAP;EACD,CAtHc,EAsHZnY,MAAM,CAAC0O,CAAP,GAAW1O,MAAM,CAAC0O,CAAlB,GAAsB,IAtHV,CAAf;;ECRA;;;;;AAKA;EAIA,MAAMyJ,QAAM,GAAG,CAAC,MAAM;EAEpB;;;;;EAMA,QAAM1X,IAAI,GAAG,QAAb;EACA,QAAMwF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzBiK,IAAAA,KAAK,EAAE,IAFkB;EAGzBC,IAAAA,OAAO,EAAE,IAHgB;EAIzBC,IAAAA,UAAU,EAAE,IAJa;EAKzBnG,IAAAA,IAAI,EAAE9O,IALmB;EAMzBmV,IAAAA,OAAO,EAAE;EANgB,GAA3B;EAQA,QAAMjD,qBAAqB,GAAG,CAC5B,YAD4B,CAA9B;EAIA;;;;;;EAMA,QAAMwF,SAAN,SAAqB7C,MAArB,CAA4B;EAE1B1U,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAMnF,QAAQ,GAAG,KACjB,kDADiB,GAEf,4CAFe,GAGb,8BAHa,GAIX,6BAJW,GAKT,gCALS,GAMX,QANW,GAOX,2BAPW,GAQT,SARS,GAST,mCATS,GAUP,sCAVO,GAWL,oCAXK,GAYP,QAZO,GAaT,QAbS,GAcX,QAdW,GAeX,6BAfW,GAgBX,QAhBW,GAiBb,QAjBa,GAkBf,QAlBe,GAmBjB,QAnBA;;EAqBA,UAAI,CAACQ,KAAK,CAACiM,OAAN,CAActH,OAAO,CAACqP,OAAtB,CAAL,EAAqC;EACnCrP,QAAAA,OAAO,CAACqP,OAAR,GAAkBrP,OAAO,CAACmP,UAAR,GAAqBzP,kBAAkB,CAAC2P,OAAxC,GAAkD,EAApE;EACD;;EAED,YAAMrP,OAAN,EAAenF,QAAf;EAEA,WAAK0X,OAAL,GAAe,IAAf;EACD;;EAEDpE,IAAAA,IAAI,GAAG;EACL,YAAMA,IAAN;EAEA,WAAKoE,OAAL,GAAe,IAAIC,MAAJ,CAAY;EAACxN,QAAAA,OAAO,EAAE,KAAK+F,UAAL,GAAkB9P,aAAlB,CAAgC,SAAhC;EAAV,OAAZ,CAAf;EACA,WAAKsX,OAAL,CAAaF,OAAb,CAAqB,IAArB;EACD;;EAED5D,IAAAA,IAAI,GAAG;EACL,YAAMA,IAAN;EAEA,WAAK8D,OAAL,CAAaF,OAAb,CAAqB,KAArB;EACA,WAAKE,OAAL,GAAe,IAAf;EACD;;EAED,WAAOxG,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,IAAI4R,SAAJ,CAAW5R,OAAX,CAAP;EACD;;EArDyB;EAwD5B;;;;;;;EAKA,QAAM2O,UAAU,GAAG,EAAnB;EACA,QAAMuC,OAAO,GAAGtX,QAAQ,CAAC8B,gBAAT,CAA2B,IAAGqT,MAAM,CAAChD,UAAP,EAAoB,EAAlD,CAAhB;;EAEA,MAAImF,OAAJ,EAAa;EACX7V,IAAAA,KAAK,CAACC,IAAN,CAAW4V,OAAX,EAAoB3V,OAApB,CAA6ByJ,OAAD,IAAa;EACvC,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;;EAEA,UAAI6F,MAAM,CAAC7B,IAAP,KAAgB9O,IAApB,EAA0B;EACxB;EACAyU,QAAAA,UAAU,CAAC9S,IAAX,CAAgB,IAAI+V,SAAJ,CAAW/G,MAAX,CAAhB;EACD;EACF,KARD;EASD;;EAEDjR,EAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,UAAMoN,cAAc,GAAGpN,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,CAAvB;;EACA,QAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAAzC,EAA+C;EAC7C,YAAMgQ,EAAE,GAAGzI,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,CAAX;EACA,YAAM6C,OAAO,GAAGpL,QAAQ,CAACqB,aAAT,CAAuBiP,EAAvB,CAAhB;EAEA,YAAMb,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACxE,OAAF,KAAcA,OAAnC,CAAlB;;EAEA,UAAI,CAACqE,SAAL,EAAgB;EACd;EACD,OAR4C;;;EAW7C5H,MAAAA,KAAK,CAACyC,MAAN,CAAakN,IAAb;EAEA/H,MAAAA,SAAS,CAAC8H,MAAV,CAAiBhD,IAAjB;EACD;EACF,GAjBD;EAmBA,SAAOyD,SAAP;EACD,CA3Hc,GAAf;;ECTA;;;;;AAKA;EAIA,MAAMa,YAAY,GAAG,CAAEtK,CAAD,IAAO;EAC3B;;;;;EAMA,QAAMjO,IAAI,GAAG,cAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzBkK,IAAAA,OAAO,EAAE,EAFgB;EAGzBwD,IAAAA,UAAU,EAAE,IAHa;EAIzBtF,IAAAA,OAAO,EAAE,IAJgB;EAKzBuF,IAAAA,UAAU,EAAE;EALa,GAA3B;EAOA,QAAMvG,qBAAqB,GAAG,CAC5B,SAD4B,CAA9B;EAIA;;;;;;EAMA,QAAMqG,YAAN,SAA2B7I,SAA3B,CAAqC;EAEnCvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAM9F,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,IAAzE,EAA+E,KAA/E;EAEA,WAAKvR,QAAL,GAAgB,KAChB,4BADgB,GAEd,kCAFc,GAGZ,6BAHY,GAIZ,qFAJY,GAKV,yCALU,GAMZ,WANY,GAOd,QAPc,GAQhB,QARA;;EAUA,UAAI,KAAKuP,cAAT,EAAyB;EACvB,aAAKoF,KAAL;EACD;;EAED,WAAKoD,eAAL,GAAuB,IAAvB;EACD;;EAEDpD,IAAAA,KAAK,GAAG;EACN,YAAMC,OAAO,GAAG7V,QAAQ,CAAC2D,aAAT,CAAuB,KAAvB,CAAhB;EAEAkS,MAAAA,OAAO,CAAChU,SAAR,GAAoB,KAAKZ,QAAzB;EAEA,WAAKmF,OAAL,CAAagF,OAAb,GAAuByK,OAAO,CAACC,UAA/B,CALM;;EAQN,WAAK1P,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,UAAnC,EAA+CQ,SAA/C,GAA2D,KAAKuE,OAAL,CAAakP,OAAxE;;EAEA,UAAI,CAAC,KAAKlP,OAAL,CAAa0S,UAAlB,EAA8B;EAC5B,aAAK1S,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,QAAnC,EAA6C8C,KAA7C,CAAmD8U,OAAnD,GAA6D,MAA7D;EACD;;EAEDjZ,MAAAA,QAAQ,CAACoW,IAAT,CAAcH,WAAd,CAA0B,KAAK7P,OAAL,CAAagF,OAAvC;EAEA,WAAKwF,aAAL;EACD;;EAED2D,IAAAA,IAAI,GAAG;EACL,UAAI,KAAKnO,OAAL,CAAagF,OAAb,KAAyB,IAA7B,EAAmC;EACjC;EACA,aAAKwK,KAAL;EACD;;EAED,UAAI,KAAKxP,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAJ,EAAqD;EACnD,eAAO,KAAP;EACD,OARI;;;EAWL,UAAI,KAAKjD,OAAL,CAAa2S,UAAjB,EAA6B;EAC3B,aAAK3S,OAAL,CAAagF,OAAb,CAAqB8N,eAArB,CAAqC,OAArC;EACA,aAAK9S,OAAL,CAAagF,OAAb,CAAqBa,YAArB,CAAkC,OAAlC,EAA2C,cAA3C;EAEA,aAAK7F,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAoC,MAAK,KAAK7C,OAAL,CAAa2S,UAAW,EAAjE;EACA,aAAK3S,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,QAAnC,EAA6CsH,SAA7C,CAAuDM,GAAvD,CAA4D,OAAM,KAAK7C,OAAL,CAAa2S,UAAW,EAA1F;EACD;;EAED,UAAI,KAAK3S,OAAL,CAAa0S,UAAjB,EAA6B;EAC3B;EACA,cAAMK,aAAa,GAAG,KAAK/S,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,QAAnC,CAAtB;EACA,aAAKiQ,eAAL,CAAqB;EAAEhH,UAAAA,MAAM,EAAE6O,aAAV;EAAyBtR,UAAAA,KAAK,EAAE;EAAhC,SAArB;EACD;;EAED+K,MAAAA,UAAU,CAAC,MAAM;EACf,aAAKxM,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC,EADe;;EAIf,cAAMmQ,mBAAmB,GAAGpZ,QAAQ,CAAC8B,gBAAT,CAA0B,oBAA1B,KAAmD,EAA/E;EACA,YAAIuX,YAAY,GAAG,CAAnB;EACAD,QAAAA,mBAAmB,CAACzX,OAApB,CAA6B2X,YAAD,IAAkB;EAC5C,cAAI,KAAKlT,OAAL,CAAagF,OAAb,KAAyBkO,YAA7B,EAA2C;EACzC,kBAAMnV,KAAK,GAAGuQ,gBAAgB,CAAC4E,YAAD,CAA9B;EACAD,YAAAA,YAAY,IAAIC,YAAY,CAACC,YAAb,GAA4BhK,QAAQ,CAACpL,KAAK,CAACqV,YAAP,EAAqB,EAArB,CAApD;EACD;EACF,SALD;EAOA,aAAKpT,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2BsV,SAA3B,GAAwC,cAAaJ,YAAa,KAAlE;EAEA,aAAK3H,YAAL,CAAkBtJ,KAAK,CAACtD,IAAxB;;EAEA,cAAMmS,OAAO,GAAG,MAAM;EACpB,eAAKvF,YAAL,CAAkBtJ,KAAK,CAACrD,KAAxB;EACA,eAAKqB,OAAL,CAAagF,OAAb,CAAqB9B,mBAArB,CAAyClB,KAAK,CAAC3C,cAA/C,EAA+DwR,OAA/D;EACD,SAHD;;EAKA,aAAK7Q,OAAL,CAAagF,OAAb,CAAqBlI,gBAArB,CAAsCkF,KAAK,CAAC3C,cAA5C,EAA4DwR,OAA5D;EAED,OAxBS,EAwBP,CAxBO,CAAV;;EA0BA,UAAIyC,MAAM,CAACC,SAAP,CAAiB,KAAKvT,OAAL,CAAaoN,OAA9B,KAA0C,KAAKpN,OAAL,CAAaoN,OAAb,GAAuB,CAArE,EAAwE;EACtE;EACA,aAAKwF,eAAL,GAAuBpG,UAAU,CAAC,MAAM;EACtC,eAAKiC,IAAL;EACD,SAFgC,EAE9B,KAAKzO,OAAL,CAAaoN,OAAb,GAAuB,CAFO,CAAjC;EAGD;;EAED,aAAO,IAAP;EACD;;EAEDqB,IAAAA,IAAI,GAAG;EACL;;;;EAIA,UAAI,KAAKmE,eAAT,EAA0B;EACxBY,QAAAA,YAAY,CAAC,KAAKZ,eAAN,CAAZ;EACA,aAAKA,eAAL,GAAuB,IAAvB;EACD;;EAED,UAAI,CAAC,KAAK5S,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAL,EAAsD;EACpD,eAAO,KAAP;EACD;;EAED,WAAKqI,YAAL,CAAkBtJ,KAAK,CAACpD,IAAxB;;EAEA,UAAI,KAAKoB,OAAL,CAAa0S,UAAjB,EAA6B;EAC3B,cAAMK,aAAa,GAAG,KAAK/S,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,QAAnC,CAAtB;EACA,aAAKmQ,iBAAL,CAAuB;EAAElH,UAAAA,MAAM,EAAE6O,aAAV;EAAyBtR,UAAAA,KAAK,EAAE;EAAhC,SAAvB;EACD;;EAED,WAAKzB,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,MAAtC;EACA,WAAKxC,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC;;EAEA,YAAMoO,QAAQ,GAAG,MAAM;EACrB,aAAKjR,OAAL,CAAagF,OAAb,CAAqB9B,mBAArB,CAAyClB,KAAK,CAAC3C,cAA/C,EAA+D4R,QAA/D;EACA,aAAKjR,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,MAAtC;EAEA,aAAK8I,YAAL,CAAkBtJ,KAAK,CAACnD,MAAxB;;EAEA,YAAI,KAAKuL,cAAT,EAAyB;EACvBxQ,UAAAA,QAAQ,CAACoW,IAAT,CAAcK,WAAd,CAA0B,KAAKrQ,OAAL,CAAagF,OAAvC;EACA,eAAKhF,OAAL,CAAagF,OAAb,GAAuB,IAAvB;EACD;EACF,OAVD;;EAYA,WAAKhF,OAAL,CAAagF,OAAb,CAAqBlI,gBAArB,CAAsCkF,KAAK,CAAC3C,cAA5C,EAA4D4R,QAA5D;EAEA,aAAO,IAAP;EACD;;EAEDnF,IAAAA,cAAc,GAAG;EACf,WAAK2C,IAAL;EACD;;EAED,WAAO1C,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmB2N,YAAnB,EAAiCzS,OAAjC,CAAP;EACD;;EAzJkC;EA4JrC;;;;;;;EAKAkI,EAAAA,kBAAkB,CAACC,CAAD,EAAIjO,IAAJ,EAAUuY,YAAV,CAAlB;EAGA,SAAOA,YAAP;EACD,CA/LoB,EA+LlBhZ,MAAM,CAAC0O,CAAP,GAAW1O,MAAM,CAAC0O,CAAlB,GAAsB,IA/LJ,CAArB;;ECTA;;;;;AAKA;EAKA,MAAMsL,QAAQ,GAAG,CAAEtL,CAAD,IAAO;EACvB;;;;;EAMA,QAAMjO,IAAI,GAAG,UAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzB0O,IAAAA,MAAM,EAAE;EAFiB,GAA3B;EAIA,QAAMtH,qBAAqB,GAAG,CAC5B,QAD4B,CAA9B;EAIA;;;;;;EAMA,QAAMqH,QAAN,SAAuB7J,SAAvB,CAAiC;EAE/BvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAM9F,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,KAAzE,EAAgF,KAAhF;EAEA,WAAK8B,YAAL,GAAoB,KAApB,CAHwB;;EAMxB,UAAI,KAAKlO,OAAL,CAAa0T,MAAjB,EAAyB;EACvB,aAAKvF,IAAL;EACD;EACF;;EAEDwF,IAAAA,SAAS,GAAG;EACV,aAAO,KAAK3T,OAAL,CAAagF,OAAb,CAAqBmN,qBAArB,CAA2C,KAAKnS,OAAL,CAAagF,OAAxD,EAAiEyL,MAAxE;EACD;;EAEDiD,IAAAA,MAAM,GAAG;EACP,UAAI,KAAK1T,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAJ,EAAqD;EACnD,eAAO,KAAKwL,IAAL,EAAP;EACD;;EAED,aAAO,KAAKN,IAAL,EAAP;EACD;;EAEDA,IAAAA,IAAI,GAAG;EACL,UAAI,KAAKD,YAAT,EAAuB;EACrB,eAAO,KAAP;EACD;;EAED,UAAI,KAAKlO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAJ,EAAqD;EACnD,eAAO,KAAP;EACD;;EAED,WAAKiL,YAAL,GAAoB,IAApB;;EAEA,YAAM0F,WAAW,GAAG,MAAM;EACxB,aAAK5T,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC;EACA,aAAK7C,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,YAAtC;EACA,aAAKxC,OAAL,CAAagF,OAAb,CAAqB9B,mBAArB,CAAyClB,KAAK,CAAC3C,cAA/C,EAA+DuU,WAA/D;EAEA,aAAK5T,OAAL,CAAagF,OAAb,CAAqBa,YAArB,CAAkC,eAAlC,EAAmD,IAAnD;EAEA,aAAKqI,YAAL,GAAoB,KAApB;EACD,OARD;;EAUA,UAAI,CAAC,KAAKlO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,YAAxC,CAAL,EAA4D;EAC1D,aAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,YAAnC;EACD;;EAED,WAAK7C,OAAL,CAAagF,OAAb,CAAqBlI,gBAArB,CAAsCkF,KAAK,CAAC3C,cAA5C,EAA4DuU,WAA5D;EAEA,YAAMnD,MAAM,GAAG,KAAKkD,SAAL,EAAf;EAEA,WAAK3T,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2B0S,MAA3B,GAAoC,KAApC;EAEAjE,MAAAA,UAAU,CAAC,MAAM;EACf,aAAKxM,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2B0S,MAA3B,GAAqC,GAAEA,MAAO,IAA9C;EACD,OAFS,EAEP,EAFO,CAAV;EAIA,aAAO,IAAP;EACD;;EAEDhC,IAAAA,IAAI,GAAG;EACL,UAAI,KAAKP,YAAT,EAAuB;EACrB,eAAO,KAAP;EACD;;EAED,UAAI,CAAC,KAAKlO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAL,EAAsD;EACpD,eAAO,KAAP;EACD;;EAED,WAAKiL,YAAL,GAAoB,IAApB;;EAEA,YAAM0F,WAAW,GAAG,MAAM;EACxB,aAAK5T,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,YAAtC;EACA,aAAKxC,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2B0S,MAA3B,GAAoC,MAApC;EACA,aAAKzQ,OAAL,CAAagF,OAAb,CAAqB9B,mBAArB,CAAyClB,KAAK,CAAC3C,cAA/C,EAA+DuU,WAA/D;EAEA,aAAK5T,OAAL,CAAagF,OAAb,CAAqBa,YAArB,CAAkC,eAAlC,EAAmD,KAAnD;EAEA,aAAKqI,YAAL,GAAoB,KAApB;EACD,OARD;;EAUA,WAAKlO,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2B0S,MAA3B,GAAoC,KAApC;;EAEA,UAAI,CAAC,KAAKzQ,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,YAAxC,CAAL,EAA4D;EAC1D,aAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,YAAnC;EACD;;EAED,WAAK7C,OAAL,CAAagF,OAAb,CAAqBlI,gBAArB,CAAsCkF,KAAK,CAAC3C,cAA5C,EAA4DuU,WAA5D;EAEA,WAAK5T,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,MAAtC;EAEA,aAAO,IAAP;EACD;;EAED,WAAOuJ,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmB2O,QAAnB,EAA6BzT,OAA7B,CAAP;EACD;;EAvG8B;EA0GjC;;;;;;;EAKA,QAAM2O,UAAU,GAAG,EAAnB;EAEA,QAAMkF,SAAS,GAAGja,QAAQ,CAAC8B,gBAAT,CAA2B,IAAGxB,IAAK,EAAnC,CAAlB;;EACA,MAAI2Z,SAAJ,EAAe;EACbA,IAAAA,SAAS,CAACtY,OAAV,CAAmByJ,OAAD,IAAa;EAC7B;EACA,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;EAEA2J,MAAAA,UAAU,CAAC9S,IAAX,CAAgB4X,QAAQ,CAAC3O,YAAT,CAAsB+F,MAAtB,CAAhB;EACD,KAND;EAOD;;EAEDjR,EAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,UAAMyC,MAAM,GAAG+D,gBAAgB,CAACxG,KAAK,CAACyC,MAAP,EAAe,aAAf,CAA/B;;EACA,QAAI,CAACA,MAAL,EAAa;EACX;EACD;;EAED,UAAM2K,cAAc,GAAG3K,MAAM,CAAC/B,YAAP,CAAoB,aAApB,CAAvB;;EAEA,QAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAAzC,EAA+C;EAC7C,UAAIgQ,EAAE,GAAGhG,MAAM,CAAC/B,YAAP,CAAoB,aAApB,KAAsC+B,MAAM,CAAC/B,YAAP,CAAoB,MAApB,CAA/C;EACA+H,MAAAA,EAAE,GAAGA,EAAE,CAAC/D,OAAH,CAAW,GAAX,EAAgB,EAAhB,CAAL;EAEA,YAAMkD,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACuB,UAAF,GAAe5I,YAAf,CAA4B,IAA5B,MAAsC+H,EAA3D,CAAlB;;EAEA,UAAI,CAACb,SAAL,EAAgB;EACd;EACD;;EAEDA,MAAAA,SAAS,CAACqK,MAAV;EACD;EACF,GApBD;EAsBA,SAAOD,QAAP;EACD,CA1KgB,EA0Kdha,MAAM,CAAC0O,CAAP,GAAW1O,MAAM,CAAC0O,CAAlB,GAAsB,IA1KR,CAAjB;;ECVA;;;;;AAKA;EAKA,MAAM2L,SAAS,GAAG,CAAE3L,CAAD,IAAO;EACxB;;;;;EAMA,QAAMjO,IAAI,GAAG,WAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE;EADgB,GAA3B;EAGA,QAAMoH,qBAAqB,GAAG,EAA9B;EAGA;;;;;;EAMA,QAAM0H,SAAN,SAAwBlK,SAAxB,CAAkC;EAEhCvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAM9F,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,KAAzE,EAAgF,KAAhF;EAEA,WAAKyH,SAAL,GAAiB,EAAjB;EAEA,YAAME,OAAO,GAAG,KAAK/T,OAAL,CAAagF,OAAb,CAAqBtJ,gBAArB,CAAuC,iBAAgBxB,IAAK,IAA5D,CAAhB;EACAmB,MAAAA,KAAK,CAACC,IAAN,CAAWyY,OAAX,EAAoBxY,OAApB,CAA6BmY,MAAD,IAAY;EACtC,cAAMM,UAAU,GAAGN,MAAM,CAACvR,YAAP,CAAoB,MAApB,CAAnB;EACA,cAAM8R,QAAQ,GAAGra,QAAQ,CAACqB,aAAT,CAAuB+Y,UAAvB,CAAjB;;EAEA,YAAIC,QAAJ,EAAc;EACZ,eAAKC,WAAL,CAAiBD,QAAjB;EACD;EACF,OAPD;EAQD;;EAEDnI,IAAAA,cAAc,CAACrK,KAAD,EAAQ;EACpB,YAAMyI,EAAE,GAAGzI,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,MAA1B,CAAX;EACA,YAAM6C,OAAO,GAAGpL,QAAQ,CAACqB,aAAT,CAAuBiP,EAAvB,CAAhB;EAEA,WAAKiK,YAAL,CAAkBnP,OAAlB;EACD;;EAEDkP,IAAAA,WAAW,CAAClP,OAAD,EAAU;EACnB,YAAMiP,QAAQ,GAAG,IAAIR,QAAJ,CAAa;EAC5BzO,QAAAA;EAD4B,OAAb,CAAjB;EAGA,WAAK6O,SAAL,CAAehY,IAAf,CAAoBoY,QAApB;EAEA,aAAOA,QAAP;EACD;;EAEDG,IAAAA,WAAW,CAACpP,OAAD,EAAU;EACnB,UAAIiP,QAAQ,GAAG,KAAKJ,SAAL,CAAehW,IAAf,CAAoB2L,CAAC,IAAIA,CAAC,CAACxJ,OAAF,CAAUgF,OAAV,CAAkB7C,YAAlB,CAA+B,IAA/B,MAAyC6C,OAAO,CAAC7C,YAAR,CAAqB,IAArB,CAAlE,CAAf;;EAEA,UAAI,CAAC8R,QAAL,EAAe;EACb;EACAA,QAAAA,QAAQ,GAAG,KAAKC,WAAL,EAAX;EACD;;EAED,aAAOD,QAAP;EACD;;EAEDI,IAAAA,YAAY,GAAG;EACb,aAAO,KAAKR,SAAZ;EACD;;EAEDM,IAAAA,YAAY,CAACG,YAAD,EAAe;EACzB,YAAML,QAAQ,GAAG,KAAKG,WAAL,CAAiBE,YAAjB,CAAjB;EACA,WAAKT,SAAL,CAAetY,OAAf,CAAwBiO,CAAD,IAAO;EAC5B,YAAIA,CAAC,CAACxJ,OAAF,CAAUgF,OAAV,CAAkB7C,YAAlB,CAA+B,IAA/B,MAAyCmS,YAAY,CAACnS,YAAb,CAA0B,IAA1B,CAA7C,EAA8E;EAC5EqH,UAAAA,CAAC,CAACiF,IAAF;EACD,SAFD,MAEO;EACLwF,UAAAA,QAAQ,CAACP,MAAT;EACD;EACF,OAND;EAOD;;EAEDvF,IAAAA,IAAI,CAACoG,UAAD,EAAa;EACf,UAAIN,QAAQ,GAAGM,UAAf;;EACA,UAAI,OAAOA,UAAP,KAAsB,QAA1B,EAAoC;EAClCN,QAAAA,QAAQ,GAAGra,QAAQ,CAACqB,aAAT,CAAuBsZ,UAAvB,CAAX;EACD;;EAED,UAAI,CAACN,QAAL,EAAe;EACb,cAAM,IAAIlY,KAAJ,CAAW,GAAE7B,IAAK,qBAAoBqa,UAAW,6BAAjD,CAAN;EACD;;EAED,WAAKJ,YAAL,CAAkBF,QAAlB;EAEA,aAAO,IAAP;EACD;;EAEDxF,IAAAA,IAAI,CAAC8F,UAAD,EAAa;EACf,UAAIN,QAAQ,GAAGM,UAAf;;EACA,UAAI,OAAOA,UAAP,KAAsB,QAA1B,EAAoC;EAClCN,QAAAA,QAAQ,GAAGra,QAAQ,CAACqB,aAAT,CAAuBsZ,UAAvB,CAAX;EACD;;EAED,UAAI,CAACN,QAAL,EAAe;EACb,cAAM,IAAIlY,KAAJ,CAAW,GAAE7B,IAAK,qBAAoBqa,UAAW,6BAAjD,CAAN;EACD;;EAED,YAAMC,WAAW,GAAG,KAAKJ,WAAL,CAAiBH,QAAjB,CAApB;EACA,aAAOO,WAAW,CAAC/F,IAAZ,EAAP;EACD;;EAED,WAAO1C,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmBgP,SAAnB,EAA8B9T,OAA9B,CAAP;EACD;;EA/F+B;EAkGlC;;;;;;;EAKAkI,EAAAA,kBAAkB,CAACC,CAAD,EAAIjO,IAAJ,EAAU4Z,SAAV,CAAlB;EAEA;;;;;;EAKA,QAAMnF,UAAU,GAAG,EAAnB;EAEA,QAAM8F,UAAU,GAAG7a,QAAQ,CAAC8B,gBAAT,CAA2B,IAAGxB,IAAK,EAAnC,CAAnB;;EACA,MAAIua,UAAJ,EAAgB;EACdpZ,IAAAA,KAAK,CAACC,IAAN,CAAWmZ,UAAX,EAAuBlZ,OAAvB,CAAgCyJ,OAAD,IAAa;EAC1C,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;EAEA2J,MAAAA,UAAU,CAAC9S,IAAX,CAAgBiY,SAAS,CAAChP,YAAV,CAAuB+F,MAAvB,CAAhB;EACD,KALD;EAMD;;EAEDjR,EAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,UAAMoN,cAAc,GAAGpN,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,CAAvB;;EACA,QAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAAzC,EAA+C;EAC7C,YAAM8Z,UAAU,GAAGvS,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,KAA4CV,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,MAA1B,CAA/D;EACA,YAAMoS,UAAU,GAAG3a,QAAQ,CAACqB,aAAT,CAAuB+Y,UAAvB,CAAnB;EAEA,YAAMU,SAAS,GAAG5M,iBAAiB,CAACrG,KAAK,CAACyC,MAAP,EAAe,WAAf,CAAnC;;EAEA,UAAIwQ,SAAS,KAAK,IAAlB,EAAwB;EACtB;EACD;;EAED,YAAMC,WAAW,GAAGD,SAAS,CAACvS,YAAV,CAAuB,IAAvB,CAApB;EACA,YAAMkH,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACuB,UAAF,GAAe5I,YAAf,CAA4B,IAA5B,MAAsCwS,WAA3D,CAAlB;;EAEA,UAAI,CAACtL,SAAL,EAAgB;EACd;EACD,OAf4C;;;EAkB7C,YAAMuL,cAAc,GAAGvL,SAAS,CAACgL,YAAV,GAAyBxW,IAAzB,CAA8B2L,CAAC,IAAIA,CAAC,CAACuB,UAAF,OAAmBwJ,UAAtD,CAAvB;;EACA,UAAI,CAACK,cAAL,EAAqB;EACnBvL,QAAAA,SAAS,CAAC6K,WAAV,CAAsBK,UAAtB;EACD;;EAEDlL,MAAAA,SAAS,CAAC8E,IAAV,CAAe6F,UAAf;EACD;EACF,GA3BD;EA6BA,SAAOF,SAAP;EACD,CA7KiB,EA6Kfra,MAAM,CAAC0O,CAAP,GAAW1O,MAAM,CAAC0O,CAAlB,GAAsB,IA7KP,CAAlB;;ECVA;;;;;AAKA;EAKA,MAAM0M,GAAG,GAAG,CAAE1M,CAAD,IAAO;EAClB;;;;;EAMA,QAAMjO,IAAI,GAAG,KAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG,EAA3B;EAGA,QAAM0M,qBAAqB,GAAG,EAA9B;EAEA,QAAM0I,oBAAoB,GAAG,WAA7B;EAEA;;;;;;EAMA,QAAMD,GAAN,SAAkBjL,SAAlB,CAA4B;EAE1BvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAM9F,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,KAAzE,EAAgF,KAAhF;EACD;;EAED+B,IAAAA,IAAI,GAAG;EACL,UAAI,KAAKnO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,QAAxC,CAAJ,EAAuD;EACrD,eAAO,KAAP;EACD;;EAED,YAAMiH,EAAE,GAAG,KAAKlK,OAAL,CAAagF,OAAb,CAAqB7C,YAArB,CAAkC,MAAlC,CAAX;EACA,YAAM4S,GAAG,GAAGjN,iBAAiB,CAAC,KAAK9H,OAAL,CAAagF,OAAd,EAAuB,KAAvB,CAA7B;EACA,YAAMgQ,OAAO,GAAGD,GAAG,GAAGA,GAAG,CAACrZ,gBAAJ,CAAsB,iBAAgBxB,IAAK,IAA3C,CAAH,GAAqD,IAAxE;;EAEA,UAAI8a,OAAJ,EAAa;EACX3Z,QAAAA,KAAK,CAACC,IAAN,CAAW0Z,OAAX,EAAoBzZ,OAApB,CAA6B0Z,GAAD,IAAS;EACnC,cAAIA,GAAG,CAAC1S,SAAJ,CAAcU,QAAd,CAAuB,QAAvB,CAAJ,EAAsC;EACpCgS,YAAAA,GAAG,CAAC1S,SAAJ,CAAcC,MAAd,CAAqB,QAArB;EACD;;EACDyS,UAAAA,GAAG,CAACpP,YAAJ,CAAiB,eAAjB,EAAkC,KAAlC;EACD,SALD;EAMD;;EAED,WAAK7F,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,QAAnC;EACA,WAAK7C,OAAL,CAAagF,OAAb,CAAqBa,YAArB,CAAkC,eAAlC,EAAmD,IAAnD;EAEA,YAAMqP,UAAU,GAAGtb,QAAQ,CAACqB,aAAT,CAAuBiP,EAAvB,CAAnB;EACA,YAAMiL,WAAW,GAAGD,UAAU,CAAClN,UAAX,CAAsBtM,gBAAtB,CAAuCoZ,oBAAvC,CAApB;;EAEA,UAAIK,WAAJ,EAAiB;EACf9Z,QAAAA,KAAK,CAACC,IAAN,CAAW6Z,WAAX,EAAwB5Z,OAAxB,CAAiC0Z,GAAD,IAAS;EACvC,cAAIA,GAAG,CAAC1S,SAAJ,CAAcU,QAAd,CAAuB,QAAvB,CAAJ,EAAsC;EACpCgS,YAAAA,GAAG,CAAC1S,SAAJ,CAAcC,MAAd,CAAqB,QAArB;EACD;EACF,SAJD;EAKD;;EAED0S,MAAAA,UAAU,CAAC3S,SAAX,CAAqBM,GAArB,CAAyB,SAAzB;EAEA2J,MAAAA,UAAU,CAAC,MAAM;EACf,cAAM4I,QAAQ,GAAG,MAAM;EACrBF,UAAAA,UAAU,CAAC3S,SAAX,CAAqBC,MAArB,CAA4B,SAA5B;EACA0S,UAAAA,UAAU,CAAC3S,SAAX,CAAqBM,GAArB,CAAyB,QAAzB;EACAqS,UAAAA,UAAU,CAAC3S,SAAX,CAAqBC,MAArB,CAA4B,SAA5B;EACA0S,UAAAA,UAAU,CAAChS,mBAAX,CAA+BlB,KAAK,CAAC3C,cAArC,EAAqD+V,QAArD;EACD,SALD;;EAOAF,QAAAA,UAAU,CAACpY,gBAAX,CAA4BkF,KAAK,CAAC3C,cAAlC,EAAkD+V,QAAlD;EAEAF,QAAAA,UAAU,CAAC3S,SAAX,CAAqBM,GAArB,CAAyB,SAAzB;EACD,OAXS,EAWP,EAXO,CAAV;EAaA,aAAO,IAAP;EACD;;EAED4L,IAAAA,IAAI,GAAG;EACL,UAAI,CAAC,KAAKzO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,QAAxC,CAAL,EAAwD;EACtD,eAAO,KAAP;EACD;;EAED,UAAI,KAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,QAAxC,CAAJ,EAAuD;EACrD,aAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,QAAtC;EACD;;EAED,WAAKxC,OAAL,CAAagF,OAAb,CAAqBa,YAArB,CAAkC,eAAlC,EAAmD,KAAnD;EAEA,YAAMqE,EAAE,GAAG,KAAKlK,OAAL,CAAagF,OAAb,CAAqB7C,YAArB,CAAkC,MAAlC,CAAX;EACA,YAAM+S,UAAU,GAAGtb,QAAQ,CAACqB,aAAT,CAAuBiP,EAAvB,CAAnB;;EAEA,UAAIgL,UAAU,CAAC3S,SAAX,CAAqBU,QAArB,CAA8B,QAA9B,CAAJ,EAA6C;EAC3CiS,QAAAA,UAAU,CAAC3S,SAAX,CAAqBC,MAArB,CAA4B,QAA5B;EACD;;EAED,aAAO,IAAP;EACD;;EAED,WAAOuJ,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmB+P,GAAnB,EAAwB7U,OAAxB,CAAP;EACD;;EAnFyB;EAsF5B;;;;;;;EAKAkI,EAAAA,kBAAkB,CAACC,CAAD,EAAIjO,IAAJ,EAAU2a,GAAV,CAAlB;EAEA;;;;;;EAKA,QAAMlG,UAAU,GAAG,EAAnB;EAEA,QAAM0G,IAAI,GAAGzb,QAAQ,CAAC8B,gBAAT,CAA2B,iBAAgBxB,IAAK,IAAhD,CAAb;;EACA,MAAImb,IAAJ,EAAU;EACRha,IAAAA,KAAK,CAACC,IAAN,CAAW+Z,IAAX,EAAiB9Z,OAAjB,CAA0ByJ,OAAD,IAAa;EACpC;EACA,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;EAEA2J,MAAAA,UAAU,CAAC9S,IAAX,CAAgBgZ,GAAG,CAAC/P,YAAJ,CAAiB+F,MAAjB,CAAhB;EACD,KAND;EAOD;;EAEDjR,EAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,UAAMoN,cAAc,GAAGpN,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,aAA1B,CAAvB;;EACA,QAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAAzC,EAA+C;EAC7C,YAAMgQ,EAAE,GAAGzI,KAAK,CAACyC,MAAN,CAAa/B,YAAb,CAA0B,MAA1B,CAAX;EAEA,YAAMkH,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACuB,UAAF,GAAe5I,YAAf,CAA4B,MAA5B,MAAwC+H,EAA7D,CAAlB;;EAEA,UAAI,CAACb,SAAL,EAAgB;EACd;EACD;;EAEDA,MAAAA,SAAS,CAAC8E,IAAV;EACD;EACF,GAbD;EAeA,SAAO0G,GAAP;EACD,CArJW,EAqJTpb,MAAM,CAAC0O,CAAP,GAAW1O,MAAM,CAAC0O,CAAlB,GAAsB,IArJb,CAAZ;;ECVA;;;;;AAKA;EAIA,MAAMmN,QAAQ,GAAG,CAAEnN,CAAD,IAAO;EACvB;;;;;EAMA,QAAMjO,IAAI,GAAG,UAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzByL,IAAAA,MAAM,EAAE,CAFiB;EAGzB8E,IAAAA,GAAG,EAAE,CAHoB;EAIzBC,IAAAA,GAAG,EAAE,GAJoB;EAKzBC,IAAAA,KAAK,EAAE,KALkB;EAMzBC,IAAAA,OAAO,EAAE,KANgB;EAOzB/C,IAAAA,UAAU,EAAE;EAPa,GAA3B;EASA,QAAMvG,qBAAqB,GAAG,CAC5B,QAD4B,EAE5B,KAF4B,EAG5B,KAH4B,EAI5B,OAJ4B,EAK5B,SAL4B,EAM5B,YAN4B,CAA9B;EASA;;;;;;EAMA,QAAMkJ,QAAN,SAAuB1L,SAAvB,CAAiC;EAE/BvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAM9F,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,KAAzE,EAAgF,KAAhF,EADwB;;EAIxB,WAAKpM,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2B0S,MAA3B,GAAqC,GAAE,KAAKzQ,OAAL,CAAayQ,MAAO,IAA3D,CAJwB;;EAOxB,YAAMkF,WAAW,GAAG,KAAKC,cAAL,EAApB;EACAD,MAAAA,WAAW,CAAC9P,YAAZ,CAAyB,eAAzB,EAA2C,GAAE,KAAK7F,OAAL,CAAauV,GAAI,EAA9D;EACAI,MAAAA,WAAW,CAAC9P,YAAZ,CAAyB,eAAzB,EAA2C,GAAE,KAAK7F,OAAL,CAAawV,GAAI,EAA9D,EATwB;;EAYxB,UAAI,KAAKxV,OAAL,CAAa0V,OAAb,IACC,CAACC,WAAW,CAACpT,SAAZ,CAAsBU,QAAtB,CAA+B,sBAA/B,CADN,EAC8D;EAC5D0S,QAAAA,WAAW,CAACpT,SAAZ,CAAsBM,GAAtB,CAA0B,sBAA1B;EACD,OAfuB;;;EAkBxB,UAAI,OAAO,KAAK7C,OAAL,CAAa2S,UAApB,KAAmC,QAAnC,IACC,CAACgD,WAAW,CAACpT,SAAZ,CAAsBU,QAAtB,CAAgC,MAAK,KAAKjD,OAAL,CAAa2S,UAAW,EAA7D,CADN,EACuE;EACrEgD,QAAAA,WAAW,CAACpT,SAAZ,CAAsBM,GAAtB,CAA2B,MAAK,KAAK7C,OAAL,CAAa2S,UAAW,EAAxD;EACD;EACF;;EAEDiD,IAAAA,cAAc,GAAG;EACf,aAAO,KAAK5V,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,eAAnC,CAAP;EACD;;EAED4a,IAAAA,GAAG,CAAC3P,KAAK,GAAG,CAAT,EAAY;EACb,YAAMyP,WAAW,GAAG,KAAKC,cAAL,EAApB;EACA,YAAME,QAAQ,GAAGpO,IAAI,CAACqO,KAAL,CAAY7P,KAAK,IAAI,KAAKlG,OAAL,CAAauV,GAAb,GAAmB,KAAKvV,OAAL,CAAawV,GAApC,CAAN,GAAkD,GAA7D,CAAjB;;EAEA,UAAItP,KAAK,GAAG,KAAKlG,OAAL,CAAauV,GAAzB,EAA8B;EAC5BxY,QAAAA,OAAO,CAACC,KAAR,CAAe,GAAE9C,IAAK,cAAagM,KAAM,sBAAzC;EACA,eAAO,KAAP;EACD;;EAED,UAAIA,KAAK,GAAG,KAAKlG,OAAL,CAAawV,GAAzB,EAA8B;EAC5BzY,QAAAA,OAAO,CAACC,KAAR,CAAe,GAAE9C,IAAK,cAAagM,KAAM,sBAAzC;EACA,eAAO,KAAP;EACD;;EAEDyP,MAAAA,WAAW,CAAC9P,YAAZ,CAAyB,eAAzB,EAA2C,GAAEK,KAAM,EAAnD,EAda;;EAiBb,UAAI,KAAKlG,OAAL,CAAayV,KAAjB,EAAwB;EACtBE,QAAAA,WAAW,CAACla,SAAZ,GAAyB,GAAEqa,QAAS,GAApC;EACD,OAnBY;;;EAsBbH,MAAAA,WAAW,CAAC5X,KAAZ,CAAkBqU,KAAlB,GAA2B,GAAE0D,QAAS,GAAtC;EAEA,aAAO,IAAP;EACD;;EAEDzD,IAAAA,OAAO,CAACC,cAAc,GAAG,IAAlB,EAAwB;EAC7B,UAAI,CAAC,KAAKtS,OAAL,CAAa0V,OAAlB,EAA2B;EACzB3Y,QAAAA,OAAO,CAACC,KAAR,CAAe,GAAE9C,IAAK,+CAAtB;EACA,eAAO,KAAP;EACD;;EAED,YAAMyb,WAAW,GAAG,KAAKC,cAAL,EAApB;;EAEA,UAAItD,cAAc,IACb,CAACqD,WAAW,CAACpT,SAAZ,CAAsBU,QAAtB,CAA+B,uBAA/B,CADN,EAC+D;EAC7D0S,QAAAA,WAAW,CAACpT,SAAZ,CAAsBM,GAAtB,CAA0B,uBAA1B;EACD;;EAED,UAAI,CAACyP,cAAD,IACCqD,WAAW,CAACpT,SAAZ,CAAsBU,QAAtB,CAA+B,uBAA/B,CADL,EAC8D;EAC5D0S,QAAAA,WAAW,CAACpT,SAAZ,CAAsBC,MAAtB,CAA6B,uBAA7B;EACD;;EAED,aAAO,IAAP;EACD;;EAED2L,IAAAA,IAAI,GAAG;EACL,WAAKnO,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2B0S,MAA3B,GAAqC,GAAE,KAAKzQ,OAAL,CAAayQ,MAAO,IAA3D;EACA,WAAKnF,YAAL,CAAkBtJ,KAAK,CAACtD,IAAxB;EACA,WAAK4M,YAAL,CAAkBtJ,KAAK,CAACrD,KAAxB;EAEA,aAAO,IAAP;EACD;;EAED8P,IAAAA,IAAI,GAAG;EACL,WAAKzO,OAAL,CAAagF,OAAb,CAAqBjH,KAArB,CAA2B0S,MAA3B,GAAoC,KAApC;EACA,WAAKnF,YAAL,CAAkBtJ,KAAK,CAACpD,IAAxB;EACA,WAAK0M,YAAL,CAAkBtJ,KAAK,CAACnD,MAAxB;EAEA,aAAO,IAAP;EACD;;EAED,WAAOkN,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmBwQ,QAAnB,EAA6BtV,OAA7B,CAAP;EACD;;EApG8B;EAuGjC;;;;;;;EAKAkI,EAAAA,kBAAkB,CAACC,CAAD,EAAIjO,IAAJ,EAAUob,QAAV,CAAlB;EAEA,SAAOA,QAAP;EACD,CAhJgB,EAgJd7b,MAAM,CAAC0O,CAAP,GAAW1O,MAAM,CAAC0O,CAAlB,GAAsB,IAhJR,CAAjB;;ECTA;;;;;AAKA;EAKA,MAAM6N,SAAS,GAAG,CAAE7N,CAAD,IAAO;EACxB;;;;;EAMA,QAAMjO,IAAI,GAAG,WAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAM6U,iBAAiB,GAAG,qBAA1B;EACA,QAAMtP,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzBiR,IAAAA,KAAK,EAAE;EACLC,MAAAA,EAAE,EAAE,KADC;EAELC,MAAAA,EAAE,EAAE,KAFC;EAGLC,MAAAA,EAAE,EAAE;EAHC;EAFkB,GAA3B;EAQA,QAAMhK,qBAAqB,GAAG,CAC5B,OAD4B,CAA9B;EAIA;;;;;;EAMA,QAAM4J,SAAN,SAAwBpM,SAAxB,CAAkC;EAEhCvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAM9F,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,KAAzE,EAAgF,IAAhF;EAEA,WAAKiK,WAAL,GAAmB,IAAnB;EACA,WAAKC,YAAL,GAAoB,IAApB;EACA,WAAKjE,OAAL,GAAe,IAAf;EAEA,WAAKkE,UAAL,GAAkB,CAAC,MAAD,EAAS,OAAT,CAAlB;EAEA,YAAMC,EAAE,GAAG;EAAElc,QAAAA,IAAI,EAAE,IAAR;EAAcmc,QAAAA,KAAK,EAAEhd,MAAM,CAACid,UAAP,CAAkB,kBAAlB;EAArB,OAAX;EACA,YAAMR,EAAE,GAAG;EAAE5b,QAAAA,IAAI,EAAE,IAAR;EAAcmc,QAAAA,KAAK,EAAEhd,MAAM,CAACid,UAAP,CAAkB,oBAAlB;EAArB,OAAX;EACA,YAAMP,EAAE,GAAG;EAAE7b,QAAAA,IAAI,EAAE,IAAR;EAAcmc,QAAAA,KAAK,EAAEhd,MAAM,CAACid,UAAP,CAAkB,oBAAlB;EAArB,OAAX;EACA,YAAMN,EAAE,GAAG;EAAE9b,QAAAA,IAAI,EAAE,IAAR;EAAcmc,QAAAA,KAAK,EAAEhd,MAAM,CAACid,UAAP,CAAkB,qBAAlB;EAArB,OAAX;EAEA,WAAKC,KAAL,GAAa,CAACH,EAAD,EAAKN,EAAL,EAASC,EAAT,EAAaC,EAAb,EAAiBQ,OAAjB,EAAb;EAEA,WAAKC,cAAL;EACA,WAAKC,UAAL;EAEArd,MAAAA,MAAM,CAACqD,gBAAP,CAAwB,QAAxB,EAAkC,MAAM,KAAKga,UAAL,EAAxC,EAA2D,KAA3D;EACD;;EAEDD,IAAAA,cAAc,GAAG;EACf,WAAKN,UAAL,CAAgBQ,KAAhB,CAAuBC,SAAD,IAAe;EACnC,YAAI,KAAKhX,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAyC,cAAa+T,SAAU,EAAhE,CAAJ,EAAwE;EACtE,eAAKA,SAAL,GAAiBA,SAAjB;EACA,iBAAO,KAAP;EACD;;EACD,eAAO,IAAP;EACD,OAND;EAOD;;EAEDF,IAAAA,UAAU,GAAG;EACX,UAAI,EAAE,gBAAgBrd,MAAlB,CAAJ,EAA+B;EAC7B;EACD;;EAED,WAAKkd,KAAL,CAAWI,KAAX,CAAkBjF,IAAD,IAAU;EACzB,cAAM5K,KAAK,GAAG4K,IAAI,CAAC2E,KAAL,CAAWA,KAAX,CAAiBvP,KAAjB,CAAuB,0BAAvB,CAAd;;EAEA,YAAIA,KAAJ,EAAW;EACT,cAAI4K,IAAI,CAAC2E,KAAL,CAAWzV,OAAf,EAAwB;EACtB,gBAAI,KAAKsV,YAAL,KAAsBxE,IAAI,CAACxX,IAA/B,EAAqC;EACnC,mBAAK2c,QAAL,CAAcnF,IAAI,CAACxX,IAAnB;EACD;;EACD,iBAAKgc,YAAL,GAAoBxE,IAAI,CAACxX,IAAzB;EACA,mBAAO,KAAP;EACD;EACF;;EAED,eAAO,IAAP;EACD,OAdD;EAeD;;EAEDuR,IAAAA,eAAe,GAAG;EAChB,aAAO,MAAMA,eAAN,MAA2B,KAAK7L,OAAL,CAAaiW,KAAb,CAAmB,KAAKK,YAAxB,MAA0C,IAA5E;EACD;;EAEDW,IAAAA,QAAQ,CAAC3c,IAAD,EAAO;EACb,YAAM4c,OAAO,GAAGtd,QAAQ,CAACoW,IAAzB;;EAEA,UAAI,KAAKhQ,OAAL,CAAaiW,KAAb,CAAmB3b,IAAnB,MAA6B,IAAjC,EAAuC;EACrC,YAAI,CAAC4c,OAAO,CAAC3U,SAAR,CAAkBU,QAAlB,CAA4B,oBAAmB,KAAK+T,SAAU,EAA9D,CAAL,EAAuE;EACrEE,UAAAA,OAAO,CAAC3U,SAAR,CAAkBM,GAAlB,CAAuB,oBAAmB,KAAKmU,SAAU,EAAzD;EACD;;EAED,aAAKX,WAAL,GAAmB,KAAnB,CALqC;;EAQrC,aAAKhE,OAAL,GAAe,KAAf;EACA,aAAKlE,IAAL,GATqC;;EAWrC,aAAKgJ,cAAL;EACD,OAZD,MAYO;EACL,YAAID,OAAO,CAAC3U,SAAR,CAAkBU,QAAlB,CAA4B,oBAAmB,KAAK+T,SAAU,EAA9D,CAAJ,EAAsE;EACpEE,UAAAA,OAAO,CAAC3U,SAAR,CAAkBC,MAAlB,CAA0B,oBAAmB,KAAKwU,SAAU,EAA5D;EACD;;EAED,aAAKvI,IAAL;EACA,aAAK4H,WAAL,GAAmB,IAAnB;EACA,aAAKhE,OAAL,GAAe,IAAf;EACD;EACF;;EAEDvG,IAAAA,cAAc,CAACrK,KAAD,EAAQ;EACpB,UAAIA,KAAK,CAACuH,IAAN,KAAe,OAAf,IAA0BvH,KAAK,CAACsP,OAAN,KAAkB,EAA5C,IAAkDtP,KAAK,CAACsP,OAAN,KAAkB,EAAxE,EAA4E;EAC1E;EACD,OAHmB;;;EAMpB,WAAKtC,IAAL;EACD;;EAEDN,IAAAA,IAAI,GAAG;EACL,UAAI,KAAKnO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAJ,EAAqD;EACnD,eAAO,KAAP;EACD,OAHI;;;EAMLuJ,MAAAA,UAAU,CAAC,MAAM;EACf,aAAKlB,YAAL,CAAkBtJ,KAAK,CAACtD,IAAxB;;EAEA,cAAMmS,OAAO,GAAG,MAAM;EACpB,eAAKvF,YAAL,CAAkBtJ,KAAK,CAACrD,KAAxB;;EAEA,cAAI,KAAK0T,OAAT,EAAkB;EAChB,iBAAKrS,OAAL,CAAagF,OAAb,CAAqB9B,mBAArB,CAAyClB,KAAK,CAAC3C,cAA/C,EAA+DwR,OAA/D;EACA,iBAAK7Q,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,SAAtC;EACD;EACF,SAPD;;EASA,YAAI,KAAK6T,WAAT,EAAsB;EACpB,eAAKe,cAAL;EACD;;EAGD,YAAI,KAAK/E,OAAT,EAAkB;EAChB,eAAKrS,OAAL,CAAagF,OAAb,CAAqBlI,gBAArB,CAAsCkF,KAAK,CAAC3C,cAA5C,EAA4DwR,OAA5D;EACA,eAAK7Q,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,SAAnC;EACD,SAHD,MAGO;EACL;EACAgO,UAAAA,OAAO;EACR;;EAED,aAAK7Q,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,MAAnC,EAzBe;;EA4Bf,aAAK+N,YAAL;EACD,OA7BS,EA6BP,CA7BO,CAAV;EA+BA,aAAO,IAAP;EACD;;EAEDnC,IAAAA,IAAI,GAAG;EACL,UAAI,CAAC,KAAKzO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,MAAxC,CAAL,EAAsD;EACpD,eAAO,KAAP;EACD;;EAED,WAAKqI,YAAL,CAAkBtJ,KAAK,CAACpD,IAAxB;EAEA,WAAKoS,YAAL;;EAEA,UAAI,KAAKqB,OAAT,EAAkB;EAChB,aAAKrS,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,SAAnC;EACD;;EAED,WAAK7C,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,MAAtC;;EAEA,UAAI,KAAK6T,WAAT,EAAsB;EACpB,cAAMlG,QAAQ,GAAG,KAAKC,WAAL,EAAjB;;EAEA,cAAMa,QAAQ,GAAG,MAAM;EACrB,cAAI,KAAKoB,OAAT,EAAkB;EAChB,iBAAKrS,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,SAAtC;EACD;;EAED2N,UAAAA,QAAQ,CAACjN,mBAAT,CAA6BlB,KAAK,CAAC3C,cAAnC,EAAmD4R,QAAnD;EACA,eAAK3F,YAAL,CAAkBtJ,KAAK,CAACnD,MAAxB;EACA,eAAKsY,cAAL;EACD,SARD;;EAUAhH,QAAAA,QAAQ,CAACrT,gBAAT,CAA0BkF,KAAK,CAAC3C,cAAhC,EAAgD4R,QAAhD;EACAd,QAAAA,QAAQ,CAAC5N,SAAT,CAAmBM,GAAnB,CAAuB,SAAvB;EACD;;EAED,aAAO,IAAP;EACD;;EAEDuU,IAAAA,cAAc,GAAG;EACf,YAAMjH,QAAQ,GAAGvW,QAAQ,CAAC2D,aAAT,CAAuB,KAAvB,CAAjB;EACA4S,MAAAA,QAAQ,CAACtK,YAAT,CAAsB,SAAtB,EAAiC,KAAKqE,EAAtC;EACAiG,MAAAA,QAAQ,CAAC5N,SAAT,CAAmBM,GAAnB,CAAuBmM,iBAAvB;EAEApV,MAAAA,QAAQ,CAACoW,IAAT,CAAcH,WAAd,CAA0BM,QAA1B;EACD;;EAEDC,IAAAA,WAAW,GAAG;EACZ,aAAOxW,QAAQ,CAACqB,aAAT,CAAwB,IAAG+T,iBAAkB,aAAY,KAAK9E,EAAG,IAAjE,CAAP;EACD;;EAEDiN,IAAAA,cAAc,GAAG;EACf,YAAMhH,QAAQ,GAAG,KAAKC,WAAL,EAAjB;;EACA,UAAID,QAAJ,EAAc;EACZvW,QAAAA,QAAQ,CAACoW,IAAT,CAAcK,WAAd,CAA0BF,QAA1B;EACD;EACF;;EAEDS,IAAAA,YAAY,GAAG;EACb,YAAMyG,cAAc,GAAG,KAAKrX,OAAL,CAAagF,OAAb,CAAqBtJ,gBAArB,CAAsC,gBAAtC,CAAvB;;EAEA,UAAI2b,cAAJ,EAAoB;EAClBhc,QAAAA,KAAK,CAACC,IAAN,CAAW+b,cAAX,EAA2B9b,OAA3B,CAAmCqU,MAAM,IAAI,KAAK1E,eAAL,CAAqB;EAAEhH,UAAAA,MAAM,EAAE0L,MAAV;EAAkBnO,UAAAA,KAAK,EAAE;EAAzB,SAArB,CAA7C;EACD;;EAED,UAAI,KAAK4U,WAAT,EAAsB;EACpB,cAAMlG,QAAQ,GAAG,KAAKC,WAAL,EAAjB;EACA,aAAKlF,eAAL,CAAqB;EAAEhH,UAAAA,MAAM,EAAEiM,QAAV;EAAoB1O,UAAAA,KAAK,EAAEO,KAAK,CAACjD;EAAjC,SAArB;EACD;;EAED,WAAKmM,eAAL,CAAqB;EAAEhH,QAAAA,MAAM,EAAEtK,QAAV;EAAoB6H,QAAAA,KAAK,EAAE;EAA3B,OAArB;EACD;;EAEDuP,IAAAA,YAAY,GAAG;EACb,YAAMqG,cAAc,GAAG,KAAKrX,OAAL,CAAagF,OAAb,CAAqBtJ,gBAArB,CAAsC,gBAAtC,CAAvB;;EAEA,UAAI2b,cAAJ,EAAoB;EAClBhc,QAAAA,KAAK,CAACC,IAAN,CAAW+b,cAAX,EAA2B9b,OAA3B,CAAmCqU,MAAM,IAAI,KAAKxE,iBAAL,CAAuB;EAAElH,UAAAA,MAAM,EAAE0L,MAAV;EAAkBnO,UAAAA,KAAK,EAAE;EAAzB,SAAvB,CAA7C;EACD;;EAED,UAAI,KAAK4U,WAAT,EAAsB;EACpB,cAAMlG,QAAQ,GAAG,KAAKC,WAAL,EAAjB;EACA,aAAKhF,iBAAL,CAAuB;EAAElH,UAAAA,MAAM,EAAEiM,QAAV;EAAoB1O,UAAAA,KAAK,EAAEO,KAAK,CAACjD;EAAjC,SAAvB;EACD;;EAED,WAAKqM,iBAAL,CAAuB;EAAElH,QAAAA,MAAM,EAAEtK,QAAV;EAAoB6H,QAAAA,KAAK,EAAE;EAA3B,OAAvB;EACD;;EAED,WAAOsK,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmBkR,SAAnB,EAA8BhW,OAA9B,CAAP;EACD;;EAjO+B;EAoOlC;;;;;;;EAKAkI,EAAAA,kBAAkB,CAACC,CAAD,EAAIjO,IAAJ,EAAU8b,SAAV,CAAlB;EAEA;;;;;;EAKA,QAAMrH,UAAU,GAAG,EAAnB;EAEA,QAAM2I,SAAS,GAAG1d,QAAQ,CAAC8B,gBAAT,CAA2B,IAAGxB,IAAK,EAAnC,CAAlB;;EACA,MAAIod,SAAJ,EAAe;EACbjc,IAAAA,KAAK,CAACC,IAAN,CAAWgc,SAAX,EAAsB/b,OAAtB,CAA+ByJ,OAAD,IAAa;EACzC,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;EAEA2J,MAAAA,UAAU,CAAC9S,IAAX,CAAgB;EAAEmJ,QAAAA,OAAF;EAAWsS,QAAAA,SAAS,EAAE,IAAItB,SAAJ,CAAcnL,MAAd;EAAtB,OAAhB;EACD,KALD;EAMD;;EAEDjR,EAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,UAAMyC,MAAM,GAAG+D,gBAAgB,CAACxG,KAAK,CAACyC,MAAP,EAAe,aAAf,CAA/B;;EACA,QAAI,CAACA,MAAL,EAAa;EACX;EACD;;EAED,UAAM2K,cAAc,GAAG3K,MAAM,CAAC/B,YAAP,CAAoB,aAApB,CAAvB;;EACA,QAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAAzC,EAA+C;EAC7C,YAAMgQ,EAAE,GAAGhG,MAAM,CAAC/B,YAAP,CAAoB,aAApB,CAAX;EACA,YAAM6C,OAAO,GAAGpL,QAAQ,CAACqB,aAAT,CAAuBiP,EAAvB,CAAhB;EAEA,YAAMb,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACxE,OAAF,KAAcA,OAAnC,CAAlB;;EAEA,UAAI,CAACqE,SAAL,EAAgB;EACd;EACD;;EAEDnF,MAAAA,MAAM,CAACkN,IAAP;EAEA/H,MAAAA,SAAS,CAACiO,SAAV,CAAoBnJ,IAApB;EACD;EACF,GArBD;EAuBA,SAAO6H,SAAP;EACD,CAhTiB,EAgTfvc,MAAM,CAAC0O,CAAP,GAAW1O,MAAM,CAAC0O,CAAlB,GAAsB,IAhTP,CAAlB;;ECVA;;;;;AAKA;EAKA,MAAMoP,QAAQ,GAAG,CAAC,MAAM;EACtB;;;;;EAMA,QAAMrd,IAAI,GAAG,UAAb;EACA,QAAMC,OAAO,GAAG,OAAhB;EACA,QAAMuF,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzBwS,IAAAA,OAAO,EAAE,IAFgB;EAGzBC,IAAAA,MAAM,EAAE;EAHiB,GAA3B;EAKA,QAAMrL,qBAAqB,GAAG,CAC5B,SAD4B,EAE5B,QAF4B,CAA9B;EAKA;;;;;;EAMA,QAAMmL,QAAN,SAAuB3N,SAAvB,CAAiC;EAE/BvP,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAM9F,IAAN,EAAYC,OAAZ,EAAqBuF,kBAArB,EAAyCM,OAAzC,EAAkDoM,qBAAlD,EAAyE,KAAzE,EAAgF,KAAhF;EAEA,YAAMsL,QAAQ,GAAG,KAAK1X,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,iBAAnC,CAAjB;EACA,YAAM0I,IAAI,GAAG,KAAKgU,WAAL,CAAiBD,QAAjB,CAAb;EAEA,WAAKE,WAAL,CAAiBjU,IAAI,CAACuC,KAAtB,EAA6BvC,IAAI,CAAC8B,IAAlC,EAAwC,KAAxC;EACD;;EAEDmS,IAAAA,WAAW,CAAC1R,KAAK,GAAG,EAAT,EAAaT,IAAI,GAAG,IAApB,EAA0BoS,WAAW,GAAG,IAAxC,EAA8C;EACvD,UAAI,CAAC,KAAK7X,OAAL,CAAawX,OAAlB,EAA2B;EACzB,eAAO,KAAP;EACD;;EAED,UAAIM,WAAW,GAAGrS,IAAlB;EACA,WAAKzF,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,eAAnC,EAAoDQ,SAApD,GAAgEgK,IAAhE;EACA,WAAKzF,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,sBAAnC,EAA2DiL,KAA3D,GAAmEA,KAAnE;EAEA,YAAM6R,KAAK,GAAG,KAAK/X,OAAL,CAAagF,OAAb,CAAqBtJ,gBAArB,CAAsC,OAAtC,KAAkD,EAAhE;EACA,UAAIsc,SAAS,GAAG,KAAhB;EAEA3c,MAAAA,KAAK,CAACC,IAAN,CAAWyc,KAAX,EAAkBxc,OAAlB,CAA2BoI,IAAD,IAAU;EAClC,YAAIA,IAAI,CAACpB,SAAL,CAAeU,QAAf,CAAwB,UAAxB,CAAJ,EAAyC;EACvCU,UAAAA,IAAI,CAACpB,SAAL,CAAeC,MAAf,CAAsB,UAAtB;EACD;;EAED,cAAMyC,IAAI,GAAG,KAAK0S,WAAL,CAAiBhU,IAAjB,CAAb;;EAEA,YAAIuC,KAAK,KAAKjB,IAAI,CAACiB,KAAnB,EAA0B;EACxB,cAAI,CAACvC,IAAI,CAACpB,SAAL,CAAeU,QAAf,CAAwB,UAAxB,CAAL,EAA0C;EACxCU,YAAAA,IAAI,CAACpB,SAAL,CAAeM,GAAf,CAAmB,UAAnB;EACD;;EAEDiV,UAAAA,WAAW,GAAG7S,IAAI,CAACQ,IAAnB;EACAuS,UAAAA,SAAS,GAAG,IAAZ;EACD;EACF,OAfD;;EAiBA,UAAIH,WAAW,IAAIG,SAAnB,EAA8B;EAC5B,aAAKhY,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,eAAnC,EAAoDQ,SAApD,GAAgEqc,WAAhE;EACD,OAFD,MAEO,IAAID,WAAW,IAAI,CAACG,SAApB,EAA+B;EACpC,cAAM,IAAIjc,KAAJ,CAAW,GAAE7B,IAAK,gBAAegM,KAAM,wCAAvC,CAAN;EACD;;EAED,aAAO,IAAP;EACD;;EAED+R,IAAAA,WAAW,GAAG;EACZ,aAAO,KAAKjY,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,sBAAnC,EAA2DiL,KAAlE;EACD;;EAEDyR,IAAAA,WAAW,CAAChU,IAAI,GAAG,IAAR,EAAc;EACvB,UAAI8B,IAAI,GAAG,EAAX;EACA,UAAIS,KAAK,GAAG,EAAZ;;EAEA,UAAIvC,IAAJ,EAAU;EACR8B,QAAAA,IAAI,GAAG9B,IAAI,CAACxB,YAAL,CAAkB,WAAlB,KAAkCwB,IAAI,CAAClI,SAA9C;EAEA,cAAMyc,gBAAgB,GAAGvU,IAAI,CAAC1I,aAAL,CAAmB,OAAnB,CAAzB;;EACA,YAAIid,gBAAJ,EAAsB;EACpBzS,UAAAA,IAAI,GAAGyS,gBAAgB,CAACzc,SAAxB;EACD;;EAEDyK,QAAAA,KAAK,GAAGvC,IAAI,CAACxB,YAAL,CAAkB,YAAlB,KAAmC,EAA3C;EACD;;EAED,aAAO;EAAEsD,QAAAA,IAAF;EAAQS,QAAAA;EAAR,OAAP;EACD;;EAED4F,IAAAA,cAAc,CAACrK,KAAD,EAAQ;EACpB,UAAIA,KAAK,CAACuH,IAAN,KAAehH,KAAK,CAACjD,KAAzB,EAAgC;EAC9B,cAAMoZ,QAAQ,GAAGrQ,iBAAiB,CAACrG,KAAK,CAACyC,MAAP,EAAe,UAAf,CAAlC;EAEA;;;;;EAIA,YAAI,CAACiU,QAAD,IAAaA,QAAQ,KAAK,KAAKpN,UAAL,EAA9B,EAAiD;EAC/C,eAAK0D,IAAL;EACD;EACF,OAVD,MAUO,IAAIhN,KAAK,CAACuH,IAAN,KAAe,OAAnB,EAA4B;EACjC,cAAMrF,IAAI,GAAGmE,iBAAiB,CAACrG,KAAK,CAACyC,MAAP,EAAe,MAAf,CAA9B;;EAEA,YAAIP,IAAJ,EAAU;EACR,cAAIA,IAAI,CAACpB,SAAL,CAAeU,QAAf,CAAwB,UAAxB,CAAJ,EAAyC;EACvC;EACD;;EAED,gBAAMmV,QAAQ,GAAG,KAAKT,WAAL,CAAiBhU,IAAjB,CAAjB;;EAEA,cAAI,KAAKsU,WAAL,OAAuBG,QAAQ,CAAClS,KAApC,EAA2C;EACzC;EACA,iBAAK0R,WAAL,CAAiBQ,QAAQ,CAAClS,KAA1B,EAAiCkS,QAAQ,CAAC3S,IAA1C,EAAgD,KAAhD;EACA,kBAAMlM,MAAM,GAAG;EAAEoK,cAAAA,IAAF;EAAQ8B,cAAAA,IAAI,EAAE2S,QAAQ,CAAC3S,IAAvB;EAA6BS,cAAAA,KAAK,EAAEkS,QAAQ,CAAClS;EAA7C,aAAf;EACA,iBAAKoF,YAAL,CAAkBtJ,KAAK,CAACxC,aAAxB,EAAuCjG,MAAvC;EACD;;EAED,eAAKkV,IAAL;EACA;EACD,SAnBgC;;;EAsBjC,cAAM4J,YAAY,GAAGvQ,iBAAiB,CAACrG,KAAK,CAACyC,MAAP,EAAe,eAAf,CAAtC;;EACA,YAAImU,YAAJ,EAAkB;EAChB;EACD;;EAED,aAAK3E,MAAL;EACD;EACF;;EAEDA,IAAAA,MAAM,GAAG;EACP,UAAI,KAAK1T,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,QAAxC,CAAJ,EAAuD;EACrD,eAAO,KAAKwL,IAAL,EAAP;EACD;;EAED,aAAO,KAAKN,IAAL,EAAP;EACD;;EAEDA,IAAAA,IAAI,GAAG;EACL,UAAI,KAAKnO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,QAAxC,CAAJ,EAAuD;EACrD,eAAO,KAAP;EACD;;EAED,WAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BM,GAA/B,CAAmC,QAAnC;EAEA,YAAMwV,YAAY,GAAG,KAAKrY,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,gBAAnC,CAArB,CAPK;;EAULod,MAAAA,YAAY,CAACC,SAAb,GAAyB,CAAzB;EAEA,WAAKhN,YAAL,CAAkBtJ,KAAK,CAACtD,IAAxB;EACA,WAAK4M,YAAL,CAAkBtJ,KAAK,CAACrD,KAAxB;EAEA,WAAKuM,eAAL,CAAqB;EAAEhH,QAAAA,MAAM,EAAEmU,YAAV;EAAwB5W,QAAAA,KAAK,EAAE;EAA/B,OAArB;EACA,WAAKyJ,eAAL,CAAqB;EAAEhH,QAAAA,MAAM,EAAEtK,QAAQ,CAACoW,IAAnB;EAAyBvO,QAAAA,KAAK,EAAEO,KAAK,CAACjD;EAAtC,OAArB;EAEA,aAAO,IAAP;EACD;;EAED0P,IAAAA,IAAI,GAAG;EACL,UAAI,CAAC,KAAKzO,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BU,QAA/B,CAAwC,QAAxC,CAAL,EAAwD;EACtD,eAAO,KAAP;EACD;;EAED,WAAKjD,OAAL,CAAagF,OAAb,CAAqBzC,SAArB,CAA+BC,MAA/B,CAAsC,QAAtC;EAEA,WAAK8I,YAAL,CAAkBtJ,KAAK,CAACpD,IAAxB;EACA,WAAK0M,YAAL,CAAkBtJ,KAAK,CAACnD,MAAxB;EAEA,WAAKuM,iBAAL,CAAuB;EAAElH,QAAAA,MAAM,EAAE,KAAKlE,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,gBAAnC,CAAV;EAAgEwG,QAAAA,KAAK,EAAE;EAAvE,OAAvB;EACA,WAAK2J,iBAAL,CAAuB;EAAElH,QAAAA,MAAM,EAAEtK,QAAQ,CAACoW,IAAnB;EAAyBvO,QAAAA,KAAK,EAAEO,KAAK,CAACjD;EAAtC,OAAvB;EAEA,aAAO,IAAP;EACD;;EAED,WAAOgN,UAAP,GAAoB;EAClB,aAAO7R,IAAP;EACD;;EAED,WAAO4K,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,MAAM8E,YAAN,CAAmByS,QAAnB,EAA6BvX,OAA7B,CAAP;EACD;;EApK8B;EAuKjC;;;;;;;EAKA,QAAM2O,UAAU,GAAG,EAAnB;EAEA,QAAM4J,SAAS,GAAG3e,QAAQ,CAAC8B,gBAAT,CAA2B,IAAGxB,IAAK,EAAnC,CAAlB;;EACA,MAAIqe,SAAJ,EAAe;EACbld,IAAAA,KAAK,CAACC,IAAN,CAAWid,SAAX,EAAsBhd,OAAtB,CAA+ByJ,OAAD,IAAa;EACzC,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;;EAEA,UAAI,CAAC6F,MAAM,CAAC4M,MAAZ,EAAoB;EAClB9I,QAAAA,UAAU,CAAC9S,IAAX,CAAgB,IAAI0b,QAAJ,CAAa1M,MAAb,CAAhB;EACD;EACF,KAPD;EAQD;;EAEDjR,EAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,UAAM4W,YAAY,GAAGvQ,iBAAiB,CAACrG,KAAK,CAACyC,MAAP,EAAe,eAAf,CAAtC;;EACA,QAAImU,YAAJ,EAAkB;EAChB;EACD;;EAED,UAAMF,QAAQ,GAAGrQ,iBAAiB,CAACrG,KAAK,CAACyC,MAAP,EAAe,UAAf,CAAlC;;EAEA,QAAIiU,QAAJ,EAAc;EACZ,YAAMtJ,cAAc,GAAGsJ,QAAQ,CAAChW,YAAT,CAAsB,aAAtB,CAAvB;;EACA,UAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAArC,IAA6Cie,QAAjD,EAA2D;EACzD,cAAM9O,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACuB,UAAF,OAAmBoN,QAAxC,CAAlB;;EAEA,YAAI,CAAC9O,SAAL,EAAgB;EACd;EACD;;EAEDA,QAAAA,SAAS,CAACqK,MAAV;EACD;EACF;EACF,GApBD;EAsBA,SAAO6D,QAAP;EACD,CA1OgB,GAAjB;;ECVA;;;;;AAKA;EAIA,MAAMiB,cAAc,GAAG,CAAC,MAAM;EAE5B;;;;;EAMA,QAAMte,IAAI,GAAGqd,QAAQ,CAACxL,UAAT,EAAb;EACA,QAAMrM,kBAAkB,GAAG;EACzBsF,IAAAA,OAAO,EAAE,IADgB;EAEzBwS,IAAAA,OAAO,EAAE,IAFgB;EAGzBC,IAAAA,MAAM,EAAE;EAHiB,GAA3B;EAKA,QAAMrL,qBAAqB,GAAG,CAC5B,SAD4B,EAE5B,QAF4B,CAA9B;EAKA;;;;;;EAMA,QAAMoM,cAAN,SAA6BjB,QAA7B,CAAsC;EAEpCld,IAAAA,WAAW,CAAC2F,OAAO,GAAG,EAAX,EAAe;EACxB,YAAMA,OAAN;;EAEA,WAAKyY,kBAAL,GAA2BhX,KAAD,IAAW;EACnC,cAAMgW,MAAM,GAAGhW,KAAK,CAACyC,MAAN,CAAagC,KAA5B;;EAEA,YAAIuR,MAAM,KAAK,EAAf,EAAmB;EACjB,eAAKiB,SAAL;EACA;EACD;;EAGD,aAAKC,QAAL,GAAgBpd,OAAhB,CAAyBoI,IAAD,IAAU;EAChC,gBAAM1H,EAAE,GAAG,OAAO,KAAK+D,OAAL,CAAa4Y,UAApB,KAAmC,UAAnC,GAAgD,KAAK5Y,OAAL,CAAa4Y,UAA7D,GAA0E,KAAKA,UAA1F;;EAEA,cAAI3c,EAAE,CAACwb,MAAD,EAAS9T,IAAT,CAAN,EAAsB;EACpBA,YAAAA,IAAI,CAACqB,OAAL,CAAajH,KAAb,CAAmB8U,OAAnB,GAA6B,OAA7B;EACD,WAFD,MAEO;EACLlP,YAAAA,IAAI,CAACqB,OAAL,CAAajH,KAAb,CAAmB8U,OAAnB,GAA6B,MAA7B;EACD;EACF,SARD;EASD,OAlBD;;EAoBA,WAAKgG,cAAL,GAAsB/b,gBAAtB,CAAuC,OAAvC,EAAgD,KAAK2b,kBAArD;EACD;;EAEDG,IAAAA,UAAU,CAACnB,MAAM,GAAG,EAAV,EAAc9T,IAAI,GAAG,EAArB,EAAyB;EACjC,UAAIA,IAAI,CAACuC,KAAL,CAAW3C,OAAX,CAAmBkU,MAAnB,IAA6B,CAAC,CAA9B,IACC9T,IAAI,CAAC8B,IAAL,CAAUlC,OAAV,CAAkBkU,MAAlB,IAA4B,CAAC,CADlC,EACqC;EACnC,eAAO,IAAP;EACD;;EAED,aAAO,KAAP;EACD;;EAEDkB,IAAAA,QAAQ,GAAG;EACT,UAAIZ,KAAK,GAAG1c,KAAK,CAACC,IAAN,CAAW,KAAK0E,OAAL,CAAagF,OAAb,CAAqBtJ,gBAArB,CAAsC,OAAtC,KAAkD,EAA7D,CAAZ;EACAqc,MAAAA,KAAK,GAAGA,KAAK,CAACrU,GAAN,CAAWC,IAAD,IAAU;EAC1B,cAAMmV,IAAI,GAAG,KAAKnB,WAAL,CAAiBhU,IAAjB,CAAb;EACA,eAAO;EAAE8B,UAAAA,IAAI,EAAEqT,IAAI,CAACrT,IAAb;EAAmBS,UAAAA,KAAK,EAAE4S,IAAI,CAAC5S,KAA/B;EAAsClB,UAAAA,OAAO,EAAErB;EAA/C,SAAP;EACD,OAHO,CAAR;EAKA,aAAOoU,KAAP;EACD;;EAEDW,IAAAA,SAAS,GAAG;EACV,WAAKC,QAAL,GAAgBpd,OAAhB,CAAyBoI,IAAD,IAAU;EAChC,cAAMoV,CAAC,GAAGpV,IAAV;EACAoV,QAAAA,CAAC,CAAC/T,OAAF,CAAUjH,KAAV,CAAgB8U,OAAhB,GAA0B,OAA1B;EACD,OAHD;EAID;;EAEDgG,IAAAA,cAAc,GAAG;EACf,aAAO,KAAK7Y,OAAL,CAAagF,OAAb,CAAqB/J,aAArB,CAAmC,sBAAnC,CAAP;EACD;;EAEDwT,IAAAA,IAAI,GAAG;EACL,UAAI,MAAMA,IAAN,EAAJ,EAAkB;EAChB;EACA,aAAKoK,cAAL,GAAsB3S,KAAtB,GAA8B,EAA9B,CAFgB;;EAIhB,aAAKwS,SAAL;EACD;EACF;;EAED,WAAO5T,YAAP,CAAoB9E,OAApB,EAA6B;EAC3B,aAAO,IAAIwY,cAAJ,CAAmBxY,OAAnB,CAAP;EACD;;EArEmC;EAwEtC;;;;;;;EAKA,QAAM2O,UAAU,GAAG,EAAnB;EACA,QAAM4J,SAAS,GAAG3e,QAAQ,CAAC8B,gBAAT,CAA2B,IAAGxB,IAAK,EAAnC,CAAlB;;EAEA,MAAIqe,SAAJ,EAAe;EACbld,IAAAA,KAAK,CAACC,IAAN,CAAWid,SAAX,EAAsBhd,OAAtB,CAA+ByJ,OAAD,IAAa;EACzC,YAAM6F,MAAM,GAAG/B,mBAAmB,CAAC9D,OAAD,EAAUtF,kBAAV,EAA8B0M,qBAA9B,CAAlC;EACAvB,MAAAA,MAAM,CAAC7F,OAAP,GAAiBA,OAAjB;;EAEA,UAAI6F,MAAM,CAAC4M,MAAX,EAAmB;EACjB;EACA9I,QAAAA,UAAU,CAAC9S,IAAX,CAAgB,IAAI2c,cAAJ,CAAmB3N,MAAnB,CAAhB;EACD;EACF,KARD;EASD;;EAED,MAAI0N,SAAJ,EAAe;EACb3e,IAAAA,QAAQ,CAACkD,gBAAT,CAA0B,OAA1B,EAAoC2E,KAAD,IAAW;EAC5C,YAAM4W,YAAY,GAAGvQ,iBAAiB,CAACrG,KAAK,CAACyC,MAAP,EAAe,eAAf,CAAtC;;EACA,UAAImU,YAAJ,EAAkB;EAChB;EACD;;EAED,YAAMF,QAAQ,GAAGrQ,iBAAiB,CAACrG,KAAK,CAACyC,MAAP,EAAe,UAAf,CAAlC;;EAEA,UAAIiU,QAAJ,EAAc;EACZ,cAAMtJ,cAAc,GAAGsJ,QAAQ,CAAChW,YAAT,CAAsB,aAAtB,CAAvB;;EACA,YAAI0M,cAAc,IAAIA,cAAc,KAAK3U,IAArC,IAA6Cie,QAAjD,EAA2D;EACzD,gBAAM9O,SAAS,GAAGsF,UAAU,CAAC9Q,IAAX,CAAgB2L,CAAC,IAAIA,CAAC,CAACuB,UAAF,OAAmBoN,QAAxC,CAAlB;;EAEA,cAAI,CAAC9O,SAAL,EAAgB;EACd;EACD;;EAEDA,UAAAA,SAAS,CAACqK,MAAV;EACD;EACF;EACF,KApBD;EAqBD;;EAED,SAAO8E,cAAP;EACD,CA9IsB,GAAvB;;ECTA;;;;;AAMA,EAoBA,MAAMQ,GAAG,GAAG,EAAZ;EAEA;;;;;;EAKAA,GAAG,CAACC,KAAJ,GAAajZ,OAAD,IAAa;EACvB,MAAI,OAAOgZ,GAAG,CAACE,MAAX,KAAsB,WAA1B,EAAuC;EACrCF,IAAAA,GAAG,CAACE,MAAJ,GAAazZ,KAAK,CAACqF,YAAN,CAAmB9E,OAAnB,CAAb;EACD;;EACD,SAAOgZ,GAAG,CAACE,MAAX;EACD,CALD;EAOA;;;;;;;EAKAF,GAAG,CAACG,IAAJ,GAAW7S,IAAI,CAACxB,YAAhB;EAEA;;;;;;EAKAkU,GAAG,CAACI,OAAJ,GAAcnN,OAAO,CAACnH,YAAtB;EAEA;;;;;;EAKAkU,GAAG,CAAC9F,YAAJ,GAAmBT,YAAY,CAAC3N,YAAhC;EAEA;;;;;EAMA;;EACAkU,GAAG,CAAC7H,MAAJ,GAAapC,MAAM,CAACjK,YAApB;;EAGAkU,GAAG,CAACK,MAAJ,GAAahI,MAAM,CAACvM,YAApB;;EAEAkU,GAAG,CAACM,OAAJ,GAAc3H,OAAO,CAAC7M,YAAtB;;EAEAkU,GAAG,CAACO,YAAJ,GAAmBC,QAAY,CAAC1U,YAAhC;EAEA;;;;;;EAKAkU,GAAG,CAAC/E,QAAJ,GAAeR,QAAQ,CAAC3O,YAAxB;EAEA;;;;;;EAKAkU,GAAG,CAAClK,KAAJ,GAAYd,KAAK,CAAClJ,YAAlB;EAEA;;;;;;EAKAkU,GAAG,CAACtE,SAAJ,GAAgBZ,SAAS,CAAChP,YAA1B;EAGA;;;;;;EAKAkU,GAAG,CAAC/D,GAAJ,GAAUJ,GAAG,CAAC/P,YAAd;EAEA;;;;;;EAKAkU,GAAG,CAAClD,QAAJ,GAAeR,QAAQ,CAACxQ,YAAxB;EAEA;;;;;;EAKAkU,GAAG,CAACS,MAAJ,GAAa7H,MAAM,CAAC9M,YAApB;EAEA;;;;;;EAKAkU,GAAG,CAAC1B,SAAJ,GAAgBtB,SAAS,CAAClR,YAA1B;EAEA;;;;;;EAKAkU,GAAG,CAACb,QAAJ,GAAgBnY,OAAD,IAAa;EAC1B,MAAIA,OAAO,CAACyX,MAAZ,EAAoB;EAClB;EACA,WAAOe,cAAc,CAAC1T,YAAf,CAA4B9E,OAA5B,CAAP;EACD,GAJyB;;;EAO1B,SAAOuX,QAAQ,CAACzS,YAAT,CAAsB9E,OAAtB,CAAP;EACD,CARD;;;EAWAvG,MAAM,CAACigB,MAAP,GAAgBV,GAAhB;;;;;;;;"}