<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../../dist/css/phonon.css">

  </head>
  <body>


    <!-- SPA: first page -->
    <div class="app-page" data-page="one">
      <nav class="navbar navbar-toggleable-md navbar-light bg-primary">
        <a class="navbar-brand text-white" id="test" href="#" data-i18n="text: welcome">Phonon</a>

        <div class="dropdown" data-toggle="dropdown">
          <input type="hidden" name="color">
          <i class="dropdown-icon"></i>
          <div class="default-text">Blue</div>
          <div class="dropdown-menu">
            <div class="item" data-value="blue" data-selected="true">Blue</div>
            <div class="item" data-value="red">Red</div>
            <div class="item selected" data-value="green">
              <span class="description">Best one!</span>
              <span class="text">Green</span>
            </div>
          </div>
        </div>
      </nav>

      <div class="p-3">
        <h1 class="unselectable">Page1</h1>
        <h2 data-i18n="text: welcome"></h2>

        <p>
          <a class="btn btn-primary" data-toggle="collapse" href="#exampleCollapse" aria-expanded="false" aria-controls="exampleCollapse">
            Link with href
          </a>
          <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#exampleCollapse" aria-expanded="false" aria-controls="exampleCollapse">
            Button with data-target
          </button>
        </p>

        <div class="collapse" id="exampleCollapse">
          Collapse content.
        </div>

        <button class="btn btn-primary" data-navigate="two" data-pop-page=true>Go to page2 (button)</button>
        <a href="#!/two/a/b/c">Go to page2 (link)</a>

        <p>Test template</p>
        <div data-render></div>

        <p>Test params</p>
        <a href="#!/one/a">Test 1</a>
        <a href="#!/one/a/b">Test 2</a>
        <a href="#!/one/a/b/c">Test 3</a>

        <p>Test i18n</p>
        <p data-i18n="text: welcome">?</p>
        <input type="text" class="form-control" data-i18n="value: welcome" value="?">
        <input type="text" class="form-control" data-i18n="data-test: welcome, placeholder: welcome">
      </div>
    </div>

    <!-- SPA: second page -->
    <div class="app-page" data-page="two">
      <div class="px-3 py-3">
        <h1>Page2</h1>

        <button class="btn btn-primary" data-navigate="$back">Go to page1</button>

        <div class="px-3 py-3 bg-faded" data-push-template></div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

    <script src="../../dist/js/phonon.js"></script>
    <script>
      // First of all: config
      const pager = phonon.pager({
        hashPrefix: '#!',
        useHash: true,
        defaultPage: 'one',
        animatePages: true,
      })

      pager.select('*').addEvents({
        show: function () {
          console.log('test global show')
        }
      })

      pager.select('one').addEvents({
        show: function () {
          console.log('test local show')
        },
        shown: function () {
          console.log('test local shown')
        },
        hide: function () {
          console.log('test local hide')
        },
        hidden: function () {
          console.log('test local hidden')
        },
        hash: function () {
          console.log('test local hash')
        }
      })

      const template = '<div class="px-2 py-2 bg-primary text-white">This is my template.</div>';

      pager.select('one').setTemplate(template, function (page, template, elements) {
        page.querySelector('[data-render]').innerHTML = template
      })

      // i18n
      const intl = phonon.intl({
        fallbackLocale: 'en',
        locale: 'en',
        bind: true,
        data: {
          en: {
            welcome: 'Hello (default)'
          },
          en_US: {
            welcome: 'Hello US'
          },
          fr: {
            welcome: 'Bonjour'
          }
        }
      });


      // Start the app
      pager.start()

    </script>
  </body>
</html>
